{"description":"Linux Sandbox: assert monothreaded in tests\r\n\r\nWhen we start a new test that requires fork(), assert that we are not\r\ncurrently multi-threaded.\r\n\r\nBUG=225809\r\nNOTRY=true\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=191957","cc":["chromium-reviews@chromium.org","agl@chromium.org","jln+watch@chromium.org","markus@chromium.org"],"reviewers":["mvrable@chromium.org","markus@chromium.org"],"messages":[{"sender":"jln@chromium.org","recipients":["jln@chromium.org","mseaborn@chromium.org","chromium-reviews@chromium.org","agl@chromium.org","jln+watch@chromium.org"],"text":"Mark, do you mind taking a quick look at this?","disapproval":false,"date":"2013-04-02 19:16:35.179050","approval":false},{"sender":"jln@chromium.org","recipients":["jln@chromium.org","mvrable@chromium.org","chromium-reviews@chromium.org","agl@chromium.org","jln+watch@chromium.org","markus@chromium.org"],"text":"Michael, Mark seems away, do you mind taking a look ?\n\nMarkus: since Michael doesn't have committer access, I'll TBR you on this review.","disapproval":false,"date":"2013-04-02 23:36:54.911720","approval":false},{"sender":"markus@chromium.org","recipients":["jln@chromium.org","mvrable@chromium.org","markus@chromium.org","chromium-reviews@chromium.org","agl@chromium.org","jln+watch@chromium.org","markus@chromium.org"],"text":"lgtm\n\nI assume this means that the Android issue is resolved. If so, then yes, this looks OK.","disapproval":false,"date":"2013-04-02 23:41:33.518540","approval":true},{"sender":"jln@chromium.org","recipients":["jln@chromium.org","mvrable@chromium.org","markus@chromium.org","chromium-reviews@chromium.org","agl@chromium.org","jln+watch@chromium.org","markus@chromium.org"],"text":"> I assume this means that the Android issue is resolved. If so, then yes, this\n> looks OK.\n\nYep, took a long while, but it is! (http://code.google.com/p/chromium/issues/detail?id=169416)\n\nThanks for the review, I didn't expect you to be around :)","disapproval":false,"date":"2013-04-02 23:44:42.573400","approval":false},{"sender":"mvrable@chromium.org","recipients":["jln@chromium.org","mvrable@chromium.org","markus@chromium.org","chromium-reviews@chromium.org","agl@chromium.org","jln+watch@chromium.org","markus@chromium.org"],"text":"LGTM\n\nOnly one style issue I'm not sure about that you should take a look at.\n\nhttps://chromiumcodereview.appspot.com/13430016/diff/1/sandbox/linux/tests/unit_tests.cc\nFile sandbox/linux/tests/unit_tests.cc (right):\n\nhttps://chromiumcodereview.appspot.com/13430016/diff/1/sandbox/linux/tests/unit_tests.cc#newcode88\nsandbox/linux/tests/unit_tests.cc:88: ASSERT_EQ(CountThreads(), 1) << \"Running sandbox tests with multiple threads \"\nOnly one minor comment: I thought (I could be wrong) it was customary to put the expected value first, so perhaps write\n  ASSERT_EQ(1, CountThreads()","disapproval":false,"date":"2013-04-02 23:45:00.762160","approval":true},{"sender":"jln@chromium.org","recipients":["jln@chromium.org","mvrable@chromium.org","markus@chromium.org","chromium-reviews@chromium.org","agl@chromium.org","jln+watch@chromium.org","markus@chromium.org"],"text":"https://chromiumcodereview.appspot.com/13430016/diff/1/sandbox/linux/tests/unit_tests.cc\nFile sandbox/linux/tests/unit_tests.cc (right):\n\nhttps://chromiumcodereview.appspot.com/13430016/diff/1/sandbox/linux/tests/unit_tests.cc#newcode88\nsandbox/linux/tests/unit_tests.cc:88: ASSERT_EQ(CountThreads(), 1) << \"Running sandbox tests with multiple threads \"\nOn 2013/04/02 23:45:00, mvrable wrote:\n> Only one minor comment: I thought (I could be wrong) it was customary to put the\n> expected value first, so perhaps write\n>   ASSERT_EQ(1, CountThreads()\n\nAbsolutely, no idea how I messed that up. Thanks.","disapproval":false,"date":"2013-04-02 23:49:30.807570","approval":false},{"sender":"jln@chromium.org","recipients":["jln@chromium.org","mvrable@chromium.org","markus@chromium.org","chromium-reviews@chromium.org","agl@chromium.org","jln+watch@chromium.org","markus@chromium.org"],"text":"Committed patchset #2 manually as r191957 (presubmit successful).","disapproval":false,"date":"2013-04-03 02:19:11.078720","approval":false}],"owner_email":"jln@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"jln","subject":"Linux Sandbox: assert monothreaded in tests","created":"2013-04-02 19:07:22.622760","patchsets":[1,18],"modified":"2013-04-03 02:19:11.407080","closed":true,"commit":false,"issue":13430016}