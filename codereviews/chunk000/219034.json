{"description":"Makes it so that you shouldn't be able to get a big fat bookmark\nbar. This happened because when we changed from needing a\nbookmarkbar/extension-shelf to not needing one we processed the layout\nchange asynchronously, but could paint immediately and painting always\nchecks the current state. I initially made painting/layout stay in\nsync with regards to whether they thought the bookmark bar should be\nshown, which also fixes this, but because we process the change async\nthere was still some noticable jank. Instead I've changed processing\nof the transition from needing bars to not (or vice-versa) to be\nsynchronous.\n\nBUG=22165\nTEST=see bug\n\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=27218","cc":["chromium-reviews@googlegroups.com","brettw@chromium.org","ben@chromium.org","tim@chromium.org","phajdan.jr@chromium.org"],"reviewers":["brettw@chromium.org"],"messages":[{"sender":"sky@chromium.org","recipients":["sky@chromium.org","brettw@chromium.org","chromium-reviews@googlegroups.com","brettw@chromium.org","ben@chromium.org","tim@chromium.org","phajdan.jr@chromium.org"],"text":"","disapproval":false,"date":"2009-09-24 20:00:42.446025","approval":false},{"sender":"brettw@chromium.org","recipients":["sky@chromium.org","brettw@chromium.org","chromium-reviews@googlegroups.com","brettw@chromium.org","ben@chromium.org","tim@chromium.org","phajdan.jr@chromium.org"],"text":"http://codereview.chromium.org/219034/diff/1/12\nFile chrome/browser/browser.cc (right):\n\nhttp://codereview.chromium.org/219034/diff/1/12#newcode2467\nLine 2467: changed_flags = (changed_flags | TabContents::INVALIDATE_BOOKMARK_BAR |\nIs this | stuff necessary? It seems like &ing it with the ~ of the flags should be sufficient to clear the bits.\n\nhttp://codereview.chromium.org/219034/diff/1/7\nFile chrome/browser/tab_contents/navigation_controller.cc (right):\n\nhttp://codereview.chromium.org/219034/diff/1/7#newcode34\nLine 34: const int kInvalidateAllButShelves = TabContents::INVALIDATE_URL |\nThis seems dangerous. When somebody adds a flag, they probably won't know to update this constant. What about ekeping the INVALIDATE_EVERYTHING constant and then removing the flags from it in this computation?","disapproval":false,"date":"2009-09-24 22:04:19.158921","approval":false},{"sender":"sky@chromium.org","recipients":["sky@chromium.org","brettw@chromium.org","chromium-reviews@googlegroups.com","brettw@chromium.org","ben@chromium.org","tim@chromium.org","phajdan.jr@chromium.org"],"text":"All updated, including Mac and Linux. Mac doesn't yet support always showing the bookmark bar on the new tab page, so the new method is NOTIMPLEMENTED.","disapproval":false,"date":"2009-09-25 00:00:44.245208","approval":false}],"owner_email":"sky@chromium.org","private":false,"base_url":"svn://chrome-svn/chrome/trunk/src/","owner":"sky","subject":"Makes it so that you shouldn't be able to get a big fat bookmark...","created":"2009-09-24 20:00:34.686128","patchsets":[1,3003],"modified":"2011-05-09 13:34:32.505659","closed":true,"commit":false,"issue":219034}