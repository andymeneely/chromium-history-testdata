{"description":"Save memory in the downloads extension API.\nEDERD is only necessary if there are extensions listening for either onChanged or onDeterminingFilename.\n\nBUG=224332\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=195233","cc":["chromium-reviews@chromium.org","benjhayden+dwatch@chromium.org","aa@chromium.org","chromium-apps-reviews@chromium.org"],"reviewers":["mpcomplete@chromium.org"],"messages":[{"sender":"benjhayden@chromium.org","recipients":["benjhayden@chromium.org","kalman@chromium.org","chromium-reviews@chromium.org","benjhayden+dwatch@chromium.org","aa@chromium.org","chromium-apps-reviews@chromium.org"],"text":"I seem to recall you saying that HasEventListeners was not as good as will_dispatch_callback for some reason back when I implemented onDeterminingFilename.\nIs HasEventListeners a sufficient way to determine whether there are any listeners, or do I need to figure out something involving will_dispatch_callback and/or OnListenerAdded?","disapproval":false,"date":"2013-04-16 20:07:41.796430","approval":false},{"sender":"kalman@chromium.org","recipients":["benjhayden@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","benjhayden+dwatch@chromium.org","aa@chromium.org","chromium-apps-reviews@chromium.org"],"text":"I'm going to punt this to mpcomplete because I don't remember saying that, but it sounds like the kind of thing that Matt would say...","disapproval":false,"date":"2013-04-17 01:33:09.734690","approval":false},{"sender":"mpcomplete@chromium.org","recipients":["benjhayden@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","benjhayden+dwatch@chromium.org","aa@chromium.org","chromium-apps-reviews@chromium.org"],"text":"HasEventListener is the right thing to use here. will_dispatch_callback was useful for handling incognito specially, but we don't need to do that here.\n\nLGTM with the style issues fixed.\n\nhttps://codereview.chromium.org/14308002/diff/11001/chrome/browser/extensions/api/downloads/downloads_api.cc\nFile chrome/browser/extensions/api/downloads/downloads_api.cc (right):\n\nhttps://codereview.chromium.org/14308002/diff/11001/chrome/browser/extensions/api/downloads/downloads_api.cc#newcode1329\nchrome/browser/extensions/api/downloads/downloads_api.cc:1329: extensions::event_names::kOnDownloadDeterminingFilename);\nnit: might help to put\n  namespace events = extensions::event_names\nat the top to shorten all these refs.\n\nhttps://codereview.chromium.org/14308002/diff/11001/chrome/browser/extensions/api/downloads/downloads_api.cc#newcode1331\nchrome/browser/extensions/api/downloads/downloads_api.cc:1331: event_router();\nUse 4 space indent when wrapping a line like this.","disapproval":false,"date":"2013-04-17 02:01:28.905640","approval":true},{"sender":"benjhayden@chromium.org","recipients":["benjhayden@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","benjhayden+dwatch@chromium.org","aa@chromium.org","chromium-apps-reviews@chromium.org"],"text":"Thanks!\n\nhttps://codereview.chromium.org/14308002/diff/11001/chrome/browser/extensions/api/downloads/downloads_api.cc\nFile chrome/browser/extensions/api/downloads/downloads_api.cc (right):\n\nhttps://codereview.chromium.org/14308002/diff/11001/chrome/browser/extensions/api/downloads/downloads_api.cc#newcode1329\nchrome/browser/extensions/api/downloads/downloads_api.cc:1329: extensions::event_names::kOnDownloadDeterminingFilename);\nOn 2013/04/17 02:01:28, Matt Perry wrote:\n> nit: might help to put\n>   namespace events = extensions::event_names\n> at the top to shorten all these refs.\n\nDone.\n\nhttps://codereview.chromium.org/14308002/diff/11001/chrome/browser/extensions/api/downloads/downloads_api.cc#newcode1331\nchrome/browser/extensions/api/downloads/downloads_api.cc:1331: event_router();\nOn 2013/04/17 02:01:28, Matt Perry wrote:\n> Use 4 space indent when wrapping a line like this.\n\nDone.","disapproval":false,"date":"2013-04-18 18:17:55.568830","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benjhayden@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","benjhayden+dwatch@chromium.org","aa@chromium.org","chromium-apps-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benjhayden@chromium.org/14308002/1006","disapproval":false,"date":"2013-04-19 12:39:47.414860","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benjhayden@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","benjhayden+dwatch@chromium.org","aa@chromium.org","chromium-apps-reviews@chromium.org"],"text":"Step \"update\" is always a major failure.\nLook at the try server FAQ for more details.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=ios_dbg_simulator&number=44071","disapproval":false,"date":"2013-04-19 12:40:49.671040","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benjhayden@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","benjhayden+dwatch@chromium.org","aa@chromium.org","chromium-apps-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benjhayden@chromium.org/14308002/21004","disapproval":false,"date":"2013-04-19 14:36:37.238820","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benjhayden@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","benjhayden+dwatch@chromium.org","aa@chromium.org","chromium-apps-reviews@chromium.org"],"text":"Change committed as 195233","disapproval":false,"date":"2013-04-19 18:04:49.394630","approval":false}],"owner_email":"benjhayden@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"benjhayden_chromium","subject":"Save memory in the downloads extension API.","created":"2013-04-16 19:43:27.636680","patchsets":[11001,1006,21004],"modified":"2013-04-19 18:04:49.517820","closed":true,"commit":false,"issue":14308002}