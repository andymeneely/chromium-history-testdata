{"description":"Clicking on restore window button on ntp now nukes ntp. We always did\nthis for tabs, just not windows.\n\nBUG=21316\nTEST=see bug\n\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=31146","cc":["chromium-reviews@googlegroups.com","ben+cc@chromium.org"],"reviewers":["ben@chromium.org"],"messages":[{"sender":"sky@chromium.org","recipients":["sky@chromium.org","ben@chromium.org","chromium-reviews@googlegroups.com","ben+cc@chromium.org"],"text":"","disapproval":false,"date":"2009-11-05 19:20:24.058501","approval":false},{"sender":"ben@chromium.org","recipients":[],"text":"\nOK\n\nOn Thu, Nov 5, 2009 at 11:20 AM,  <sky@chromium.org> wrote:\n> Reviewers: Ben Goodger,\n>\n> Description:\n> Clicking on restore window button on ntp now nukes ntp. We always did\n> this for tabs, just not windows.\n>\n> BUG=3D21316\n> TEST=3Dsee bug\n>\n>\n> Please review this at http://codereview.chromium.org/360060\n>\n> SVN Base: svn://chrome-svn/chrome/trunk/src/\n>\n> Affected files:\n> =A0M =A0 =A0 chrome/browser/sessions/tab_restore_service.cc\n>\n>\n> Index: chrome/browser/sessions/tab_restore_service.cc\n> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=\n=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=\n=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D\n> --- chrome/browser/sessions/tab_restore_service.cc =A0 =A0 =A0(revision 3=\n1109)\n> +++ chrome/browser/sessions/tab_restore_service.cc =A0 =A0 =A0(working co=\npy)\n> @@ -283,6 +283,7 @@\n> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 tab->=\npinned, tab->from_last_session);\n> =A0 =A0 }\n> =A0 } else if (entry->type =3D=3D WINDOW) {\n> + =A0 =A0Browser* current_browser =3D browser;\n> =A0 =A0 const Window* window =3D static_cast<Window*>(entry);\n> =A0 =A0 browser =3D Browser::Create(profile());\n> =A0 =A0 for (size_t tab_i =3D 0; tab_i < window->tabs.size(); ++tab_i) {\n> @@ -302,6 +303,11 @@\n> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 browser->session_id()=\n.id());\n> =A0 =A0 }\n> =A0 =A0 browser->window()->Show();\n> +\n> + =A0 =A0if (replace_existing_tab && current_browser &&\n> + =A0 =A0 =A0 =A0current_browser->GetSelectedTabContents()) {\n> + =A0 =A0 =A0current_browser->CloseTab();\n> + =A0 =A0}\n> =A0 } else {\n> =A0 =A0 NOTREACHED();\n> =A0 }\n>\n>\n>","disapproval":false,"date":"2009-11-05 19:22:37.331115","approval":false}],"owner_email":"sky@chromium.org","private":false,"base_url":"svn://chrome-svn/chrome/trunk/src/","owner":"sky","subject":"Clicking on restore window button on ntp now nukes ntp. We always did...","created":"2009-11-05 19:20:22.734642","patchsets":[1],"modified":"2011-05-09 13:40:35.446570","closed":true,"commit":false,"issue":360060}