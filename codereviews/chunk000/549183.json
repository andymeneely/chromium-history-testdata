{"description":"Window.open calls issued by pages within ChromeFrame which use the NEW_WINDOW/NEW_POPUP\ndispositions open up as regular Chrome windows, which results in them not using the host network stack,\nwhich means that HTTP sessions/cookies, etc established by the main page will not work for the popup.\n\nFix is to ensure that these dispositions also get routed back to the host browser where a new tab\nwould be created which would attach itself to the newly created ExternalTabContainer instance.\n\nFixes bug http://code.google.com/p/chromium/issues/detail?id=33324\n\nBug=33324\nTest=Covered by ChromeFrame unit test.\n\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=37425","cc":["chromium-reviews@chromium.org","ben+cc@chromium.org","phajdan.jr@chromium.org"],"reviewers":["amit@chromium.org"],"messages":[{"sender":"ananta@chromium.org","recipients":["ananta@chromium.org","amit@chromium.org","chromium-reviews@chromium.org","amit@chromium.org","ben+cc@chromium.org","phajdan.jr@chromium.org"],"text":"","disapproval":false,"date":"2010-01-27 23:11:56.623051","approval":false},{"sender":"amit@chromium.org","recipients":["ananta@chromium.org","amit@chromium.org","chromium-reviews@chromium.org","amit@chromium.org","ben+cc@chromium.org","phajdan.jr@chromium.org"],"text":"http://codereview.chromium.org/549183/diff/1/7\nFile chrome/browser/external_tab_container.cc (left):\n\nhttp://codereview.chromium.org/549183/diff/1/7#oldcode317\nchrome/browser/external_tab_container.cc:317: Browser::BuildPopupWindowHelper(source, new_contents, initial_pos,\nWill removing this effectively disable Chrome's popup blocker?\n\nhttp://codereview.chromium.org/549183/diff/1/3\nFile chrome_frame/chrome_active_document.cc (right):\n\nhttp://codereview.chromium.org/549183/diff/1/3#newcode581\nchrome_frame/chrome_active_document.cc:581: bool is_internal_navigation = ((new_navigation_info.navigation_index > 0) &&\nnit: please add comment explaining why we treat the attached tab like internal navigation.\n\nhttp://codereview.chromium.org/549183/diff/1/3#newcode852\nchrome_frame/chrome_active_document.cc:852: url_.Reset(::SysAllocString(url.c_str()));\nnit: move common code out of if","disapproval":false,"date":"2010-01-28 00:14:28.990599","approval":false},{"sender":"ananta@chromium.org","recipients":["ananta@chromium.org","amit@chromium.org","chromium-reviews@chromium.org","amit@chromium.org","ben+cc@chromium.org","phajdan.jr@chromium.org"],"text":"http://codereview.chromium.org/549183/diff/1/7\nFile chrome/browser/external_tab_container.cc (left):\n\nhttp://codereview.chromium.org/549183/diff/1/7#oldcode317\nchrome/browser/external_tab_container.cc:317: Browser::BuildPopupWindowHelper(source, new_contents, initial_pos,\nOn 2010/01/28 00:14:29, amit wrote:\n> Will removing this effectively disable Chrome's popup blocker?\nNo. That code exists in V8.\n\nhttp://codereview.chromium.org/549183/diff/1/3\nFile chrome_frame/chrome_active_document.cc (right):\n\nhttp://codereview.chromium.org/549183/diff/1/3#newcode581\nchrome_frame/chrome_active_document.cc:581: bool is_internal_navigation = ((new_navigation_info.navigation_index > 0) &&\nOn 2010/01/28 00:14:29, amit wrote:\n> nit: please add comment explaining why we treat the attached tab like internal\n> navigation.\n\nDone.\n\nhttp://codereview.chromium.org/549183/diff/1/3#newcode852\nchrome_frame/chrome_active_document.cc:852: url_.Reset(::SysAllocString(url.c_str()));\nOn 2010/01/28 00:14:29, amit wrote:\n> nit: move common code out of if\n\nDone.","disapproval":false,"date":"2010-01-28 00:31:18.096011","approval":false},{"sender":"amit@chromium.org","recipients":["ananta@chromium.org","amit@chromium.org","chromium-reviews@chromium.org","ben+cc@chromium.org","phajdan.jr@chromium.org"],"text":"LGTM\n\nOn 2010/01/28 00:31:18, ananta wrote:\n> http://codereview.chromium.org/549183/diff/1/7\n> File chrome/browser/external_tab_container.cc (left):\n> \n> http://codereview.chromium.org/549183/diff/1/7#oldcode317\n> chrome/browser/external_tab_container.cc:317:\n> Browser::BuildPopupWindowHelper(source, new_contents, initial_pos,\n> On 2010/01/28 00:14:29, amit wrote:\n> > Will removing this effectively disable Chrome's popup blocker?\n> No. That code exists in V8.\n> \n> http://codereview.chromium.org/549183/diff/1/3\n> File chrome_frame/chrome_active_document.cc (right):\n> \n> http://codereview.chromium.org/549183/diff/1/3#newcode581\n> chrome_frame/chrome_active_document.cc:581: bool is_internal_navigation =\n> ((new_navigation_info.navigation_index > 0) &&\n> On 2010/01/28 00:14:29, amit wrote:\n> > nit: please add comment explaining why we treat the attached tab like internal\n> > navigation.\n> \n> Done.\n> \n> http://codereview.chromium.org/549183/diff/1/3#newcode852\n> chrome_frame/chrome_active_document.cc:852:\n> url_.Reset(::SysAllocString(url.c_str()));\n> On 2010/01/28 00:14:29, amit wrote:\n> > nit: move common code out of if\n> \n> Done.","disapproval":false,"date":"2010-01-28 01:40:41.547806","approval":true}],"owner_email":"ananta@chromium.org","private":false,"base_url":"svn://chrome-svn/chrome/trunk/src/","owner":"ananta","subject":"Window.open calls issued by pages within ChromeFrame which use the NEW_WINDOW...","created":"2010-01-27 23:11:47.830677","patchsets":[1,7001,6002],"modified":"2011-06-16 13:53:35.763428","closed":true,"commit":false,"issue":549183}