{"files":{"chrome/browser/signin/signin_manager.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[{"author":"Andrew T Wilson","author_email":"atwilson@chromium.org","text":"I'm not a huge fan of having this extra notification.\n\nInstead, can we just move the calls to ResetCredentialsInMemory() and EraseTokensFromDB() below until *after* GOOGLE_SIGNED_OUT is called?\n\nAlso, what if we change TokenService to invalidate its oauth login token when the user logs out (as I think has been discussed) - will that impact services that now rely on access tokens living past the logout process?\n\nFinally, if that service has a cached access token, won't it do something like this:\n\n1) Get GOOGLE_SIGNED_OUT\n2) Try using the access token (async network call)\n3) TokenService blows away tokens\n4) Server returns \"token expired\" error\n5) Service tries to mint a new access token, but TokenService no longer has a login token due to step #3, so it can't.\n\nThis attempt to hit the server after logout seems destined to be pretty unreliable - so much so that I am unconvinced we should be doing it.\n\nI don't see a downside to clearing the tokens post-notification, though, even though I don't think your intended use is valid.","draft":false,"lineno":367,"date":"2012-11-08 13:43:54.949360","left":false}],"id":3001,"is_binary":false},"chrome/browser/signin/signin_manager_fake.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":3002,"is_binary":false},"chrome/common/chrome_notification_types.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":3003,"is_binary":false}},"owner_email":"chenyu@chromium.org","owner":"Chen Yu","message":" ","try_job_results":[],"created":"2012-11-07 18:07:22.541660","url":null,"num_comments":1,"modified":"2012-11-08 13:43:54.985550","patchset":2001,"issue":11312124}