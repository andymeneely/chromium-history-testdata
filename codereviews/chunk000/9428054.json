{"description":"Now that uploading to breakpad works on all threads add it to all places that we could return an unrecoverable error. Those places include:\n1. Failed model association resulting in unrecoverable error being called on DTC.\n2. When disabling a single type due to a perdatatype error.\n3. Failing to download requested types resulting in unrecoverable error.\n\n\nBUG=\nTEST=\n\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=125220\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=126102","cc":["chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","tim@chromium.org"],"reviewers":["tim@chromium.org","zea@chromium.org","akalin@chromium.org"],"messages":[{"sender":"lipalani@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"Whoever has the time please review.","disapproval":false,"date":"2012-02-22 23:00:31.029211","approval":false},{"sender":"tim@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"http://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/data_type_manager_impl.cc\nFile chrome/browser/sync/glue/data_type_manager_impl.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/data_type_manager_impl.cc#newcode309\nchrome/browser/sync/glue/data_type_manager_impl.cc:309: ChromeReportUnrecoverableError();\nDoes this mean we'll upload a stack every time a basic network hiccup occurs during config?  I'm a bit concerned that it isn't really a unique enough situation to warrant sending (might be better served by UMA?).  I guess we can try it out..\n\nhttp://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode126\nchrome/browser/sync/glue/frontend_data_type_controller.cc:126: ChromeReportUnrecoverableError();\nSanity check - are we sending up multiple unrecoverable errors to bpad for the same failure, but at different layers of the code?\n\nhttp://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/non_frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/non_frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/non_frontend_data_type_controller.cc#newcode132\nchrome/browser/sync/glue/non_frontend_data_type_controller.cc:132: // Report the error to crash service(unless the error is needs crypto).\nI like the idea of having a comment here (and in frontend_data_...), but perhaps explaining the rationale rather than restating the code is better?","disapproval":false,"date":"2012-02-23 04:15:23.354885","approval":false},{"sender":"lipalani@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"PTAL.\n\nhttp://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/data_type_manager_impl.cc\nFile chrome/browser/sync/glue/data_type_manager_impl.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/data_type_manager_impl.cc#newcode309\nchrome/browser/sync/glue/data_type_manager_impl.cc:309: ChromeReportUnrecoverableError();\nNo I have already fixed that. In non desktop like platforms we will simply wait. In windows desktop if there is a network error during setup the unrecoverable error will be thrown from PSS. The error from here is a legitimate \"I asked you to download x but I havent gotten x\".\nOn 2012/02/23 04:15:23, timsteele wrote:\n> Does this mean we'll upload a stack every time a basic network hiccup occurs\n> during config?  I'm a bit concerned that it isn't really a unique enough\n> situation to warrant sending (might be better served by UMA?).  I guess we can\n> try it out..\n\nhttp://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode126\nchrome/browser/sync/glue/frontend_data_type_controller.cc:126: ChromeReportUnrecoverableError();\nIt is possible. We could send upto 2 crash reports. But from the call stack it will be clearly visible the failure was due to a syncable operation and then we can look for that call stack. If it is not a syncable operation then the call stack should say what caused it.\n\nThe way to fix this would be to remember we have uploaded and that is pretty tricky because of all the threads.\nOn 2012/02/23 04:15:23, timsteele wrote:\n> Sanity check - are we sending up multiple unrecoverable errors to bpad for the\n> same failure, but at different layers of the code?\n\nhttp://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/non_frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/non_frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/4/chrome/browser/sync/glue/non_frontend_data_type_controller.cc#newcode132\nchrome/browser/sync/glue/non_frontend_data_type_controller.cc:132: // Report the error to crash service(unless the error is needs crypto).\nOn 2012/02/23 04:15:23, timsteele wrote:\n> I like the idea of having a comment here (and in frontend_data_...), but perhaps\n> explaining the rationale rather than restating the code is better?\n\nDone.","disapproval":false,"date":"2012-02-24 22:56:19.002394","approval":false},{"sender":"akalin@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"http://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/data_type_manager_impl.cc\nFile chrome/browser/sync/glue/data_type_manager_impl.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/data_type_manager_impl.cc#newcode309\nchrome/browser/sync/glue/data_type_manager_impl.cc:309: ChromeReportUnrecoverableError();\ncan we put this call in Abort instead, when UNRECOVERABLE_ERROR is passed in?\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode126\nchrome/browser/sync/glue/frontend_data_type_controller.cc:126: ChromeReportUnrecoverableError();\nwhy do we report an unrecoverable error but not call RecordUnrecoverableError?\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode205\nchrome/browser/sync/glue/frontend_data_type_controller.cc:205: ChromeReportUnrecoverableError();\ncan we put this with RecordUnrecoverableError instead?\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode219\nchrome/browser/sync/glue/frontend_data_type_controller.cc:219: ChromeReportUnrecoverableError();\nhere too?\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/non_frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/non_frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/non_frontend_data_type_controller.cc#newcode288\nchrome/browser/sync/glue/non_frontend_data_type_controller.cc:288: ChromeReportUnrecoverableError();\nsame comments as other file","disapproval":false,"date":"2012-02-24 23:03:09.698036","approval":false},{"sender":"lipalani@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"took a little longer than I expected because of other work and also a bunch of refactoring here and fixing unit tests.\n\nPTAL.\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/data_type_manager_impl.cc\nFile chrome/browser/sync/glue/data_type_manager_impl.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/data_type_manager_impl.cc#newcode309\nchrome/browser/sync/glue/data_type_manager_impl.cc:309: ChromeReportUnrecoverableError();\nI explained this offline. We might end up doing double reporting in that case.\nOn 2012/02/24 23:03:09, akalin wrote:\n> can we put this call in Abort instead, when UNRECOVERABLE_ERROR is passed in?\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode126\nchrome/browser/sync/glue/frontend_data_type_controller.cc:126: ChromeReportUnrecoverableError();\nOn 2012/02/24 23:03:09, akalin wrote:\n> why do we report an unrecoverable error but not call RecordUnrecoverableError?\n\nDone.\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode205\nchrome/browser/sync/glue/frontend_data_type_controller.cc:205: ChromeReportUnrecoverableError();\nOn 2012/02/24 23:03:09, akalin wrote:\n> can we put this with RecordUnrecoverableError instead?\n\nDone.\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode219\nchrome/browser/sync/glue/frontend_data_type_controller.cc:219: ChromeReportUnrecoverableError();\nOn 2012/02/24 23:03:09, akalin wrote:\n> here too?\n\nDone.\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/non_frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/non_frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/14001/chrome/browser/sync/glue/non_frontend_data_type_controller.cc#newcode288\nchrome/browser/sync/glue/non_frontend_data_type_controller.cc:288: ChromeReportUnrecoverableError();\nOn 2012/02/24 23:03:09, akalin wrote:\n> same comments as other file\n\nDone.","disapproval":false,"date":"2012-03-01 02:12:11.869871","approval":false},{"sender":"akalin@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"initial comments, will look more once you update your checkout\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/data_type_controller.h\nFile chrome/browser/sync/glue/data_type_controller.h (right):\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/data_type_controller.h#newcode96\nchrome/browser/sync/glue/data_type_controller.h:96: virtual void OnSingleDatatypeUnrecoverableError(\ncan you make these functions protected instead?\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/data_type_controller.h#newcode103\nchrome/browser/sync/glue/data_type_controller.h:103: virtual void RecordUnrecoverableError(\nHow about just have a single pure virtual method called\nReportAndHandleUnrecoverableError().  Also update the comment.\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/data_type_manager_impl.cc\nFile chrome/browser/sync/glue/data_type_manager_impl.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/data_type_manager_impl.cc#newcode309\nchrome/browser/sync/glue/data_type_manager_impl.cc:309: ChromeReportUnrecoverableError();\nmaybe make this the first thing in the block\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode221\nchrome/browser/sync/glue/frontend_data_type_controller.cc:221: AssociatorInterface* FrontendDataTypeController::model_associator() const {\nit looks like your checkout is outdated?  There should be a 'RecordUnrecoverableError' implementation here","disapproval":false,"date":"2012-03-01 21:11:07.272578","approval":false},{"sender":"lipalani@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"PTAL.\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/data_type_controller.h\nFile chrome/browser/sync/glue/data_type_controller.h (right):\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/data_type_controller.h#newcode96\nchrome/browser/sync/glue/data_type_controller.h:96: virtual void OnSingleDatatypeUnrecoverableError(\nOn 2012/03/01 21:11:07, akalin wrote:\n> can you make these functions protected instead?\n\nDone.\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/data_type_controller.h#newcode103\nchrome/browser/sync/glue/data_type_controller.h:103: virtual void RecordUnrecoverableError(\nWhen i coded this up RecoredUnrecoverableError was implemented in each dervived class.  Also we did not want each derived class to call \"ChromeSendErrorReport\".\n\nNow I have moved RecordUrecoverableError to DTC and made it private and non virtual.\n\nThe new function is virtual function.(virtual because of unit tests) and protected. Base classes call it when there is an UE.\nOn 2012/03/01 21:11:07, akalin wrote:\n> How about just have a single pure virtual method called\n> ReportAndHandleUnrecoverableError().  Also update the comment.\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/data_type_manager_impl.cc\nFile chrome/browser/sync/glue/data_type_manager_impl.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/data_type_manager_impl.cc#newcode309\nchrome/browser/sync/glue/data_type_manager_impl.cc:309: ChromeReportUnrecoverableError();\nOn 2012/03/01 21:11:07, akalin wrote:\n> maybe make this the first thing in the block\n\nDone.\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/23001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode221\nchrome/browser/sync/glue/frontend_data_type_controller.cc:221: AssociatorInterface* FrontendDataTypeController::model_associator() const {\nOn 2012/03/01 21:11:07, akalin wrote:\n> it looks like your checkout is outdated?  There should be a\n> 'RecordUnrecoverableError' implementation here\n\nDone.","disapproval":false,"date":"2012-03-03 00:20:47.096449","approval":false},{"sender":"akalin@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"few more comments\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.cc\nFile chrome/browser/sync/glue/data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.cc#newcode22\nchrome/browser/sync/glue/data_type_controller.cc:22: UMA_HISTOGRAM_ENUMERATION(\"Sync.DataTypeRunFailures\", type(),\ni think you can just inline this into HandleUnrecoverableErrorReporting, removing the need for this extra function\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.h\nFile chrome/browser/sync/glue/data_type_controller.h (left):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.h#oldcode96\nchrome/browser/sync/glue/data_type_controller.h:96: virtual void OnSingleDatatypeUnrecoverableError(\nactually, remove this method since it's redundant (it comes from DataTypeErrorHandler)\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.h\nFile chrome/browser/sync/glue/data_type_controller.h (right):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.h#newcode103\nchrome/browser/sync/glue/data_type_controller.h:103: virtual void HandleUnrecoverableErrorReporting(\nwhat about just naming this \"RecordUnrecoverableError()\" (see comment in .cc file about inlining contents of RecordUnrecoverableError).\n\nMention that this is virtual for testing.\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode126\nchrome/browser/sync/glue/frontend_data_type_controller.cc:126: if (result == ASSOCIATION_FAILED || result == UNRECOVERABLE_ERROR)\nwhy don't we call RecordUnrecoverableError here?  We do so for the non-frontend DTC.  If there's a reason, please add a comment.\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode126\nchrome/browser/sync/glue/frontend_data_type_controller.cc:126: if (result == ASSOCIATION_FAILED || result == UNRECOVERABLE_ERROR)\ncan you add some static method in DTC that returns whether the given StartResult is an unrecoverable error?  so you can go:\n\nif (IsUnrecoverableResult(result)) {\n  ...\n}\n\n(or whatever the name is)\n\nI notice this logic is repeated in a few places, so it would be good to consolidate it.\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/non_frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/non_frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/non_frontend_data_type_controller.cc#newcode134\nchrome/browser/sync/glue/non_frontend_data_type_controller.cc:134: // is not caused by some user action(like aborting, needing crypto etc).\nspace before '(', comma after 'crypto', 'etc' -> 'etc.'\n\nProbably want the same comment for frontend DTC.\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/non_frontend_data_type_controller_unittest.cc\nFile chrome/browser/sync/glue/non_frontend_data_type_controller_unittest.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/non_frontend_data_type_controller_unittest.cc#newcode165\nchrome/browser/sync/glue/non_frontend_data_type_controller_unittest.cc:165: if (result == DataTypeController:: UNRECOVERABLE_ERROR ||\nremove extra space after ::","disapproval":false,"date":"2012-03-03 01:37:36.605414","approval":false},{"sender":"lipalani@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"PTAL.\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.cc\nFile chrome/browser/sync/glue/data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.cc#newcode22\nchrome/browser/sync/glue/data_type_controller.cc:22: UMA_HISTOGRAM_ENUMERATION(\"Sync.DataTypeRunFailures\", type(),\nFWIW I wanted to name the new function RecordUnrecoverableError and get rid of this function. But I remember hearing some mention about making this function report 'more' to UMA statistics like the type of failure etc(by hard coding the strings). Thats why did not touch this. But looking at the code there is no todos in place and I personally think breakpad would be of more use. So implemented your suggestion and got rid of the method.\nOn 2012/03/03 01:37:36, akalin wrote:\n> i think you can just inline this into HandleUnrecoverableErrorReporting,\n> removing the need for this extra function\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.h\nFile chrome/browser/sync/glue/data_type_controller.h (left):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.h#oldcode96\nchrome/browser/sync/glue/data_type_controller.h:96: virtual void OnSingleDatatypeUnrecoverableError(\nOn 2012/03/03 01:37:36, akalin wrote:\n> actually, remove this method since it's redundant (it comes from\n> DataTypeErrorHandler)\n\nDone.\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.h\nFile chrome/browser/sync/glue/data_type_controller.h (right):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/data_type_controller.h#newcode103\nchrome/browser/sync/glue/data_type_controller.h:103: virtual void HandleUnrecoverableErrorReporting(\nOn 2012/03/03 01:37:36, akalin wrote:\n> what about just naming this \"RecordUnrecoverableError()\" (see comment in .cc\n> file about inlining contents of RecordUnrecoverableError).\n> \n> Mention that this is virtual for testing.\n\nDone.\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode126\nchrome/browser/sync/glue/frontend_data_type_controller.cc:126: if (result == ASSOCIATION_FAILED || result == UNRECOVERABLE_ERROR)\nOn 2012/03/03 01:37:36, akalin wrote:\n> why don't we call RecordUnrecoverableError here?  We do so for the non-frontend\n> DTC.  If there's a reason, please add a comment.\n\nDone.\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode126\nchrome/browser/sync/glue/frontend_data_type_controller.cc:126: if (result == ASSOCIATION_FAILED || result == UNRECOVERABLE_ERROR)\nOn 2012/03/03 01:37:36, akalin wrote:\n> why don't we call RecordUnrecoverableError here?  We do so for the non-frontend\n> DTC.  If there's a reason, please add a comment.\n\nDone.\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/non_frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/non_frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/non_frontend_data_type_controller.cc#newcode134\nchrome/browser/sync/glue/non_frontend_data_type_controller.cc:134: // is not caused by some user action(like aborting, needing crypto etc).\nOn 2012/03/03 01:37:36, akalin wrote:\n> space before '(', comma after 'crypto', 'etc' -> 'etc.'\n> \n> Probably want the same comment for frontend DTC.\n\nDone.\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/non_frontend_data_type_controller_unittest.cc\nFile chrome/browser/sync/glue/non_frontend_data_type_controller_unittest.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/34001/chrome/browser/sync/glue/non_frontend_data_type_controller_unittest.cc#newcode165\nchrome/browser/sync/glue/non_frontend_data_type_controller_unittest.cc:165: if (result == DataTypeController:: UNRECOVERABLE_ERROR ||\nOn 2012/03/03 01:37:36, akalin wrote:\n> remove extra space after ::\n\nDone.","disapproval":false,"date":"2012-03-05 20:18:35.340595","approval":false},{"sender":"akalin@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"LGTM after nits\n\nhttp://codereview.chromium.org/9428054/diff/43002/chrome/browser/sync/glue/data_type_controller.cc\nFile chrome/browser/sync/glue/data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/43002/chrome/browser/sync/glue/data_type_controller.cc#newcode25\nchrome/browser/sync/glue/data_type_controller.cc:25: return (result == ASSOCIATION_FAILED || result == UNRECOVERABLE_ERROR);\nPut this above RecordUnrecoverableError\n\nhttp://codereview.chromium.org/9428054/diff/43002/chrome/browser/sync/glue/data_type_controller.h\nFile chrome/browser/sync/glue/data_type_controller.h (right):\n\nhttp://codereview.chromium.org/9428054/diff/43002/chrome/browser/sync/glue/data_type_controller.h#newcode68\nchrome/browser/sync/glue/data_type_controller.h:68: // Public so unit tests can use this function as well.\nAdd a comment above your current one like:\n\n// Returns true if this StartResult should trigger an unrecoverable error.\n\nhttp://codereview.chromium.org/9428054/diff/43002/chrome/browser/sync/glue/data_type_controller.h#newcode102\nchrome/browser/sync/glue/data_type_controller.h:102: // virtual for testing purpose.\nvirtual -> Virtual\npurpose -> purposes\n\nhttp://codereview.chromium.org/9428054/diff/43002/chrome/browser/sync/glue/frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/43002/chrome/browser/sync/glue/frontend_data_type_controller.cc#newcode126\nchrome/browser/sync/glue/frontend_data_type_controller.cc:126: // Report the error. But first check the error is fatal and\nI don't think this comment is needed anymore (since the names are self-explanatory)\n\nhttp://codereview.chromium.org/9428054/diff/43002/chrome/browser/sync/glue/non_frontend_data_type_controller.cc\nFile chrome/browser/sync/glue/non_frontend_data_type_controller.cc (right):\n\nhttp://codereview.chromium.org/9428054/diff/43002/chrome/browser/sync/glue/non_frontend_data_type_controller.cc#newcode133\nchrome/browser/sync/glue/non_frontend_data_type_controller.cc:133: // Report the error. But first check the error is fatal and\nthis comment seems unneeded, now that the functions pretty much say what's going on","disapproval":false,"date":"2012-03-06 02:23:12.797131","approval":true},{"sender":"commit-bot@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/lipalani@chromium.org/9428054/49001","disapproval":false,"date":"2012-03-06 19:04:21.458787","approval":false},{"sender":"akalin@chromium.org","recipients":["reply@chromiumcodereview.appspotmail.com"],"text":"Might wanna wait for 9395058 (zea's SyncableServiceAdapter patch)\n\nOn Tue, Mar 6, 2012 at 11:04 AM, <commit-bot@chromium.org> wrote:\n\n> CQ is trying da patch. Follow status at\n> https://chromium-status.**appspot.com/cq/lipalani@**\n> chromium.org/9428054/49001<https://chromium-status.appspot.com/cq/lipalani@chromium.org/9428054/49001>\n>\n>\n> http://codereview.chromium.**org/9428054/<http://codereview.chromium.org/9428054/>\n>\n","disapproval":false,"date":"2012-03-06 19:15:10.307912","approval":false},{"sender":"commit-bot@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","akalin@chromium.org","tim@chromium.org"],"text":"Change committed as 125220","disapproval":false,"date":"2012-03-06 21:01:06.948393","approval":false},{"sender":"akalin@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","tim@chromium.org"],"text":"On 2012/03/06 19:15:10, akalin wrote:\n> Might wanna wait for 9395058 (zea's SyncableServiceAdapter patch)\n\nYeap, looks like you missed the UIDataTypeController added by his patch.","disapproval":false,"date":"2012-03-06 21:11:26.329933","approval":false},{"sender":"commit-bot@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","tim@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/lipalani@chromium.org/9428054/57001","disapproval":false,"date":"2012-03-09 20:12:48.220505","approval":false},{"sender":"commit-bot@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","tim@chromium.org"],"text":"Try job failure for 9428054-57001 (retry) on win_rel for step \"ui_tests\".\nIt's a second try, previously, step \"ui_tests\" failed.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=8137","disapproval":false,"date":"2012-03-10 00:13:24.688957","approval":false},{"sender":"commit-bot@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","tim@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/lipalani@chromium.org/9428054/57001","disapproval":false,"date":"2012-03-12 03:46:02.228444","approval":false},{"sender":"commit-bot@chromium.org","recipients":["lipalani@chromium.org","tim@chromium.org","zea@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","rsimha@chromium.org","nick@chromium.org","tim@chromium.org"],"text":"Change committed as 126102","disapproval":false,"date":"2012-03-12 06:32:27.741624","approval":false}],"owner_email":"lipalani@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"lipalani1","subject":"Upload more instances of unrecoverable error to breakpad.","created":"2012-02-22 22:02:44.578450","patchsets":[1,1003,4,14001,23001,28001,31001,30006,34001,40001,42001,43002,49001,55001,57001],"modified":"2012-03-12 06:32:27.741624","closed":true,"commit":false,"issue":9428054}