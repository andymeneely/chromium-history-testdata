{"description":"Provide minimal load timing info for GCF jobs.\n\nThis change introduces a GetLoadTimingInfo implementation for GCF's\nURLRequestAutomationJob. The goal is not to provide meaningful load\ntiming, but rather to satisfy the URLRequestJob's contract. This\nimplemntation provides reasonable send_start and receive_headers_end\ntimes from the standpoint of the job: these are the times that the\nrequest is sent to IE's network stack and the time the headers are\nreturned. It also populates send_end with the same time as\nreceive_headers_end. This is the best we can do without changing the\ninterface for the automation channel.\n\nBUG=265842\nTEST=visit http://www.yahoo.com/ on XP/IE6 and hope for no Aw Snap!\nR=robertshield@chromium.org, simonjam@chromium.org\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=215232","cc":["chromium-reviews@chromium.org","robertshield@chromium.org"],"reviewers":["robertshield@chromium.org","simonjam@chromium.org","jam@chromium.org"],"messages":[{"sender":"grt@chromium.org","recipients":["grt@chromium.org","robertshield@chromium.org","simonjam@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org"],"text":"I decided to take a stab at making GCF provide some load timing info. James: does this look sufficient to avoid ASSERTs and such in blink? I'll try this on an XP VM tomorrow to see if it actually works.","disapproval":false,"date":"2013-08-01 02:17:21.076850","approval":false},{"sender":"grt@chromium.org","recipients":["grt@chromium.org","robertshield@chromium.org","simonjam@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org"],"text":"I've verified manually that this change allows GCF on XP/IE6 to browse yahoo.com. Please review, as this fixes a dev blocker. Thanks","disapproval":false,"date":"2013-08-01 17:03:52.081420","approval":false},{"sender":"robertshield@chromium.org","recipients":["grt@chromium.org","robertshield@chromium.org","simonjam@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org"],"text":"https://codereview.chromium.org/21435003/diff/1/chrome/browser/automation/url_request_automation_job.cc\nFile chrome/browser/automation/url_request_automation_job.cc (right):\n\nhttps://codereview.chromium.org/21435003/diff/1/chrome/browser/automation/url_request_automation_job.cc#newcode265\nchrome/browser/automation/url_request_automation_job.cc:265: if (!receive_headers_end_.is_null()) {\nif this is null, do we still tickle the crash, or should this never be called before receive_headers_end_ gets a value?","disapproval":false,"date":"2013-08-01 17:06:47.676850","approval":false},{"sender":"grt@chromium.org","recipients":["grt@chromium.org","robertshield@chromium.org","simonjam@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org"],"text":"https://codereview.chromium.org/21435003/diff/1/chrome/browser/automation/url_request_automation_job.cc\nFile chrome/browser/automation/url_request_automation_job.cc (right):\n\nhttps://codereview.chromium.org/21435003/diff/1/chrome/browser/automation/url_request_automation_job.cc#newcode265\nchrome/browser/automation/url_request_automation_job.cc:265: if (!receive_headers_end_.is_null()) {\nOn 2013/08/01 17:06:47, robertshield wrote:\n> if this is null, do we still tickle the crash, or should this never be called\n> before receive_headers_end_ gets a value?\n\nI'm following the patter in other URLRequestJob implementations here. I believe it's unexpected for the timing info to be retrieved when headers were never received for some reason (e.g., errors). See, for example, URLRequestHttpJob::GetLoadTimingInfo. I don't believe we'll tickle a crash in that case. James: what do you say?","disapproval":false,"date":"2013-08-01 17:11:08.967520","approval":false},{"sender":"simonjam@chromium.org","recipients":["grt@chromium.org","robertshield@chromium.org","simonjam@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org"],"text":"lgtm\n\nhttps://codereview.chromium.org/21435003/diff/1/chrome/browser/automation/url_request_automation_job.cc\nFile chrome/browser/automation/url_request_automation_job.cc (right):\n\nhttps://codereview.chromium.org/21435003/diff/1/chrome/browser/automation/url_request_automation_job.cc#newcode265\nchrome/browser/automation/url_request_automation_job.cc:265: if (!receive_headers_end_.is_null()) {\nOn 2013/08/01 17:06:47, robertshield wrote:\n> if this is null, do we still tickle the crash, or should this never be called\n> before receive_headers_end_ gets a value?\n\nI don't think we'll ever ask for it before then. We pass it down to Blink when we finish receiving the headers.","disapproval":false,"date":"2013-08-01 17:15:45.814470","approval":true},{"sender":"grt@chromium.org","recipients":["grt@chromium.org","robertshield@chromium.org","simonjam@chromium.org","jam@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org"],"text":"+jam for OWNERS stamp","disapproval":false,"date":"2013-08-01 17:17:07.058590","approval":false},{"sender":"robertshield@chromium.org","recipients":["grt@chromium.org","robertshield@chromium.org","simonjam@chromium.org","jam@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org"],"text":"LGTM","disapproval":false,"date":"2013-08-01 17:20:43.061240","approval":true},{"sender":"jam@chromium.org","recipients":["grt@chromium.org","robertshield@chromium.org","simonjam@chromium.org","jam@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org"],"text":"lgtm","disapproval":false,"date":"2013-08-01 22:18:45.861220","approval":true},{"sender":"commit-bot@chromium.org","recipients":["grt@chromium.org","robertshield@chromium.org","simonjam@chromium.org","jam@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/grt@chromium.org/21435003/1","disapproval":false,"date":"2013-08-01 22:51:11.378890","approval":false},{"sender":"commit-bot@chromium.org","recipients":["grt@chromium.org","robertshield@chromium.org","simonjam@chromium.org","jam@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org"],"text":"Change committed as 215232","disapproval":false,"date":"2013-08-02 05:13:18.498570","approval":false}],"owner_email":"grt@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"grt","subject":"Provide minimal load timing info for GCF jobs.","created":"2013-08-01 02:15:03.539040","patchsets":[1],"modified":"2013-08-02 05:13:18.682060","closed":true,"commit":false,"issue":21435003}