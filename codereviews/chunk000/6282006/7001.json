{"files":{"remoting/host/screen_recorder.cc":{"status":"M","num_chunks":11,"no_base_file":false,"property_changes":"","num_added":87,"num_removed":17,"messages":[{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"Call DoCompleteStop()?","draft":false,"lineno":152,"date":"2011-01-20 19:14:17.844440","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"I think we should just remove support for parallel connections","draft":false,"lineno":270,"date":"2011-01-20 19:14:17.844587","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"Do we really need network_stopped_? It should be safe to post DoFinishOneRecording task on capture_loop_, it doesn't do anything when started_ == false. If you remove network_stopped_, then we also don't need DoStopOnNetworkThread, and the whole shutdown process becomes much simpler.\n\nIs the problem that capture_loop_ may not exist at this point? Maybe we should use MessageLoopProxy instead of MessageLoop?","draft":false,"lineno":283,"date":"2011-01-20 19:14:17.844751","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"Invalidate","draft":false,"lineno":348,"date":"2011-01-20 19:14:17.844886","left":false},{"author":"Alpha","author_email":"hclam@chromium.org","text":"On 2011/01/20 19:14:17, sergeyu wrote:\n> I think we should just remove support for parallel connections\n\nI'd leave the decision later, not really related to this patch.","draft":false,"lineno":270,"date":"2011-01-20 19:24:18.300984","left":false},{"author":"Alpha","author_email":"hclam@chromium.org","text":"On 2011/01/20 19:14:17, sergeyu wrote:\n> Do we really need network_stopped_? It should be safe to post\n> DoFinishOneRecording task on capture_loop_, it doesn't do anything when started_\n> == false. If you remove network_stopped_, then we also don't need\n> DoStopOnNetworkThread, and the whole shutdown process becomes much simpler.\n> \n> Is the problem that capture_loop_ may not exist at this point? Maybe we should\n> use MessageLoopProxy instead of MessageLoop?\n\nThe problem that needs network_stopped_ here is that when we are shutting down capture loop, network loop can receive a callback and needs to post back to the capture loop and that causes race conditions in MessageLoop code.\n\nI think we've gone through this argument before, the reason that we're not using MessageLoopProxy was because we thought we can order destruction nicely and doesn't need refcounting. Since we made that decision in the first place we should try to make it happen.","draft":false,"lineno":283,"date":"2011-01-20 19:24:18.301211","left":false},{"author":"Alpha","author_email":"hclam@chromium.org","text":"On 2011/01/20 19:14:17, sergeyu wrote:\n> Call DoCompleteStop()?\n\nDone.","draft":false,"lineno":152,"date":"2011-01-20 19:32:08.332377","left":false}],"id":8002,"is_binary":false},"remoting/host/screen_recorder.h":{"status":"M","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":8,"messages":[{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"I think we should call it |done_task|, or |done|, or |stop_done|. |task| is not very meaningful.","draft":false,"lineno":81,"date":"2011-01-20 19:14:17.845013","left":false},{"author":"Alpha","author_email":"hclam@chromium.org","text":"On 2011/01/20 19:14:17, sergeyu wrote:\n> I think we should call it |done_task|, or |done|, or |stop_done|. |task| is not\n> very meaningful.\n\nDone.","draft":false,"lineno":81,"date":"2011-01-20 19:32:08.332602","left":false}],"id":8003,"is_binary":false},"remoting/host/screen_recorder_unittest.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":94,"num_removed":29,"messages":[],"id":8004,"is_binary":false},"remoting/host/chromoting_host.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":5,"messages":[],"id":8001,"is_binary":false},"remoting/protocol/buffered_socket_writer.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":26,"messages":[{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"Remove extra spaces","draft":false,"lineno":73,"date":"2011-01-20 19:14:17.845141","left":false},{"author":"Alpha","author_email":"hclam@chromium.org","text":"On 2011/01/20 19:14:17, sergeyu wrote:\n> Remove extra spaces\n\nweird... done.","draft":false,"lineno":73,"date":"2011-01-20 19:32:08.332851","left":false}],"id":8005,"is_binary":false},"remoting/protocol/buffered_socket_writer.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":0,"num_removed":1,"messages":[{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"Why do you need to remove this?","draft":false,"lineno":93,"date":"2011-01-20 19:14:17.845268","left":true},{"author":"Alpha","author_email":"hclam@chromium.org","text":"On 2011/01/20 19:14:17, sergeyu wrote:\n> Why do you need to remove this?\n\nGoing through I found this is not used at all so I cleaned it up at the same time.","draft":false,"lineno":93,"date":"2011-01-20 19:24:18.301353","left":true}],"id":8006,"is_binary":false}},"owner_email":"hclam@chromium.org","owner":"Alpha","message":"ready now","try_job_results":[],"created":"2011-01-19 23:46:58.330653","url":null,"num_comments":13,"modified":"2011-01-20 19:32:08.389315","patchset":7001,"issue":6282006}