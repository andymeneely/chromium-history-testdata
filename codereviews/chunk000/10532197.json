{"description":"ChromeOS: Initial NTP shows Chrome OS getting started page thumbnail instead of Chrome CSG\r\n\r\nThis CL shows Chrome OS CSG page instead of Chrome CSG on initial NTP. In addition, if we can get true CSG page URL from sign_in_controller, uses it as URL. Otherwise, use default URL.\r\n\r\nBUG=126334\r\nTEST=manual\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=143929","cc":["chromium-reviews@chromium.org","finnur+watch@chromium.org","nkostylev+watch@chromium.org","kkania@chromium.org","robertshield@chromium.org","davemoore+watch@chromium.org","oshima+watch@chromium.org","brettw-cc@chromium.org","stevenjb+watch@chromium.org","jshin+watch@chromium.org","mazda@chromium.org"],"reviewers":["sky@chromium.org","avayvod@chromium.org","estade@chromium.org"],"messages":[{"sender":"yoshiki@chromium.org","recipients":["yoshiki@chromium.org","sky@chromium.org","avayvod@chromium.org","chromium-reviews@chromium.org","finnur+watch@chromium.org","nkostylev+watch@chromium.org","kkania@chromium.org","robertshield@chromium.org","davemoore+watch@chromium.org","oshima+watch@chromium.org","brettw-cc@chromium.org","stevenjb+watch@chromium.org","jshin+watch@chromium.org","mazda@chromium.org"],"text":"Could you take a look?\n\nsky: chrome/browser/history/*\navayvod: chrome/browser/chromeos/login/*","disapproval":false,"date":"2012-06-18 19:01:27.462483","approval":false},{"sender":"avayvod@chromium.org","recipients":["yoshiki@chromium.org","sky@chromium.org","avayvod@chromium.org","chromium-reviews@chromium.org","finnur+watch@chromium.org","nkostylev+watch@chromium.org","kkania@chromium.org","robertshield@chromium.org","davemoore+watch@chromium.org","oshima+watch@chromium.org","brettw-cc@chromium.org","stevenjb+watch@chromium.org","jshin+watch@chromium.org","mazda@chromium.org"],"text":"http://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.cc\nFile chrome/browser/history/top_sites.cc (right):\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.cc#newcode181\nchrome/browser/history/top_sites.cc:181: host->sign_in_controller()->GetGettingStartedGuideURL();\nPerhaps, you want to add GetGettingStartedGuideURL to BaseLoginDisplayHost interface without exposing sign_in_controller to this class.\nWould be even better to add the method to LoginDisplayHost and avoid static_cast here, though I suspect the login views hierarchy is deprecated now.\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.cc#newcode186\nchrome/browser/history/top_sites.cc:186: #if defined(OS_CHROMEOS)\nYou could probably move all this #ifdef logic to a separate method like bool MaybeOverrideUrl(url_id, &prepopulate_page_urls_) which would return false for other platforms and on Chrome OS it would get default host, then URL and add it to the list, returning true, or something similar.\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.cc#newcode290\nchrome/browser/history/top_sites.cc:290: if (url.spec() == prepopulated_page_urls_[i]) {\nYou should modify top_sites_unittest to cover your change I think.","disapproval":false,"date":"2012-06-18 19:21:03.554032","approval":false},{"sender":"avayvod@chromium.org","recipients":["yoshiki@chromium.org","sky@chromium.org","avayvod@chromium.org","chromium-reviews@chromium.org","finnur+watch@chromium.org","nkostylev+watch@chromium.org","kkania@chromium.org","robertshield@chromium.org","davemoore+watch@chromium.org","oshima+watch@chromium.org","brettw-cc@chromium.org","stevenjb+watch@chromium.org","jshin+watch@chromium.org","mazda@chromium.org"],"text":"I'd also suggest to submit the resources separately as bots seem to not be able to find the image they need to compile.","disapproval":false,"date":"2012-06-18 19:37:45.461003","approval":false},{"sender":"estade@chromium.org","recipients":["yoshiki@chromium.org","sky@chromium.org","avayvod@chromium.org","estade@chromium.org","chromium-reviews@chromium.org","finnur+watch@chromium.org","nkostylev+watch@chromium.org","kkania@chromium.org","robertshield@chromium.org","davemoore+watch@chromium.org","oshima+watch@chromium.org","brettw-cc@chromium.org","stevenjb+watch@chromium.org","jshin+watch@chromium.org","mazda@chromium.org"],"text":"can you upload the new screenshot somewhere so I can see it?\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.h\nFile chrome/browser/history/top_sites.h (right):\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.h#newcode363\nchrome/browser/history/top_sites.h:363: std::vector<std::string> prepopulated_page_urls_;\nshould be GURL","disapproval":false,"date":"2012-06-18 20:24:05.871325","approval":false},{"sender":"sky@chromium.org","recipients":["yoshiki@chromium.org","sky@chromium.org","avayvod@chromium.org","estade@chromium.org","chromium-reviews@chromium.org","finnur+watch@chromium.org","nkostylev+watch@chromium.org","kkania@chromium.org","robertshield@chromium.org","davemoore+watch@chromium.org","oshima+watch@chromium.org","brettw-cc@chromium.org","stevenjb+watch@chromium.org","jshin+watch@chromium.org","mazda@chromium.org"],"text":"http://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.cc\nFile chrome/browser/history/top_sites.cc (right):\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.cc#newcode178\nchrome/browser/history/top_sites.cc:178: chromeos::BaseLoginDisplayHost::default_host());\nI don't like having to cast here.","disapproval":false,"date":"2012-06-18 21:28:43.740374","approval":false},{"sender":"yoshiki@chromium.org","recipients":["yoshiki@chromium.org","sky@chromium.org","avayvod@chromium.org","estade@chromium.org","chromium-reviews@chromium.org","finnur+watch@chromium.org","nkostylev+watch@chromium.org","kkania@chromium.org","robertshield@chromium.org","davemoore+watch@chromium.org","oshima+watch@chromium.org","brettw-cc@chromium.org","stevenjb+watch@chromium.org","jshin+watch@chromium.org","mazda@chromium.org"],"text":"PTAL?\n\nestade: I attached a screenshot at crbug.com/126334#c5.\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.cc\nFile chrome/browser/history/top_sites.cc (right):\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.cc#newcode178\nchrome/browser/history/top_sites.cc:178: chromeos::BaseLoginDisplayHost::default_host());\nDone. I removed the cast.\n\nOn 2012/06/18 21:28:43, sky wrote:\n> I don't like having to cast here.\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.cc#newcode181\nchrome/browser/history/top_sites.cc:181: host->sign_in_controller()->GetGettingStartedGuideURL();\nOn 2012/06/18 19:21:03, whywhat wrote:\n> Perhaps, you want to add GetGettingStartedGuideURL to BaseLoginDisplayHost\n> interface without exposing sign_in_controller to this class.\n> Would be even better to add the method to LoginDisplayHost and avoid static_cast\n> here, though I suspect the login views hierarchy is deprecated now.\n\nDone.\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.cc#newcode186\nchrome/browser/history/top_sites.cc:186: #if defined(OS_CHROMEOS)\nOn 2012/06/18 19:21:03, whywhat wrote:\n> You could probably move all this #ifdef logic to a separate method like bool\n> MaybeOverrideUrl(url_id, &prepopulate_page_urls_) which would return false for\n> other platforms and on Chrome OS it would get default host, then URL and add it\n> to the list, returning true, or something similar. \n\nDone.\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.cc#newcode290\nchrome/browser/history/top_sites.cc:290: if (url.spec() == prepopulated_page_urls_[i]) {\nOn 2012/06/18 19:21:03, whywhat wrote:\n> You should modify top_sites_unittest to cover your change I think.\n\nDone.\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.h\nFile chrome/browser/history/top_sites.h (right):\n\nhttp://codereview.chromium.org/10532197/diff/1/chrome/browser/history/top_sites.h#newcode363\nchrome/browser/history/top_sites.h:363: std::vector<std::string> prepopulated_page_urls_;\nOn 2012/06/18 20:24:06, Evan Stade wrote:\n> should be GURL\n\nDone.","disapproval":false,"date":"2012-06-22 14:41:04.226885","approval":false},{"sender":"sky@chromium.org","recipients":["yoshiki@chromium.org","sky@chromium.org","avayvod@chromium.org","estade@chromium.org","chromium-reviews@chromium.org","finnur+watch@chromium.org","nkostylev+watch@chromium.org","kkania@chromium.org","robertshield@chromium.org","davemoore+watch@chromium.org","oshima+watch@chromium.org","brettw-cc@chromium.org","stevenjb+watch@chromium.org","jshin+watch@chromium.org","mazda@chromium.org"],"text":"LGTM\n\nhttp://codereview.chromium.org/10532197/diff/10001/chrome/browser/history/top_sites.cc\nFile chrome/browser/history/top_sites.cc (right):\n\nhttp://codereview.chromium.org/10532197/diff/10001/chrome/browser/history/top_sites.cc#newcode150\nchrome/browser/history/top_sites.cc:150: bool MaybeOverrideUrl(int url_id, std::vector<GURL>* prepopulated_page_urls) {\nAdd a description.","disapproval":false,"date":"2012-06-22 16:38:41.437598","approval":true},{"sender":"estade@chromium.org","recipients":["yoshiki@chromium.org","sky@chromium.org","avayvod@chromium.org","estade@chromium.org","chromium-reviews@chromium.org","finnur+watch@chromium.org","nkostylev+watch@chromium.org","kkania@chromium.org","robertshield@chromium.org","davemoore+watch@chromium.org","oshima+watch@chromium.org","brettw-cc@chromium.org","stevenjb+watch@chromium.org","jshin+watch@chromium.org","mazda@chromium.org"],"text":"lgtm","disapproval":false,"date":"2012-06-22 20:55:20.625850","approval":true},{"sender":"avayvod@chromium.org","recipients":["yoshiki@chromium.org","sky@chromium.org","avayvod@chromium.org","estade@chromium.org","chromium-reviews@chromium.org","finnur+watch@chromium.org","nkostylev+watch@chromium.org","kkania@chromium.org","robertshield@chromium.org","davemoore+watch@chromium.org","oshima+watch@chromium.org","brettw-cc@chromium.org","stevenjb+watch@chromium.org","jshin+watch@chromium.org","mazda@chromium.org"],"text":"don't you want to cover your change about page overriding by unit test?\n\nhttp://codereview.chromium.org/10532197/diff/17001/chrome/browser/history/top_sites.cc\nFile chrome/browser/history/top_sites.cc (right):\n\nhttp://codereview.chromium.org/10532197/diff/17001/chrome/browser/history/top_sites.cc#newcode200\nchrome/browser/history/top_sites.cc:200: \nRemove the blank line, please.","disapproval":false,"date":"2012-06-22 23:28:56.438587","approval":false},{"sender":"avayvod@chromium.org","recipients":["yoshiki@chromium.org","sky@chromium.org","avayvod@chromium.org","estade@chromium.org","chromium-reviews@chromium.org","finnur+watch@chromium.org","nkostylev+watch@chromium.org","kkania@chromium.org","robertshield@chromium.org","davemoore+watch@chromium.org","oshima+watch@chromium.org","brettw-cc@chromium.org","stevenjb+watch@chromium.org","jshin+watch@chromium.org","mazda@chromium.org"],"text":"lgtm","disapproval":false,"date":"2012-06-22 23:29:06.010585","approval":true}],"owner_email":"yoshiki@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"yoshiki","subject":"ChromeOS: Initial NTP shows Chrome OS getting started page instead of Chrome CSG","created":"2012-06-18 13:42:21.995489","patchsets":[1,10001,17001],"modified":"2012-06-25 17:15:21.854356","closed":true,"commit":false,"issue":10532197}