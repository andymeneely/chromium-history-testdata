{"description":"Use Sync to store application icon positions on NTP.\n\nBegins storing the ordinal values of icons on the NTP to the sync server. This change only adds values to the sync data, the changes are not loaded by the profiles yet.\n\nBUG=61447\nTEST=Extension and Apps should still sync without problems. There should be no change in the user experience.\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=115140","cc":["chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"reviewers":["stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org"],"messages":[{"sender":"csharp@google.com","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@gmail.com","csharp@google.com","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"There are currently no tests in this CL because I was unsure what tests would be needed. What tests are req","disapproval":false,"date":"2011-10-03 21:27:45.600095","approval":false},{"sender":"csharp@google.com","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","csharp@google.com","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"There are currently no tests in this CL because I was unsure what tests would be needed. What tests are required for this code?\n\nAlso, this doesn't work 100%, because the chrome app store icon isn't sync (because it is a component) so its position will not be updated. I will be looking into getting the chrome store icon to sync in a separate cl.","disapproval":false,"date":"2011-10-03 21:29:39.636559","approval":false},{"sender":"akalin@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","csharp@google.com","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"http://codereview.chromium.org/8114013/diff/1/chrome/browser/sync/protocol/app_specifics.proto\nFile chrome/browser/sync/protocol/app_specifics.proto (right):\n\nhttp://codereview.chromium.org/8114013/diff/1/chrome/browser/sync/protocol/app_specifics.proto#newcode29\nchrome/browser/sync/protocol/app_specifics.proto:29: optional int32 app_launch_index = 2;\nThese need to be strings.  You weren't on the earlier thread when we discussed it, but here's what I said:\n\nI talked about this briefly with Ben when I was in MTV last week.\nBasically, the \"sync-team recommended\" way to sync app order would be\nto add a string field to the app specifics proto representing the\norder, as well as some special logic to make sure that only O(1) app\nsync datas are modified whenever an app is moved, deleted, etc.\n\nAside from the code change itself, there may be bugs arising from a few sources:\n- Older clients should preserve this order field, even though it may\nnot recognize/respect it.\n- Newer clients would need to deal with data from older clients not\nhaving this field.\n- Some extensions/apps are not synced, so their ordering would have to\nfigured out.\n\n....\n\nThere's no need to involve floating point in this.  Just use\nlexicographic ordering of strings, appending a new digit to the string\nwhen necessary, and you're good.  The disadvantage is unbounded growth\nover time, but that seems like a pathological case, and can be\nmitigated by 'resetting' the strings.","disapproval":false,"date":"2011-10-03 21:35:09.617055","approval":false},{"sender":"akalin@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","csharp@google.com","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"On 2011/10/03 21:29:39, csharp1 wrote:\n> There are currently no tests in this CL because I was unsure what tests would be\n> needed. What tests are required for this code?\n\nUnit tests for the methods you add to ExtensionService would be nice, at a minimum.  In a future CL, you can also add integration tests (see chrome/browser/sync/test/integration/*{extensions,apps}_sync_test.*).","disapproval":false,"date":"2011-10-03 21:36:17.980822","approval":false},{"sender":"csharp@google.com","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","csharp@google.com","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"Ok, I will modify the app_launcher_index value to be a string. I don't think page_index needs to be changed from an integer though because the only the icon being moved can have its page index change, all other page indices will stay the same.","disapproval":false,"date":"2011-10-04 14:46:24.584433","approval":false},{"sender":"estade@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","csharp@google.com","estade@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"> being moved can have its page index change, all other page indices will stay the\n> same.\n\nexcept in the eventuality that we make it possible to move pages around","disapproval":false,"date":"2011-10-04 15:32:01.669691","approval":false},{"sender":"akalin@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","csharp@google.com","estade@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"http://codereview.chromium.org/8114013/diff/1/chrome/browser/sync/protocol/app_specifics.proto\nFile chrome/browser/sync/protocol/app_specifics.proto (right):\n\nhttp://codereview.chromium.org/8114013/diff/1/chrome/browser/sync/protocol/app_specifics.proto#newcode29\nchrome/browser/sync/protocol/app_specifics.proto:29: optional int32 app_launch_index = 2;\nPlease provide detailed comments about what exactly the app launch index represents.\n\nhttp://codereview.chromium.org/8114013/diff/1/chrome/browser/sync/protocol/app_specifics.proto#newcode30\nchrome/browser/sync/protocol/app_specifics.proto:30: optional int32 page_index = 3;\nAlso, please provide detailed comments about what the page index is.  I haven't been able to determine whether or not this should be a string, as I don't know what it represents.","disapproval":false,"date":"2011-10-04 21:06:14.939001","approval":false},{"sender":"csharp@google.com","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","csharp@google.com","estade@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"Ok, I updated the comments for app_specifics.proto, hopefully they will be more useful.","disapproval":false,"date":"2011-10-04 21:21:21.350978","approval":false},{"sender":"akalin@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","csharp@google.com","estade@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"http://codereview.chromium.org/8114013/diff/8001/chrome/browser/sync/protocol/app_specifics.proto\nFile chrome/browser/sync/protocol/app_specifics.proto (right):\n\nhttp://codereview.chromium.org/8114013/diff/8001/chrome/browser/sync/protocol/app_specifics.proto#newcode31\nchrome/browser/sync/protocol/app_specifics.proto:31: // This values only provide the order within the application pages, not within\nThe first sentence implies this value means which page the app is on.  The second sentence implies this value means the index on the page that it's on.  I assume it's the former because it makes more sense?\n\nIf Evan is right, and there's a chance that you'll be able to move pages around, it may be better to make this a string.  Although ideally, pages would be their own separate object.","disapproval":false,"date":"2011-10-04 21:26:43.110613","approval":false},{"sender":"csharp@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"akalin, estade, finnur- I'll need approval from each of you before I can submit this\n\nOk, so this CL has changed quite a bit since the last upload. It starts the process of syncing that app position, but it doesn't read the data that it syncs at any point (yet). I decide to limit this change to just storing the sync values because the code to properly load them looks like it might be a fair amount of code (due to collisions that have to be handled have two different apps have the same ordinal value).","disapproval":false,"date":"2011-12-14 18:59:26.537600","approval":false},{"sender":"stevet@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"Sort of a drive by - couple nits and a question.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service_unittest.cc\nFile chrome/browser/extensions/extension_service_unittest.cc (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service_unittest.cc#newcode3927\nchrome/browser/extensions/extension_service_unittest.cc:3927: }\nI'm not familiar with the policy around sync tests for extensions, but eventually (or even here) you might want to test for erroneous states in addition to valid states.\n\nSo for instance, what does the system do if it somehow receives multiple apps with the same ordinal value?\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/sync/protocol/app_specifics.proto\nFile chrome/browser/sync/protocol/app_specifics.proto (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/sync/protocol/app_specifics.proto#newcode54\nchrome/browser/sync/protocol/app_specifics.proto:54: optional string app_launch_ordinal = 3;\nNit: Break here so there is an extra line between these two bits.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/sync/protocol/proto_value_conversions.cc\nFile chrome/browser/sync/protocol/proto_value_conversions.cc (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/sync/protocol/proto_value_conversions.cc#newcode202\nchrome/browser/sync/protocol/proto_value_conversions.cc:202: \nNit: Is there need for a break here?","disapproval":false,"date":"2011-12-14 19:10:34.493358","approval":false},{"sender":"estade@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"lgtm although I guess this is mostly akalin's territory\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.cc\nFile chrome/browser/extensions/extension_service.cc (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.cc#newcode1591\nchrome/browser/extensions/extension_service.cc:1591: if (extension) {\nno curlies\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.cc#newcode1606\nchrome/browser/extensions/extension_service.cc:1606: if (extension) {\nno curlies\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.cc#newcode1620\nchrome/browser/extensions/extension_service.cc:1620: if (extension) {\nno curlies","disapproval":false,"date":"2011-12-15 00:02:28.076445","approval":true},{"sender":"akalin@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"A few comments\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.h\nFile chrome/browser/extensions/extension_service.h (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.h#newcode227\nchrome/browser/extensions/extension_service.h:227: // will trigger a sync if needed.\nSpecify that these return invalid ordinals for non-app extensions. (and setting them for non-app extensions is an error)\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service_unittest.cc\nFile chrome/browser/extensions/extension_service_unittest.cc (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service_unittest.cc#newcode3927\nchrome/browser/extensions/extension_service_unittest.cc:3927: }\nOn 2011/12/14 19:10:34, SteveT wrote:\n> I'm not familiar with the policy around sync tests for extensions, but\n> eventually (or even here) you might want to test for erroneous states in\n> addition to valid states.\n> \n> So for instance, what does the system do if it somehow receives multiple apps\n> with the same ordinal value?\n\nYeah, we eventually want this.  Although it may make more sense to put it along with the code that actually listens for sync changes and sets the order.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h\nFile chrome/browser/extensions/extension_sync_data.h (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode25\nchrome/browser/extensions/extension_sync_data.h:25: class ExtensionSyncData {\nAt some point it would be good to have an AppSyncData that contains an ExtensionSyncData plus the app-specific stuff.  You may want to do this as part of this CL or separately (before landing this one).\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode35\nchrome/browser/extensions/extension_sync_data.h:35: StringOrdinal app_launch_ordinal,\nconst ref\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode36\nchrome/browser/extensions/extension_sync_data.h:36: StringOrdinal page_ordinal);\nconst ref\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode54\nchrome/browser/extensions/extension_sync_data.h:54: StringOrdinal app_launch_ordinal() const { return app_launch_ordinal_; }\nconst ref\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode54\nchrome/browser/extensions/extension_sync_data.h:54: StringOrdinal app_launch_ordinal() const { return app_launch_ordinal_; }\nalso add comments saying that the ordinals aren't necessarily valid\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode55\nchrome/browser/extensions/extension_sync_data.h:55: StringOrdinal page_ordinal() const {return page_ordinal_; }\nconst ref\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data_unittest.cc\nFile chrome/browser/extensions/extension_sync_data_unittest.cc (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data_unittest.cc#newcode142\nchrome/browser/extensions/extension_sync_data_unittest.cc:142: input_specifics->set_page_ordinal(\nadd some tests that exercise invalid ordinals?","disapproval":false,"date":"2011-12-15 01:41:21.361853","approval":false},{"sender":"finnur@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"I don't have much to add beyond what has already been said besides that the CL description needs TEST= filled in and one minor nit below.\n\nLGTM with same caveat as last time: I don't have specific insight into how sync works, but I assume that's not why you asked me to co-review. :)\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service_unittest.cc\nFile chrome/browser/extensions/extension_service_unittest.cc (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service_unittest.cc#newcode3911\nchrome/browser/extensions/extension_service_unittest.cc:3911: }\nno curlies.","disapproval":false,"date":"2011-12-15 13:12:02.305064","approval":true},{"sender":"csharp@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"http://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.cc\nFile chrome/browser/extensions/extension_service.cc (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.cc#newcode1591\nchrome/browser/extensions/extension_service.cc:1591: if (extension) {\nOn 2011/12/15 00:02:28, Evan Stade wrote:\n> no curlies\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.cc#newcode1606\nchrome/browser/extensions/extension_service.cc:1606: if (extension) {\nOn 2011/12/15 00:02:28, Evan Stade wrote:\n> no curlies\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.cc#newcode1620\nchrome/browser/extensions/extension_service.cc:1620: if (extension) {\nOn 2011/12/15 00:02:28, Evan Stade wrote:\n> no curlies\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.h\nFile chrome/browser/extensions/extension_service.h (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service.h#newcode227\nchrome/browser/extensions/extension_service.h:227: // will trigger a sync if needed.\nOn 2011/12/15 01:41:21, akalin wrote:\n> Specify that these return invalid ordinals for non-app extensions. (and setting\n> them for non-app extensions is an error)\n\nDone, and I added a DCHECK to the setters to make sure that the extension is an app.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service_unittest.cc\nFile chrome/browser/extensions/extension_service_unittest.cc (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service_unittest.cc#newcode3911\nchrome/browser/extensions/extension_service_unittest.cc:3911: }\nOn 2011/12/15 13:12:03, Finnur wrote:\n> no curlies.\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_service_unittest.cc#newcode3927\nchrome/browser/extensions/extension_service_unittest.cc:3927: }\nOn 2011/12/15 01:41:21, akalin wrote:\n> On 2011/12/14 19:10:34, SteveT wrote:\n> > I'm not familiar with the policy around sync tests for extensions, but\n> > eventually (or even here) you might want to test for erroneous states in\n> > addition to valid states.\n> > \n> > So for instance, what does the system do if it somehow receives multiple apps\n> > with the same ordinal value?\n> \n> Yeah, we eventually want this.  Although it may make more sense to put it along\n> with the code that actually listens for sync changes and sets the order.\n\nI'll include those tests with the code that sets the order since that problem (multiple apps with the same value) will be the focus of that change.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h\nFile chrome/browser/extensions/extension_sync_data.h (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode25\nchrome/browser/extensions/extension_sync_data.h:25: class ExtensionSyncData {\nOn 2011/12/15 01:41:21, akalin wrote:\n> At some point it would be good to have an AppSyncData that contains an\n> ExtensionSyncData plus the app-specific stuff.  You may want to do this as part\n> of this CL or separately (before landing this one).\n\nI'd rather do this as a follow up cl, I've filed crbug.com/107729 against myself to do it.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode35\nchrome/browser/extensions/extension_sync_data.h:35: StringOrdinal app_launch_ordinal,\nOn 2011/12/15 01:41:21, akalin wrote:\n> const ref\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode36\nchrome/browser/extensions/extension_sync_data.h:36: StringOrdinal page_ordinal);\nOn 2011/12/15 01:41:21, akalin wrote:\n> const ref\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode54\nchrome/browser/extensions/extension_sync_data.h:54: StringOrdinal app_launch_ordinal() const { return app_launch_ordinal_; }\nOn 2011/12/15 01:41:21, akalin wrote:\n> also add comments saying that the ordinals aren't necessarily valid\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode54\nchrome/browser/extensions/extension_sync_data.h:54: StringOrdinal app_launch_ordinal() const { return app_launch_ordinal_; }\nOn 2011/12/15 01:41:21, akalin wrote:\n> const ref\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data.h#newcode55\nchrome/browser/extensions/extension_sync_data.h:55: StringOrdinal page_ordinal() const {return page_ordinal_; }\nOn 2011/12/15 01:41:21, akalin wrote:\n> const ref\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data_unittest.cc\nFile chrome/browser/extensions/extension_sync_data_unittest.cc (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/extensions/extension_sync_data_unittest.cc#newcode142\nchrome/browser/extensions/extension_sync_data_unittest.cc:142: input_specifics->set_page_ordinal(\nOn 2011/12/15 01:41:21, akalin wrote:\n> add some tests that exercise invalid ordinals?\n\nI added a test that has an AppSpecifics instance with invalid ordinals, which did require a small code change to pass.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/sync/protocol/app_specifics.proto\nFile chrome/browser/sync/protocol/app_specifics.proto (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/sync/protocol/app_specifics.proto#newcode54\nchrome/browser/sync/protocol/app_specifics.proto:54: optional string app_launch_ordinal = 3;\nOn 2011/12/14 19:10:34, SteveT wrote:\n> Nit: Break here so there is an extra line between these two bits.\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/sync/protocol/proto_value_conversions.cc\nFile chrome/browser/sync/protocol/proto_value_conversions.cc (right):\n\nhttp://codereview.chromium.org/8114013/diff/19001/chrome/browser/sync/protocol/proto_value_conversions.cc#newcode202\nchrome/browser/sync/protocol/proto_value_conversions.cc:202: \nOn 2011/12/14 19:10:34, SteveT wrote:\n> Nit: Is there need for a break here?\n\nDone, to be more like the rest of the file.","disapproval":false,"date":"2011-12-15 18:50:56.105518","approval":false},{"sender":"stevet@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"lgtm for my drive by","disapproval":false,"date":"2011-12-15 19:06:38.814961","approval":true},{"sender":"akalin@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"LGTM\n\nhttp://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_service.h\nFile chrome/browser/extensions/extension_service.h (right):\n\nhttp://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_service.h#newcode229\nchrome/browser/extensions/extension_service.h:229: // setting them is an error.\nthem -> ordinals for non-apps extensions\n\nhttp://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_service.h#newcode230\nchrome/browser/extensions/extension_service.h:230: virtual StringOrdinal GetAppLaunchOrdinal(const std::string& extension_id)\nany reason why these are virtual?\n\nhttp://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_sync_data.h\nFile chrome/browser/extensions/extension_sync_data.h (left):\n\nhttp://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_sync_data.h#oldcode33\nchrome/browser/extensions/extension_sync_data.h:33: bool notifications_disabled);\nAdd TODO to split this class up into AppSyncData/ExtensionSyncData and reference the bug you filed (thanks for doing that)","disapproval":false,"date":"2011-12-19 20:09:09.412834","approval":true},{"sender":"akalin@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"http://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_service.h\nFile chrome/browser/extensions/extension_service.h (right):\n\nhttp://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_service.h#newcode232\nchrome/browser/extensions/extension_service.h:232: virtual void SetAppLaunchOrdinal(const std::string& extension_id,\nI thought this was for testing, but I didn't see anything that overrode these.  Please remove 'virtual' if that is correct.  If you do need it, add a comment explaining why.","disapproval":false,"date":"2011-12-19 20:10:03.166974","approval":false},{"sender":"csharp@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"http://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_service.h\nFile chrome/browser/extensions/extension_service.h (right):\n\nhttp://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_service.h#newcode229\nchrome/browser/extensions/extension_service.h:229: // setting them is an error.\nOn 2011/12/19 20:09:09, akalin wrote:\n> them -> ordinals for non-apps extensions\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_service.h#newcode232\nchrome/browser/extensions/extension_service.h:232: virtual void SetAppLaunchOrdinal(const std::string& extension_id,\nOn 2011/12/19 20:10:03, akalin wrote:\n> I thought this was for testing, but I didn't see anything that overrode these. \n> Please remove 'virtual' if that is correct.  If you do need it, add a comment\n> explaining why.\n\nDone.\n\nhttp://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_sync_data.h\nFile chrome/browser/extensions/extension_sync_data.h (left):\n\nhttp://codereview.chromium.org/8114013/diff/28002/chrome/browser/extensions/extension_sync_data.h#oldcode33\nchrome/browser/extensions/extension_sync_data.h:33: bool notifications_disabled);\nOn 2011/12/19 20:09:09, akalin wrote:\n> Add TODO to split this class up into AppSyncData/ExtensionSyncData and reference\n> the bug you filed (thanks for doing that)\n\nDone.","disapproval":false,"date":"2011-12-20 15:07:23.447323","approval":false},{"sender":"commit-bot@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/csharp@chromium.org/8114013/41001","disapproval":false,"date":"2011-12-20 15:07:39.204460","approval":false},{"sender":"commit-bot@chromium.org","recipients":["csharp@chromium.org","stevet@chromium.org","akalin@chromium.org","estade@chromium.org","finnur@chromium.org","chromium-reviews@chromium.org","nick@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","estade+watch@chromium.org","tim@chromium.org"],"text":"Change committed as 115140","disapproval":false,"date":"2011-12-20 17:12:52.086511","approval":false}],"owner_email":"csharp@chromium.org","private":false,"base_url":"http://git.chromium.org/git/chromium.git@trunk","owner":"csharp","subject":"Use Sync to store application icon positions on NTP.","created":"2011-10-03 21:24:53.853845","patchsets":[1,8001,19001,28002,41001],"modified":"2011-12-20 17:12:55.034363","closed":true,"commit":false,"issue":8114013}