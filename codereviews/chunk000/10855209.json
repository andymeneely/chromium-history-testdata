{"description":"Refactoring: ProtocolHandler::MaybeCreateJob and other functions take NetworkDelegate as argument\r\n\r\nThis change goes a long way to prepare for removing NetworkDelegate from URLRequestContext.\r\n\r\nTBR=sky@chromium.org, michaeln@chromium.org, benjhayden@chromium.org, brettw@chromium.org, ben@chromium.org, davemoore@chromium.org, zelidrag@chromium.org, mnissler@chromium.org, thestig@chromium.org, asargent@chromium.org, jhawkins@chromium.org, bulach@chromium.org\r\n\r\nBUG=crbug.com/142945\r\n\r\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=153133","cc":["chromium-reviews@chromium.org","michaeln@chromium.org","cbentzel+watch@chromium.org","mihaip-chromium-reviews@chromium.org","jam@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","pam+watch@chromium.org","kinuko+watch@chromium.org"],"reviewers":["willchan@chromium.org","mmenke@chromium.org","erikwright@chromium.org","srvasude@chromium.org"],"messages":[{"sender":"shalev@chromium.org","recipients":["shalev@chromium.org","willchan@chromium.org","mmenke@chromium.org","erikwright@chromium.org","chromium-reviews@chromium.org","michaeln@chromium.org","cbentzel+watch@chromium.org","mihaip-chromium-reviews@chromium.org","jam@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","pam+watch@chromium.org","kinuko+watch@chromium.org"],"text":"This CL changes over 100 files, but the changes are relatively straightforward and minor. Please take a look.\n\nShalev","disapproval":false,"date":"2012-08-20 22:00:47.912820","approval":false},{"sender":"erikwright@chromium.org","recipients":["shalev@chromium.org","willchan@chromium.org","mmenke@chromium.org","erikwright@chromium.org","chromium-reviews@chromium.org","michaeln@chromium.org","cbentzel+watch@chromium.org","mihaip-chromium-reviews@chromium.org","jam@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","pam+watch@chromium.org","kinuko+watch@chromium.org"],"text":"LGTM. I guess the one for making URLRequest take it as a constructor parameter will end up being this big too if you don't plan from the beginning to do it in phases. I'll send an email with a suggested series of CLs to avoid that happening.\n\nhttp://codereview.chromium.org/10855209/diff/1/chrome/browser/extensions/extension_protocols.cc\nFile chrome/browser/extensions/extension_protocols.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/1/chrome/browser/extensions/extension_protocols.cc#newcode35\nchrome/browser/extensions/extension_protocols.cc:35: #include \"net/url_request/url_request_context.h\"\nwhy add this?","disapproval":false,"date":"2012-08-21 02:05:01.005420","approval":true},{"sender":"mmenke@chromium.org","recipients":["shalev@chromium.org","willchan@chromium.org","mmenke@chromium.org","erikwright@chromium.org","chromium-reviews@chromium.org","michaeln@chromium.org","cbentzel+watch@chromium.org","mihaip-chromium-reviews@chromium.org","jam@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","pam+watch@chromium.org","kinuko+watch@chromium.org"],"text":"LGTM.  Just a couple headers that don't seem to be needed / needed any more.\n\nhttp://codereview.chromium.org/10855209/diff/8003/content/browser/net/view_blob_internals_job_factory.cc\nFile content/browser/net/view_blob_internals_job_factory.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/content/browser/net/view_blob_internals_job_factory.cc#newcode10\ncontent/browser/net/view_blob_internals_job_factory.cc:10: #include \"net/url_request/url_request.h\"\nWhile you're here....  I don't think we need this header.\n\nhttp://codereview.chromium.org/10855209/diff/8003/content/browser/tcmalloc_internals_request_job.cc\nFile content/browser/tcmalloc_internals_request_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/content/browser/tcmalloc_internals_request_job.cc#newcode14\ncontent/browser/tcmalloc_internals_request_job.cc:14: #include \"net/url_request/url_request.h\"\nWhy is this needed?\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_about_job.cc\nFile net/url_request/url_request_about_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_about_job.cc#newcode15\nnet/url_request/url_request_about_job.cc:15: #include \"net/url_request/url_request_context.h\"\nDon't think we need either of these two.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_data_job.cc\nFile net/url_request/url_request_data_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_data_job.cc#newcode11\nnet/url_request/url_request_data_job.cc:11: #include \"net/url_request/url_request_context.h\"\nDon't think this is needed.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_error_job.cc\nFile net/url_request/url_request_error_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_error_job.cc#newcode12\nnet/url_request/url_request_error_job.cc:12: #include \"net/url_request/url_request_context.h\"\nDon't think these two are needed.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_dir_job.cc\nFile net/url_request/url_request_file_dir_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_dir_job.cc#newcode19\nnet/url_request/url_request_file_dir_job.cc:19: #include \"net/url_request/url_request_context.h\"\nDon't think these two are needed.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_job.cc\nFile net/url_request/url_request_file_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_job.cc#newcode39\nnet/url_request/url_request_file_job.cc:39: #include \"net/url_request/url_request_context.h\"\nThis is no longer needed.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_job.h\nFile net/url_request/url_request_file_job.h (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_job.h#newcode15\nnet/url_request/url_request_file_job.h:15: #include \"net/url_request/url_request.h\"\nWhile you're here, don't think this is needed.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_redirect_job.cc\nFile net/url_request/url_request_redirect_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_redirect_job.cc#newcode11\nnet/url_request/url_request_redirect_job.cc:11: #include \"net/url_request/url_request_context.h\"\nThese two are no longer needed.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_simple_job.cc\nFile net/url_request/url_request_simple_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_simple_job.cc#newcode12\nnet/url_request/url_request_simple_job.cc:12: #include \"net/url_request/url_request.h\"\nNot needed?\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_test_job.cc\nFile net/url_request/url_request_test_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_test_job.cc#newcode19\nnet/url_request/url_request_test_job.cc:19: #include \"net/url_request/url_request_context.h\"\nNot needed.\n\nhttp://codereview.chromium.org/10855209/diff/8003/webkit/appcache/appcache_url_request_job.cc\nFile webkit/appcache/appcache_url_request_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/webkit/appcache/appcache_url_request_job.cc#newcode20\nwebkit/appcache/appcache_url_request_job.cc:20: #include \"net/url_request/url_request.h\"\nNot needed?","disapproval":false,"date":"2012-08-21 15:28:48.930850","approval":true},{"sender":"shalev@chromium.org","recipients":["shalev@chromium.org","willchan@chromium.org","mmenke@chromium.org","erikwright@chromium.org","chromium-reviews@chromium.org","michaeln@chromium.org","cbentzel+watch@chromium.org","mihaip-chromium-reviews@chromium.org","jam@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","pam+watch@chromium.org","kinuko+watch@chromium.org"],"text":"http://codereview.chromium.org/10855209/diff/1/chrome/browser/extensions/extension_protocols.cc\nFile chrome/browser/extensions/extension_protocols.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/1/chrome/browser/extensions/extension_protocols.cc#newcode35\nchrome/browser/extensions/extension_protocols.cc:35: #include \"net/url_request/url_request_context.h\"\nOn 2012/08/21 02:05:01, erikwright wrote:\n> why add this?\n\nDone.\n\nhttp://codereview.chromium.org/10855209/diff/8003/content/browser/net/view_blob_internals_job_factory.cc\nFile content/browser/net/view_blob_internals_job_factory.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/content/browser/net/view_blob_internals_job_factory.cc#newcode10\ncontent/browser/net/view_blob_internals_job_factory.cc:10: #include \"net/url_request/url_request.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> While you're here....  I don't think we need this header.\n\nDone.\n\nhttp://codereview.chromium.org/10855209/diff/8003/content/browser/tcmalloc_internals_request_job.cc\nFile content/browser/tcmalloc_internals_request_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/content/browser/tcmalloc_internals_request_job.cc#newcode14\ncontent/browser/tcmalloc_internals_request_job.cc:14: #include \"net/url_request/url_request.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> Why is this needed?\n\nDone.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_about_job.cc\nFile net/url_request/url_request_about_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_about_job.cc#newcode15\nnet/url_request/url_request_about_job.cc:15: #include \"net/url_request/url_request_context.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> Don't think we need either of these two.\n\nDone.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_data_job.cc\nFile net/url_request/url_request_data_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_data_job.cc#newcode11\nnet/url_request/url_request_data_job.cc:11: #include \"net/url_request/url_request_context.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> Don't think this is needed.\n\nDone.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_error_job.cc\nFile net/url_request/url_request_error_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_error_job.cc#newcode12\nnet/url_request/url_request_error_job.cc:12: #include \"net/url_request/url_request_context.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> Don't think these two are needed.\n\nDone.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_dir_job.cc\nFile net/url_request/url_request_file_dir_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_dir_job.cc#newcode19\nnet/url_request/url_request_file_dir_job.cc:19: #include \"net/url_request/url_request_context.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> Don't think these two are needed.\n\nDone.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_job.cc\nFile net/url_request/url_request_file_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_job.cc#newcode39\nnet/url_request/url_request_file_job.cc:39: #include \"net/url_request/url_request_context.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> This is no longer needed.\n\nDone.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_job.h\nFile net/url_request/url_request_file_job.h (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_file_job.h#newcode15\nnet/url_request/url_request_file_job.h:15: #include \"net/url_request/url_request.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> While you're here, don't think this is needed.\n\nI think this is needed for URLRequest::ProtocolFactory.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_redirect_job.cc\nFile net/url_request/url_request_redirect_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_redirect_job.cc#newcode11\nnet/url_request/url_request_redirect_job.cc:11: #include \"net/url_request/url_request_context.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> These two are no longer needed.\n\nDone.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_simple_job.cc\nFile net/url_request/url_request_simple_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_simple_job.cc#newcode12\nnet/url_request/url_request_simple_job.cc:12: #include \"net/url_request/url_request.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> Not needed?\n\nDone.\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_test_job.cc\nFile net/url_request/url_request_test_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/net/url_request/url_request_test_job.cc#newcode19\nnet/url_request/url_request_test_job.cc:19: #include \"net/url_request/url_request_context.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> Not needed.\n\nDone.\n\nhttp://codereview.chromium.org/10855209/diff/8003/webkit/appcache/appcache_url_request_job.cc\nFile webkit/appcache/appcache_url_request_job.cc (right):\n\nhttp://codereview.chromium.org/10855209/diff/8003/webkit/appcache/appcache_url_request_job.cc#newcode20\nwebkit/appcache/appcache_url_request_job.cc:20: #include \"net/url_request/url_request.h\"\nOn 2012/08/21 15:28:49, Matt Menke wrote:\n> Not needed?\n\nI think this is actually needed, eg. for line 95:\nrequest()->net_log()","disapproval":false,"date":"2012-08-22 20:34:09.867530","approval":false},{"sender":"mmenke@chromium.org","recipients":["shalev@chromium.org","willchan@chromium.org","mmenke@chromium.org","erikwright@chromium.org","chromium-reviews@chromium.org","michaeln@chromium.org","cbentzel+watch@chromium.org","mihaip-chromium-reviews@chromium.org","jam@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","pam+watch@chromium.org","kinuko+watch@chromium.org"],"text":"LGTM","disapproval":false,"date":"2012-08-22 20:37:45.014230","approval":true},{"sender":"commit-bot@chromium.org","recipients":["shalev@chromium.org","willchan@chromium.org","mmenke@chromium.org","erikwright@chromium.org","chromium-reviews@chromium.org","michaeln@chromium.org","cbentzel+watch@chromium.org","mihaip-chromium-reviews@chromium.org","jam@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","pam+watch@chromium.org","kinuko+watch@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/shalev@chromium.org/10855209/30012","disapproval":false,"date":"2012-08-23 22:44:07.989250","approval":false},{"sender":"commit-bot@chromium.org","recipients":["shalev@chromium.org","willchan@chromium.org","mmenke@chromium.org","erikwright@chromium.org","chromium-reviews@chromium.org","michaeln@chromium.org","cbentzel+watch@chromium.org","mihaip-chromium-reviews@chromium.org","jam@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","phajdan.jr@chromium.org","pam+watch@chromium.org","kinuko+watch@chromium.org"],"text":"Change committed as 153133","disapproval":false,"date":"2012-08-24 01:07:08.058610","approval":false}],"owner_email":"shalev@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"shalev","subject":"Refactoring: ProtocolHandler::MaybeCreateJob takes NetworkDelegate as argument","created":"2012-08-16 21:59:28.021220","patchsets":[1,2002,8003,6003,17001,20004,21003,28002,26002,25126,21126,30012],"modified":"2012-08-24 19:14:51.612090","closed":true,"commit":false,"issue":10855209}