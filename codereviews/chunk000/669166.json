{"description":"[Mac] Lock bar visibility during a bookmark button drag, forcing the fullscreen overlay to stay shown.\n\nBUG=37433\nTEST=Go fullscreen.  Open a folder on the bookmark bar and drag a button around such that the folder closes.  The overlay should not disappear.\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=40944","cc":["chromium-reviews@chromium.org","jrg@chromium.org","pam+watch@chromium.org","ben+cc@chromium.org"],"reviewers":["jrg@chromium.org","viettrungluu@chromium.org"],"messages":[{"sender":"rohitrao@chromium.org","recipients":["rohitrao@chromium.org","jrg@chromium.org","viettrungluu@chromium.org","chromium-reviews@chromium.org","jrg@chromium.org","pam+watch@chromium.org","ben+cc@chromium.org"],"text":"Do you see any problems with using beginDrag: and endDrag like this?\n\nhttp://codereview.chromium.org/669166/diff/9/12\nFile chrome/browser/cocoa/bookmark_button.mm (right):\n\nhttp://codereview.chromium.org/669166/diff/9/12#newcode64\nchrome/browser/cocoa/bookmark_button.mm:64: // Lock bar visibility, forciing the overlay to stay visible if we are in\nWill fix typo.\n\nhttp://codereview.chromium.org/669166/diff/9/12#newcode99\nchrome/browser/cocoa/bookmark_button.mm:99: [self endDrag];\nIs this change ok to make?  Is there any danger in calling [self endDrag] instead of [super endDrag]?","disapproval":false,"date":"2010-03-05 18:42:06.167903","approval":false},{"sender":"jrg@chromium.org","recipients":["rohitrao@chromium.org","jrg@chromium.org","viettrungluu@chromium.org","chromium-reviews@chromium.org","jrg@chromium.org","pam+watch@chromium.org","ben+cc@chromium.org"],"text":"LGTM but I worry things are getting a little messy/complicated.\n\nPerhaps if the releaseBarVisibilityForOwner: calls werte wrapped in a scoped_object of some kind the code would be easier to parse.  Or do you think that's overkill?","disapproval":false,"date":"2010-03-05 18:53:11.082427","approval":true},{"sender":"rohitrao@chromium.org","recipients":["rohitrao@chromium.org","jrg@chromium.org","viettrungluu@chromium.org","chromium-reviews@chromium.org","jrg@chromium.org","pam+watch@chromium.org","ben+cc@chromium.org"],"text":"On 2010/03/05 18:53:11, John Grabowski wrote:\n> LGTM but I worry things are getting a little messy/complicated.\n> \n> Perhaps if the releaseBarVisibilityForOwner: calls werte wrapped in a\n> scoped_object of some kind the code would be easier to parse.  Or do you think\n> that's overkill?\n\nI started to write something up but got caught up in how to specify all of the various animation/delay options.  I'm not sure that what I wrote would be cleaner than simply calling through to BWC directly.\n\nIs your worry that we have these lock/release calls scattered throughout the code?  I'm not sure I have a good answer for that, since we do need to lock the overlay around every operation that needs to keep it visible.  On the bright side, hopefully there won't be too many more such operations.","disapproval":false,"date":"2010-03-05 19:14:54.367654","approval":false},{"sender":"jrg@chromium.org","recipients":["reply@chromiumcodereview.appspotmail.com"],"text":">\n>\n> Is your worry that we have these lock/release calls scattered throughout\n> the\n> code?  I'm not sure I have a good answer for that, since we do need to lock\n> the\n> overlay around every operation that needs to keep it visible.  On the\n> bright\n> side, hopefully there won't be too many more such operations.\n>\n>\nYeah, my worry is not spotting somewhere new I need to add the calls, and\n\"guessing wrong\" because the doc/use is scattered.  Maybe that's not\njustified.\n\n\n>\n> http://codereview.chromium.org/669166\n>\n","disapproval":false,"date":"2010-03-05 19:16:18.848091","approval":false},{"sender":"viettrungluu@chromium.org","recipients":["rohitrao@chromium.org","jrg@chromium.org","viettrungluu@chromium.org","chromium-reviews@chromium.org","jrg@chromium.org","pam+watch@chromium.org","ben+cc@chromium.org"],"text":"LGTM. We can ponder the issues raised below.\n\nhttp://codereview.chromium.org/669166/diff/9/10\nFile chrome/browser/cocoa/bookmark_bar_controller.mm (right):\n\nhttp://codereview.chromium.org/669166/diff/9/10#newcode918\nchrome/browser/cocoa/bookmark_bar_controller.mm:918: delay:YES];\nI wonder whether delay:YES is really right. But probably it is.\n\nhttp://codereview.chromium.org/669166/diff/9/11\nFile chrome/browser/cocoa/bookmark_button.h (right):\n\nhttp://codereview.chromium.org/669166/diff/9/11#newcode103\nchrome/browser/cocoa/bookmark_button.h:103: BrowserWindowController* visibilityDelegate_;  // weak\nFor *this* purpose, I would support some sort of helper class (which bundles up the BWC together with dealing with overlay visibility).\n\nhttp://codereview.chromium.org/669166/diff/9/12\nFile chrome/browser/cocoa/bookmark_button.mm (right):\n\nhttp://codereview.chromium.org/669166/diff/9/12#newcode99\nchrome/browser/cocoa/bookmark_button.mm:99: [self endDrag];\nOn 2010/03/05 18:42:06, rohitrao wrote:\n> Is this change ok to make?  Is there any danger in calling [self endDrag]\n> instead of [super endDrag]?\n\nShould be okay, I think.","disapproval":false,"date":"2010-03-06 00:24:11.962901","approval":true}],"owner_email":"rohitrao@chromium.org","private":false,"base_url":"svn://chrome-svn/chrome/trunk/src/","owner":"rohitrao","subject":"[Mac] Lock bar visibility during a bookmark button drag, forcing the fullscre...","created":"2010-03-05 17:02:48.205903","patchsets":[1,9,2001],"modified":"2011-05-09 13:38:07.262854","closed":true,"commit":false,"issue":669166}