{"description":"Introduce background.scripts feature for extension manifests.\n\nThis optimizes for the common use case where background pages\njust include a reference to one or more script files and no\nadditional HTML.\n\nBUG=107791\n\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=117110","cc":["chromium-reviews@chromium.org","robertshield@chromium.org","kkania@chromium.org","mihaip+watch@chromium.org"],"reviewers":["mpcomplete@chromium.org","mihaip@chromium.org"],"messages":[{"sender":"aa@chromium.org","recipients":["aa@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org","kkania@chromium.org","mihaip+watch@chromium.org","aa@chromium.org"],"text":"","disapproval":false,"date":"2012-01-09 20:14:47.395141","approval":false},{"sender":"aa@chromium.org","recipients":["aa@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org","kkania@chromium.org","mihaip+watch@chromium.org","aa@chromium.org"],"text":"I will also update the docs in a separate change.\n\nhttp://codereview.chromium.org/9150008/diff/1/chrome/test/data/extensions/api_test/alert/manifest.json\nFile chrome/test/data/extensions/api_test/alert/manifest.json (right):\n\nhttp://codereview.chromium.org/9150008/diff/1/chrome/test/data/extensions/api_test/alert/manifest.json#newcode7\nchrome/test/data/extensions/api_test/alert/manifest.json:7: \"scripts\": [\"test.js\"]\nI will convert the rest of these in a separate change.","disapproval":false,"date":"2012-01-09 20:15:48.165797","approval":false},{"sender":"mpcomplete@chromium.org","recipients":["aa@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org","kkania@chromium.org","mihaip+watch@chromium.org","aa@chromium.org"],"text":"lgtm\n\nhttp://codereview.chromium.org/9150008/diff/1/chrome/browser/extensions/extension_protocols.cc\nFile chrome/browser/extensions/extension_protocols.cc (right):\n\nhttp://codereview.chromium.org/9150008/diff/1/chrome/browser/extensions/extension_protocols.cc#newcode105\nchrome/browser/extensions/extension_protocols.cc:105: class GeneratedBackgroundPageJob : public net::URLRequestSimpleJob {\nPlease add a class comment\n\nhttp://codereview.chromium.org/9150008/diff/1/chrome/common/extensions/extension.cc\nFile chrome/common/extensions/extension.cc (right):\n\nhttp://codereview.chromium.org/9150008/diff/1/chrome/common/extensions/extension.cc#newcode382\nchrome/common/extensions/extension.cc:382: extension_filenames::kGeneratedBackgroundPageFilename);\nnit: braces around multi-line if/else\n\nhttp://codereview.chromium.org/9150008/diff/1/chrome/common/extensions/extension.cc#newcode1284\nchrome/common/extensions/extension.cc:1284: if (!background_scripts_.empty())\nMaybe it should be an error to have both a background.scripts and background.page key.","disapproval":false,"date":"2012-01-09 21:12:17.293673","approval":true},{"sender":"commit-bot@chromium.org","recipients":["aa@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org","kkania@chromium.org","mihaip+watch@chromium.org","aa@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/aa@chromium.org/9150008/10001","disapproval":false,"date":"2012-01-10 01:25:26.218569","approval":false},{"sender":"mihaip@chromium.org","recipients":["aa@chromium.org","mpcomplete@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org","kkania@chromium.org","mihaip+watch@chromium.org","aa@chromium.org"],"text":"http://codereview.chromium.org/9150008/diff/10001/chrome/common/extensions/extension.cc\nFile chrome/common/extensions/extension.cc (right):\n\nhttp://codereview.chromium.org/9150008/diff/10001/chrome/common/extensions/extension.cc#newcode1222\nchrome/common/extensions/extension.cc:1222: background_scripts_.push_back(script);\nDrive by: Do you want to validate that these are relative paths only? It looks like \"background\": {\"scripts\": [\"http://www.mysite.com/script.js\"]] will result in a <script> tag pointed at that URL being generated. Though maybe that's OK, because of CSP?","disapproval":false,"date":"2012-01-10 01:51:37.696570","approval":false},{"sender":"mihaip@chromium.org","recipients":["reply@chromiumcodereview.appspotmail.com"],"text":"Actually, I'm not sure if CSP will prevent that script from being loaded,\nsince this manifest feature is available to v1 too.\n\nMihai\n\nOn Mon, Jan 9, 2012 at 5:51 PM, <mihaip@chromium.org> wrote:\n\n>\n> http://codereview.chromium.**org/9150008/diff/10001/chrome/**\n> common/extensions/extension.cc<http://codereview.chromium.org/9150008/diff/10001/chrome/common/extensions/extension.cc>\n> File chrome/common/extensions/**extension.cc (right):\n>\n> http://codereview.chromium.**org/9150008/diff/10001/chrome/**\n> common/extensions/extension.**cc#newcode1222<http://codereview.chromium.org/9150008/diff/10001/chrome/common/extensions/extension.cc#newcode1222>\n> chrome/common/extensions/**extension.cc:1222:\n> background_scripts_.push_back(**script);\n> Drive by: Do you want to validate that these are relative paths only? It\n> looks like \"background\": {\"scripts\":\n> [\"http://www.mysite.com/**script.js <http://www.mysite.com/script.js>\"]]\n> will result in a <script> tag\n> pointed at that URL being generated. Though maybe that's OK, because of\n> CSP?\n>\n> http://codereview.chromium.**org/9150008/<http://codereview.chromium.org/9150008/>\n>\n","disapproval":false,"date":"2012-01-10 01:53:37.926958","approval":false},{"sender":"commit-bot@chromium.org","recipients":["aa@chromium.org","mpcomplete@chromium.org","mihaip@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org","kkania@chromium.org","mihaip+watch@chromium.org","aa@chromium.org"],"text":"List of reviewers changed. mihaip@chromium.org did a drive-by without LGTM'ing!","disapproval":false,"date":"2012-01-10 02:38:34.004894","approval":false},{"sender":"aa@chromium.org","recipients":["aa@chromium.org","mpcomplete@chromium.org","mihaip@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org","kkania@chromium.org","mihaip+watch@chromium.org"],"text":"Good call. Fixed.","disapproval":false,"date":"2012-01-10 20:11:51.684062","approval":false},{"sender":"mihaip@chromium.org","recipients":["aa@chromium.org","mpcomplete@chromium.org","mihaip@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org","kkania@chromium.org","mihaip+watch@chromium.org"],"text":"LGTM","disapproval":false,"date":"2012-01-10 20:15:04.068309","approval":true},{"sender":"commit-bot@chromium.org","recipients":["aa@chromium.org","mpcomplete@chromium.org","mihaip@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org","kkania@chromium.org","mihaip+watch@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/aa@chromium.org/9150008/4007","disapproval":false,"date":"2012-01-10 21:10:59.249136","approval":false},{"sender":"commit-bot@chromium.org","recipients":["aa@chromium.org","mpcomplete@chromium.org","mihaip@chromium.org","chromium-reviews@chromium.org","robertshield@chromium.org","kkania@chromium.org","mihaip+watch@chromium.org"],"text":"Change committed as 117110","disapproval":false,"date":"2012-01-10 23:25:35.731245","approval":false}],"owner_email":"aa@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"Aaron Boodman","subject":"Introduce background.scripts feature for extension manifests.","created":"2012-01-09 20:13:37.011739","patchsets":[1,3002,8001,10001,19001,4007],"modified":"2012-01-10 23:25:35.822409","closed":true,"commit":false,"issue":9150008}