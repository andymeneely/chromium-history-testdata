{"files":{"content/browser/renderer_host/render_view_host.h":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":1,"messages":[{"author":"creis","author_email":"creis@chromium.org","text":"This needs a comment.","draft":false,"lineno":205,"date":"2012-01-11 00:27:43.892859","left":false},{"author":"James Simonsen","author_email":"simonjam@chromium.org","text":"On 2012/01/11 00:27:43, creis wrote:\n> This needs a comment.\n\nDone.","draft":false,"lineno":205,"date":"2012-01-11 04:02:12.068393","left":false}],"id":3002,"is_binary":false},"content/browser/tab_contents/render_view_host_manager.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":2,"messages":[],"id":3006,"is_binary":false},"content/renderer/render_view_impl.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":3009,"is_binary":false},"content/browser/tab_contents/render_view_host_manager.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":13,"num_removed":5,"messages":[{"author":"creis","author_email":"creis@chromium.org","text":"This comment apparently isn't correct anymore.  We have to update the start time (rather than doing nothing) even if we never ran the beforeunload handler in an unresponsive renderer?","draft":false,"lineno":269,"date":"2012-01-11 00:27:43.893400","left":false},{"author":"creis","author_email":"creis@chromium.org","text":"Nit: no braces on a one-line if.  (The braces on the one below are correct.)","draft":false,"lineno":273,"date":"2012-01-11 00:27:43.893659","left":false},{"author":"James Simonsen","author_email":"simonjam@chromium.org","text":"On 2012/01/11 00:27:43, creis wrote:\n> This comment apparently isn't correct anymore.  We have to update the start time\n> (rather than doing nothing) even if we never ran the beforeunload handler in an\n> unresponsive renderer?\n\nThis raises an interesting issue. The spec doesn't go into this level of detail. Basically, the spec says:\n- If there was a previous document, navigationStart should be immediately after beforeunload.\n- Otherwise, navigationStart should be immediately before the resource is requested.\n\nMy vote is that we go with the latter in this situation. beforeunload may complete way after the new document is done loading. It would be really screwy if the rest of the load events occurred before navigationStart.\n\nI've updated the code to reflect this. That means Chrome does nothing and WebCore sets navigationStart on its own (the current behavior).","draft":false,"lineno":269,"date":"2012-01-11 04:02:12.068821","left":false},{"author":"James Simonsen","author_email":"simonjam@chromium.org","text":"On 2012/01/11 00:27:43, creis wrote:\n> Nit: no braces on a one-line if.  (The braces on the one below are correct.)\n\nDone.","draft":false,"lineno":273,"date":"2012-01-11 04:02:12.068992","left":false},{"author":"creis","author_email":"creis@chromium.org","text":"On 2012/01/11 04:02:12, James Simonsen wrote:\n> On 2012/01/11 00:27:43, creis wrote:\n> > This comment apparently isn't correct anymore.  We have to update the start\n> time\n> > (rather than doing nothing) even if we never ran the beforeunload handler in\n> an\n> > unresponsive renderer?\n> \n> This raises an interesting issue. The spec doesn't go into this level of detail.\n> Basically, the spec says:\n> - If there was a previous document, navigationStart should be immediately after\n> beforeunload.\n> - Otherwise, navigationStart should be immediately before the resource is\n> requested.\n> \n> My vote is that we go with the latter in this situation. beforeunload may\n> complete way after the new document is done loading. It would be really screwy\n> if the rest of the load events occurred before navigationStart.\n> \n> I've updated the code to reflect this. That means Chrome does nothing and\n> WebCore sets navigationStart on its own (the current behavior).\n\nThat seems reasonable to me.","draft":false,"lineno":269,"date":"2012-01-11 21:28:05.908585","left":false}],"id":3005,"is_binary":false},"content/browser/renderer_host/render_view_host_delegate.h":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":2,"messages":[{"author":"creis","author_email":"creis@chromium.org","text":"Please explain the new parameter.","draft":false,"lineno":169,"date":"2012-01-11 00:27:43.893125","left":false},{"author":"James Simonsen","author_email":"simonjam@chromium.org","text":"On 2012/01/11 00:27:43, creis wrote:\n> Please explain the new parameter.\n\nDone.","draft":false,"lineno":169,"date":"2012-01-11 04:02:12.068650","left":false}],"id":3003,"is_binary":false},"content/renderer/render_view_impl.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":21,"num_removed":1,"messages":[{"author":"creis","author_email":"creis@chromium.org","text":"Why aren't we just timing this in the browser process?  This approach excludes the time for the IPC messages, which seems odd to me.  (That could be a large amount of time if the user's machine is heavily loaded.)","draft":false,"lineno":4033,"date":"2012-01-11 00:27:43.893896","left":false},{"author":"James Simonsen","author_email":"simonjam@chromium.org","text":"On 2012/01/11 00:27:43, creis wrote:\n> Why aren't we just timing this in the browser process?  This approach excludes\n> the time for the IPC messages, which seems odd to me.  (That could be a large\n> amount of time if the user's machine is heavily loaded.)\n\nOur goal is to record the time immediately after beforeunload completes. So, we're really defending against the browser process being slow handling IPCs by recording here. The start time is needed to make the inter-process time conversion work.","draft":false,"lineno":4033,"date":"2012-01-11 04:02:12.069239","left":false},{"author":"creis","author_email":"creis@chromium.org","text":"On 2012/01/11 04:02:12, James Simonsen wrote:\n> On 2012/01/11 00:27:43, creis wrote:\n> > Why aren't we just timing this in the browser process?  This approach excludes\n> > the time for the IPC messages, which seems odd to me.  (That could be a large\n> > amount of time if the user's machine is heavily loaded.)\n> \n> Our goal is to record the time immediately after beforeunload completes. So,\n> we're really defending against the browser process being slow handling IPCs by\n> recording here. The start time is needed to make the inter-process time\n> conversion work.\n\nAh, that was my confusion.  It looked like we were timing how long beforeunload took to run.","draft":false,"lineno":4033,"date":"2012-01-11 21:28:05.908758","left":false}],"id":3008,"is_binary":false},"content/browser/renderer_host/render_view_host.cc":{"status":"M","num_chunks":7,"no_base_file":false,"property_changes":"","num_added":32,"num_removed":4,"messages":[{"author":"creis","author_email":"creis@chromium.org","text":"Are we sure this won't introduce a race if a new navigation kicks off?","draft":false,"lineno":303,"date":"2012-01-11 00:27:43.892326","left":false},{"author":"creis","author_email":"creis@chromium.org","text":"I find this really hard to follow.  Can you explain what the goal is in a comment?","draft":false,"lineno":1212,"date":"2012-01-11 00:27:43.892599","left":false},{"author":"James Simonsen","author_email":"simonjam@chromium.org","text":"On 2012/01/11 00:27:43, creis wrote:\n> Are we sure this won't introduce a race if a new navigation kicks off?\n\nGood point. I'll add a check in the renderer to make sure the SetNavigationStartTime message is for the initial page_id.","draft":false,"lineno":303,"date":"2012-01-11 04:02:12.068059","left":false},{"author":"James Simonsen","author_email":"simonjam@chromium.org","text":"On 2012/01/11 00:27:43, creis wrote:\n> I find this really hard to follow.  Can you explain what the goal is in a\n> comment?\n\nDone.","draft":false,"lineno":1212,"date":"2012-01-11 04:02:12.068226","left":false}],"id":3001,"is_binary":false},"content/browser/renderer_host/test_render_view_host.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":1,"messages":[],"id":3004,"is_binary":false},"content/common/view_messages.h":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":2,"messages":[],"id":3007,"is_binary":false}},"owner_email":"simonjam@chromium.org","owner":"James Simonsen","message":"Move to DataSource","try_job_results":[],"created":"2012-01-10 22:22:04.820671","url":null,"num_comments":16,"modified":"2012-01-11 21:28:05.948328","patchset":2001,"issue":9166003}