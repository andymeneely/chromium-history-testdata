{"description":"Implement unpinning, isHosted for GData file properties\nand exposed existing content URL as contentUrl.\n\nBUG=chromium-os:27305,chromium-os:27078,chromium-os:27450\nTEST=none\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=125955","cc":["chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"reviewers":["zelidrag@chromium.org","asargent@chromium.org"],"messages":[{"sender":"gspencer@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"","disapproval":false,"date":"2012-03-05 21:39:38.777348","approval":false},{"sender":"zelidrag@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"http://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/extensions/file_browser_private_api.cc\nFile chrome/browser/chromeos/extensions/file_browser_private_api.cc (right):\n\nhttp://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/extensions/file_browser_private_api.cc#newcode471\nchrome/browser/chromeos/extensions/file_browser_private_api.cc:471: static_cast<bool>(cache_state_ & gdata::GDataFile::CACHE_STATE_HOSTED));\nthis should come from GDataFile::kind() instead, has nothing to do with the cache.\n\nSee DocumentEntry::is_hosted_document() implementation and expose the same getter in GDataFile\n\nhttp://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/extensions/file_browser_private_api.cc#newcode2011\nchrome/browser/chromeos/extensions/file_browser_private_api.cc:2011: args_->GetBoolean(1, &set_pin_);\nwhere is set_pin_ used?\n\nhttp://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/gdata/gdata_file_system.h\nFile chrome/browser/chromeos/gdata/gdata_file_system.h (right):\n\nhttp://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/gdata/gdata_file_system.h#newcode86\nchrome/browser/chromeos/gdata/gdata_file_system.h:86: CACHE_STATE_HOSTED  = 0x1 << 3,\nthere is no such state, this enum tracks only non-hosted files","disapproval":false,"date":"2012-03-05 22:20:39.389237","approval":false},{"sender":"gspencer@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"http://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/extensions/file_browser_private_api.cc\nFile chrome/browser/chromeos/extensions/file_browser_private_api.cc (right):\n\nhttp://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/extensions/file_browser_private_api.cc#newcode471\nchrome/browser/chromeos/extensions/file_browser_private_api.cc:471: static_cast<bool>(cache_state_ & gdata::GDataFile::CACHE_STATE_HOSTED));\nOn 2012/03/05 22:20:39, zel wrote:\n> this should come from GDataFile::kind() instead, has nothing to do with the\n> cache.\n> \n> See DocumentEntry::is_hosted_document() implementation and expose the same\n> getter in GDataFile\n\nAhh. That makes more sense.\n\nhttp://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/extensions/file_browser_private_api.cc#newcode2011\nchrome/browser/chromeos/extensions/file_browser_private_api.cc:2011: args_->GetBoolean(1, &set_pin_);\nOn 2012/03/05 22:20:39, zel wrote:\n> where is set_pin_ used?\n\nIt's not yet, because I don't have an API to call for it.\nThere's a TODO in DoOperation instead, because that's where it'll go eventually.\n\nhttp://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/gdata/gdata_file_system.h\nFile chrome/browser/chromeos/gdata/gdata_file_system.h (right):\n\nhttp://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/gdata/gdata_file_system.h#newcode86\nchrome/browser/chromeos/gdata/gdata_file_system.h:86: CACHE_STATE_HOSTED  = 0x1 << 3,\nOn 2012/03/05 22:20:39, zel wrote:\n> there is no such state, this enum tracks only non-hosted files\n\nRemoved.","disapproval":false,"date":"2012-03-05 22:46:09.079082","approval":false},{"sender":"kaznacheev@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"FYI the UI for pin/unpin is now committed (http://codereview.chromium.org/9621002/), although it uses the old 'pinGDataFile' method.\n\nOn 2012/03/05 22:46:09, Greg Spencer (Chromium) wrote:\n> http://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/extensions/file_browser_private_api.cc\n> File chrome/browser/chromeos/extensions/file_browser_private_api.cc (right):\n> \n> http://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/extensions/file_browser_private_api.cc#newcode471\n> chrome/browser/chromeos/extensions/file_browser_private_api.cc:471:\n> static_cast<bool>(cache_state_ & gdata::GDataFile::CACHE_STATE_HOSTED));\n> On 2012/03/05 22:20:39, zel wrote:\n> > this should come from GDataFile::kind() instead, has nothing to do with the\n> > cache.\n> > \n> > See DocumentEntry::is_hosted_document() implementation and expose the same\n> > getter in GDataFile\n> \n> Ahh. That makes more sense.\n> \n> http://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/extensions/file_browser_private_api.cc#newcode2011\n> chrome/browser/chromeos/extensions/file_browser_private_api.cc:2011:\n> args_->GetBoolean(1, &set_pin_);\n> On 2012/03/05 22:20:39, zel wrote:\n> > where is set_pin_ used?\n> \n> It's not yet, because I don't have an API to call for it.\n> There's a TODO in DoOperation instead, because that's where it'll go eventually.\n> \n> http://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/gdata/gdata_file_system.h\n> File chrome/browser/chromeos/gdata/gdata_file_system.h (right):\n> \n> http://codereview.chromium.org/9597035/diff/1/chrome/browser/chromeos/gdata/gdata_file_system.h#newcode86\n> chrome/browser/chromeos/gdata/gdata_file_system.h:86: CACHE_STATE_HOSTED  = 0x1\n> << 3,\n> On 2012/03/05 22:20:39, zel wrote:\n> > there is no such state, this enum tracks only non-hosted files\n> \n> Removed.","disapproval":false,"date":"2012-03-07 21:19:37.732611","approval":false},{"sender":"zelidrag@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"http://codereview.chromium.org/9597035/diff/2002/chrome/browser/chromeos/extensions/file_browser_private_api.cc\nFile chrome/browser/chromeos/extensions/file_browser_private_api.cc (right):\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/browser/chromeos/extensions/file_browser_private_api.cc#newcode2011\nchrome/browser/chromeos/extensions/file_browser_private_api.cc:2011: args_->GetBoolean(1, &set_pin_);\nwhere is args_[0] read?\n\ncheck return value of GetBoolean()... the param type can be busted\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/browser/chromeos/extensions/file_browser_private_api.h\nFile chrome/browser/chromeos/extensions/file_browser_private_api.h (right):\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/browser/chromeos/extensions/file_browser_private_api.h#newcode435\nchrome/browser/chromeos/extensions/file_browser_private_api.h:435: bool set_pin_;\nwhat is this used for\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/common/extensions/api/fileBrowserPrivate.json\nFile chrome/common/extensions/api/fileBrowserPrivate.json (right):\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/common/extensions/api/fileBrowserPrivate.json#newcode505\nchrome/common/extensions/api/fileBrowserPrivate.json:505: \"name\": \"setGDataFilePinned\",\nthe original function name is still ok, I wouldn't change it","disapproval":false,"date":"2012-03-07 23:51:42.325203","approval":false},{"sender":"gspencer@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"Sending again now that app engine is back...\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/browser/chromeos/extensions/file_browser_private_api.cc\nFile chrome/browser/chromeos/extensions/file_browser_private_api.cc (right):\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/browser/chromeos/extensions/file_browser_private_api.cc#newcode2011\nchrome/browser/chromeos/extensions/file_browser_private_api.cc:2011: args_->GetBoolean(1, &set_pin_);\nOn 2012/03/07 23:51:42, zel wrote:\n> where is args_[0] read?\n> \n> check return value of GetBoolean()... the param type can be busted\n\nthe first arg is read in the base class RunImpl.\n\nOK, I check the return value now.\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/browser/chromeos/extensions/file_browser_private_api.h\nFile chrome/browser/chromeos/extensions/file_browser_private_api.h (right):\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/browser/chromeos/extensions/file_browser_private_api.h#newcode435\nchrome/browser/chromeos/extensions/file_browser_private_api.h:435: bool set_pin_;\nOn 2012/03/07 23:51:42, zel wrote:\n> what is this used for\n\nIt keeps the value of whether this file is pinned or not until it can be read in DoOperation to set the actual pinned value on each file in the list.  Since DoOperation is still to be implemented, it's not yet actually used.\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/common/extensions/api/fileBrowserPrivate.json\nFile chrome/common/extensions/api/fileBrowserPrivate.json (right):\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/common/extensions/api/fileBrowserPrivate.json#newcode505\nchrome/common/extensions/api/fileBrowserPrivate.json:505: \"name\": \"setGDataFilePinned\",\nOn 2012/03/07 23:51:42, zel wrote:\n> the original function name is still ok, I wouldn't change it\n\nOK.  To me, the old name didn't imply that it could unpin a file.","disapproval":false,"date":"2012-03-08 00:46:10.509471","approval":false},{"sender":"zelidrag@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"LGTM\n\nplease merge with my CL that exposes contentUrl\n\nsorry, i've totally forgot that you had it in this CL as well\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/browser/chromeos/extensions/file_browser_private_api.h\nFile chrome/browser/chromeos/extensions/file_browser_private_api.h (right):\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/browser/chromeos/extensions/file_browser_private_api.h#newcode435\nchrome/browser/chromeos/extensions/file_browser_private_api.h:435: bool set_pin_;\nOn 2012/03/08 00:46:10, Greg Spencer (Chromium) wrote:\n> On 2012/03/07 23:51:42, zel wrote:\n> > what is this used for\n> \n> It keeps the value of whether this file is pinned or not until it can be read in\n> DoOperation to set the actual pinned value on each file in the list.  Since\n> DoOperation is still to be implemented, it's not yet actually used.\n\nLet's remove it then.\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/common/extensions/api/fileBrowserPrivate.json\nFile chrome/common/extensions/api/fileBrowserPrivate.json (right):\n\nhttp://codereview.chromium.org/9597035/diff/2002/chrome/common/extensions/api/fileBrowserPrivate.json#newcode72\nchrome/common/extensions/api/fileBrowserPrivate.json:72: \"editUrl\": {\ncontentUrl was missing originally, took care with that with my CL","disapproval":false,"date":"2012-03-08 02:28:20.694022","approval":true},{"sender":"commit-bot@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/gspencer@chromium.org/9597035/19001","disapproval":false,"date":"2012-03-09 21:03:15.280836","approval":false},{"sender":"commit-bot@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"Presubmit check for 9597035-19001 failed and returned exit status 1.\n\nRunning presubmit commit checks ...\n\n** Presubmit ERRORS **\nMissing LGTM from an OWNER for files in these directories:\n    chrome/common/extensions/api\n\nPresubmit checks took 1.2s to calculate.","disapproval":false,"date":"2012-03-09 21:03:20.557002","approval":false},{"sender":"gspencer@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","asargent@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"Anthony, can you give me an OWNERS review for \nchrome/common/extensions/api/fileBrowserPrivate.json please?","disapproval":false,"date":"2012-03-09 21:39:02.538506","approval":false},{"sender":"asargent@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","asargent@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"lgtm","disapproval":false,"date":"2012-03-09 21:55:28.260487","approval":true},{"sender":"commit-bot@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","asargent@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/gspencer@chromium.org/9597035/19001","disapproval":false,"date":"2012-03-09 22:02:03.202914","approval":false},{"sender":"commit-bot@chromium.org","recipients":["gspencer@chromium.org","zelidrag@chromium.org","asargent@chromium.org","chromium-reviews@chromium.org","nkostylev+watch@chromium.org","achuith+watch@chromium.org","mihaip+watch@chromium.org","aa@chromium.org","rginda+watch@chromium.org","stevenjb+watch@chromium.org","davemoore+watch@chromium.org"],"text":"Change committed as 125955","disapproval":false,"date":"2012-03-10 00:23:21.896886","approval":false}],"owner_email":"gspencer@chromium.org","private":false,"base_url":"http://git.chromium.org/chromium/src.git@master","owner":"Greg Spencer (Chromium)","subject":"Implement unpinning, isHosted for GData file properties","created":"2012-03-05 21:24:25.488658","patchsets":[1,5001,2002,10001,19001],"modified":"2012-03-10 00:23:22.000697","closed":true,"commit":false,"issue":9597035}