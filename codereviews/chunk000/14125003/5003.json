{"files":{"net/ssl/ssl_config_service.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":36,"num_removed":1,"messages":[],"id":36012,"is_binary":false},"net/http/http_network_transaction_ssl_unittest.cc":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":198,"num_removed":0,"messages":[{"author":"thaidn_google","author_email":"thaidn@google.com","text":"Please let me know if you think I shouldn't reuse this class.","draft":false,"lineno":33,"date":"2013-04-16 00:39:12.078730","left":false},{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"On 2013/04/16 00:39:12, thaidn_google wrote:\n> Please let me know if you think I shouldn't reuse this class.\n\nYou shouldn't re-use this class :)\n\nYou could use something similar to http://src.chromium.org/viewvc/chrome/trunk/src/net/http/http_network_layer_unittest.cc?revision=HEAD for these bits, AIUI.\n","draft":false,"lineno":33,"date":"2013-04-16 19:55:26.481820","left":false},{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"comment nit: you intermix comments of \"first SSL handshake\" (when talking about TLS) and \"first handshake\" (when talking about SSL3)\n\nI would suggest consistently saying \"first handshake\", and then making sure the comment explains *which* version you expect to be negotiated.\n\nFurther, it seems like the # of handshakes is coupled to the TLS versions you're using (eg: TLS 1.1 -> TLS 1.0 -> SSL3), which will then create issues if/when we change the default to include TLS 1.2 (since now you have an ADDITIONAL set of fallbacks)\n\nSeems like this test harness should explicitly configure its supported TLS version to 1.0, so that there is only ever one fallback - to SSL3.","draft":false,"lineno":35,"date":"2013-04-16 19:55:26.482090","left":false},{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"We're trying to phase out this pattern in existing code.\n\nYou can either do:\n\nint rv = callback.GetResult(trans->Start(...)) or\n\nint rv = trans->Start();\nrv = callback.GetResult(rv);\n\nThe former is preferable.\n\nThe point of this is that the assertion that rv == ERR_IO_PENDING isn't strictly a requirement of the code under test. For example, you could just as well change line 38/48 to be SYNCHRONOUS completions and the test (should) still function correctly.","draft":false,"lineno":70,"date":"2013-04-16 19:55:26.482320","left":false},{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"You're in net (line 18), so you don't need the net:: prefix anywhere in this file.","draft":false,"lineno":71,"date":"2013-04-16 19:55:26.482530","left":false},{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"This comment seems entirely incorrect (and thus creates issues for the comment on 171-173).\n\nWhere is it ever set that the failure is due to client certs? You're just flagging a protocol error.","draft":false,"lineno":165,"date":"2013-04-16 19:55:26.482720","left":false},{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"nit: s/Chrome/Chromium/","draft":false,"lineno":173,"date":"2013-04-16 19:55:26.482960","left":false},{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"style: indentation","draft":false,"lineno":180,"date":"2013-04-16 19:55:26.483220","left":false},{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"style: indentation","draft":false,"lineno":185,"date":"2013-04-16 19:55:26.483480","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/16 19:55:26, Ryan Sleevi wrote:\n> On 2013/04/16 00:39:12, thaidn_google wrote:\n> > Please let me know if you think I shouldn't reuse this class.\n> \n> You shouldn't re-use this class :)\n> \n> You could use something similar to\n> http://src.chromium.org/viewvc/chrome/trunk/src/net/http/http_network_layer_unittest.cc?revision=HEAD\n> for these bits, AIUI.\n\nDone.","draft":false,"lineno":33,"date":"2013-04-17 00:46:17.128360","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/16 19:55:26, Ryan Sleevi wrote:\n> We're trying to phase out this pattern in existing code.\n> \n> You can either do:\n> \n> int rv = callback.GetResult(trans->Start(...)) or\n> \n> int rv = trans->Start();\n> rv = callback.GetResult(rv);\n> \n> The former is preferable.\n> \n> The point of this is that the assertion that rv == ERR_IO_PENDING isn't strictly\n> a requirement of the code under test. For example, you could just as well change\n> line 38/48 to be SYNCHRONOUS completions and the test (should) still function\n> correctly.\n\nDone.","draft":false,"lineno":70,"date":"2013-04-17 00:46:17.128630","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/16 19:55:26, Ryan Sleevi wrote:\n> You're in net (line 18), so you don't need the net:: prefix anywhere in this\n> file.\n\nDone.","draft":false,"lineno":71,"date":"2013-04-17 00:46:17.128910","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/16 19:55:26, Ryan Sleevi wrote:\n> This comment seems entirely incorrect (and thus creates issues for the comment\n> on 171-173).\n> \n> Where is it ever set that the failure is due to client certs? You're just\n> flagging a protocol error.\n\nDone.","draft":false,"lineno":165,"date":"2013-04-17 00:46:17.129170","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/16 19:55:26, Ryan Sleevi wrote:\n> nit: s/Chrome/Chromium/\n\nDone.","draft":false,"lineno":173,"date":"2013-04-17 00:46:17.129450","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/16 19:55:26, Ryan Sleevi wrote:\n> style: indentation\n\nDone.","draft":false,"lineno":180,"date":"2013-04-17 00:46:17.129710","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/16 19:55:26, Ryan Sleevi wrote:\n> style: indentation\n\nDone.","draft":false,"lineno":185,"date":"2013-04-17 00:46:17.129960","left":false}],"id":36010,"is_binary":false},"chrome/common/chrome_switches.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":36005,"is_binary":false},"chrome/browser/net/ssl_config_service_manager_pref.cc":{"status":"M","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":38,"messages":[],"id":36001,"is_binary":false},"chrome/common/pref_names.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":36007,"is_binary":false},"net/net.gyp":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":36011,"is_binary":false},"net/ssl/ssl_config_service.h":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":0,"messages":[{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"This seems like a really awkward place to put this, given that we already have net::SSLVersionToString in http://src.chromium.org/viewvc/chrome/trunk/src/net/ssl/ssl_cipher_suite_names.h?revision=HEAD\n\nSeems like these should live there?","draft":false,"lineno":58,"date":"2013-04-16 19:55:26.483730","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"It turns out that I don't need them here anymore. I just move them back to their original place.\n\nOn 2013/04/16 19:55:26, Ryan Sleevi wrote:\n> This seems like a really awkward place to put this, given that we already have\n> net::SSLVersionToString in\n> http://src.chromium.org/viewvc/chrome/trunk/src/net/ssl/ssl_cipher_suite_names.h?revision=HEAD\n> \n> Seems like these should live there?\n\n","draft":false,"lineno":58,"date":"2013-04-17 00:46:17.130140","left":false}],"id":36013,"is_binary":false},"chrome/browser/prefs/command_line_pref_store.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":36003,"is_binary":false},"net/http/http_network_transaction.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":0,"messages":[{"author":"agl","author_email":"agl@chromium.org","text":"Can't think chunk live before the switch() and thus remove the need to duplicate it below?","draft":false,"lineno":1226,"date":"2013-04-16 15:19:24.065000","left":false},{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"On 2013/04/16 15:19:24, agl wrote:\n> Can't think chunk live before the switch() and thus remove the need to duplicate\n> it below?\n\nYeah, I think this switch can/should be re-organized a little as part of this\n\nuint16 version_before = server_ssl_config_.version_max;\nuint16 version_max = version_before;\nswitch (error) {\n  case ...:\n  case ...:\n    if (cond_a) {\n       version_max = X\n    }\n    break;\n  case ...:\n  case ...:\n    if (cond_b) {\n      version_max = y;\n    }\n    break;\n}\n\nif (version_max <= SSL3 && Google) {\n  // It would be good to UMA this here, right? Or are we\n  // assuming this will always fail (since UMA => Google)\n  // If it doesn't make sense, then just change the if/else\n  // into an \"if (x && !(version_max... && Google))\"\n} else if (version_max != version_before) {\n  server_ssl_config_.version_max = version_max;\n  net_log_.AddEvent(...)\n  server_ssl_config_.version_fallback = true;\n  ResetConn...()\n  error = OK;\n}\n","draft":false,"lineno":1226,"date":"2013-04-16 19:55:26.481200","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/16 19:55:26, Ryan Sleevi wrote:\n> On 2013/04/16 15:19:24, agl wrote:\n> > Can't think chunk live before the switch() and thus remove the need to\n> duplicate\n> > it below?\n> \n> Yeah, I think this switch can/should be re-organized a little as part of this\n> \n> uint16 version_before = server_ssl_config_.version_max;\n> uint16 version_max = version_before;\n> switch (error) {\n>   case ...:\n>   case ...:\n>     if (cond_a) {\n>        version_max = X\n>     }\n>     break;\n>   case ...:\n>   case ...:\n>     if (cond_b) {\n>       version_max = y;\n>     }\n>     break;\n> }\n> \n> if (version_max <= SSL3 && Google) {\n>   // It would be good to UMA this here, right? Or are we\n>   // assuming this will always fail (since UMA => Google)\n>   // If it doesn't make sense, then just change the if/else\n>   // into an \"if (x && !(version_max... && Google))\"\n> } else if (version_max != version_before) {\n>   server_ssl_config_.version_max = version_max;\n>   net_log_.AddEvent(...)\n>   server_ssl_config_.version_fallback = true;\n>   ResetConn...()\n>   error = OK;\n> }\n\nDone.","draft":false,"lineno":1226,"date":"2013-04-17 00:46:17.127800","left":false}],"id":36008,"is_binary":false},"net/http/http_network_transaction.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[{"author":"agl","author_email":"agl@chromium.org","text":"Looks like rsleevi want's a friend test I'm afraid :)","draft":false,"lineno":89,"date":"2013-04-16 15:19:24.065190","left":false},{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"On 2013/04/16 15:19:24, agl wrote:\n> Looks like rsleevi want's a friend test I'm afraid :)\n\nEither friend the test or friend the harness.\n\nI would recommend friending the harness (eg:\nfriend class HttpNetworkTransactionTest) over the individual test.","draft":false,"lineno":89,"date":"2013-04-16 19:55:26.481520","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/16 19:55:26, Ryan Sleevi wrote:\n> On 2013/04/16 15:19:24, agl wrote:\n> > Looks like rsleevi want's a friend test I'm afraid :)\n> \n> Either friend the test or friend the harness.\n> \n> I would recommend friending the harness (eg:\n> friend class HttpNetworkTransactionTest) over the individual test.\n\nDone.","draft":false,"lineno":89,"date":"2013-04-17 00:46:17.128080","left":false}],"id":36009,"is_binary":false},"chrome/common/chrome_switches.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":0,"messages":[{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"s/'s//\ns/will be/is/","draft":false,"lineno":324,"date":"2013-04-16 19:55:26.480880","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/16 19:55:26, Ryan Sleevi wrote:\n> s/'s//\n> s/will be/is/\n\nDone.","draft":false,"lineno":324,"date":"2013-04-17 00:46:17.127500","left":false}],"id":36004,"is_binary":false},"chrome/browser/net/ssl_config_service_manager_pref_unittest.cc":{"status":"M","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":21,"num_removed":2,"messages":[],"id":36002,"is_binary":false},"net/ssl/ssl_config_service_unittest.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":36014,"is_binary":false},"chrome/common/pref_names.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":36006,"is_binary":false}},"owner_email":"thaidn@google.com","owner":"thaidn_google","message":"disable","try_job_results":[],"created":"2013-04-16 00:20:28.338570","url":null,"num_comments":26,"modified":"2013-04-17 00:46:17.193770","patchset":5003,"issue":14125003}