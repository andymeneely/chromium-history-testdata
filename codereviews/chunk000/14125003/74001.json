{"files":{"net/ssl/ssl_config_service.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":1,"messages":[],"id":75013,"is_binary":false},"net/http/http_network_transaction_ssl_unittest.cc":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":221,"num_removed":0,"messages":[{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"One test naming nit - I would suggest using the site as the suffix, rather than the prefix, so that you can do\n\n--gtest_filter=SSLVersionMinPreloaded* and run all three tests easily","draft":false,"lineno":90,"date":"2013-04-17 18:01:27.511870","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/17 18:01:27, Ryan Sleevi wrote:\n> One test naming nit - I would suggest using the site as the suffix, rather than\n> the prefix, so that you can do\n> \n> --gtest_filter=SSLVersionMinPreloaded* and run all three tests easily\n\nDone.","draft":false,"lineno":90,"date":"2013-04-17 20:14:40.045090","left":false}],"id":75010,"is_binary":false},"chrome/common/chrome_switches.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":75005,"is_binary":false},"chrome/browser/net/ssl_config_service_manager_pref.cc":{"status":"M","num_chunks":7,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":4,"messages":[{"author":"Ryan Sleevi (OoO until 11-18)","author_email":"rsleevi@chromium.org","text":"I believe you should revert these changes - it's no longer a member of SSLConfig::.\n\n","draft":false,"lineno":67,"date":"2013-04-17 18:01:27.511660","left":false},{"author":"wtc","author_email":"wtc@chromium.org","text":"\nWhy reformat these two lines?","draft":false,"lineno":310,"date":"2013-04-17 19:49:50.157900","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"Oh right. Good catch! This should be caught if I was able to compile unit_tests (it failed for some unrelated reasons).\n\nOn 2013/04/17 18:01:27, Ryan Sleevi wrote:\n> I believe you should revert these changes - it's no longer a member of\n> SSLConfig::.\n> \n\n","draft":false,"lineno":67,"date":"2013-04-17 20:14:40.044780","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/17 19:49:50, wtc wrote:\n> \n> Why reformat these two lines?\n\nDone.","draft":false,"lineno":310,"date":"2013-04-17 22:16:07.099970","left":false}],"id":75001,"is_binary":false},"chrome/common/pref_names.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":75007,"is_binary":false},"net/net.gyp":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":75011,"is_binary":false},"net/ssl/ssl_config_service.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":75014,"is_binary":false},"chrome/browser/prefs/command_line_pref_store.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":75003,"is_binary":false},"net/http/http_network_transaction.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":27,"num_removed":24,"messages":[{"author":"wtc","author_email":"wtc@chromium.org","text":"\nBUG?: The original code uses server_ssl_config_.version_min\nhere. Did you intend to change it to version_max?\n\nSince we no longer do TLS compression, this code is now\nobsolete and can be simply deleted.","draft":false,"lineno":1249,"date":"2013-04-17 19:49:50.158350","left":true},{"author":"wtc","author_email":"wtc@chromium.org","text":"\nIMPORTANT: the name \"ssl_version_min_preloaded_disabled\"\nsuggests that we can simply change server_ssl_config_.version_min\nhere, as soon as request_->url is available and we can\ncall TransportSecurityState::IsGooglePinnedProperty().\n\nI think this alternative implementation would be better.","draft":false,"lineno":176,"date":"2013-04-17 19:49:50.158520","left":false},{"author":"wtc","author_email":"wtc@chromium.org","text":"\nI suggest moving this comment before the if statement to\navoid mixing comments with conditional expressions.\n\nThis change is borderline \"optimizing Chrome for Google\nservers\". I think we should clarify this in this comment.\nPerhaps we will experiment with Google servers first and\nexpand this to other servers after we have gained enough\nexperience. Perhaps there is a high risk of breaking the\nservers so we are uncomfortable doing this in general.","draft":false,"lineno":1253,"date":"2013-04-17 19:49:50.158690","left":false},{"author":"wtc","author_email":"wtc@chromium.org","text":"\nI think \"hsts\" should be part of this member's name. I had\nno idea what \"preloaded\" means.\n\nIt is a little confusing to use \"version_min\" in this member's\nname because it is actually used in conjunction with version_max\nhere. This is another reason to consider the alternative\nimplementation.\n\nPerhaps this member should be named something like\n\"strict_ssl_version_fallback_disabled\".","draft":false,"lineno":1255,"date":"2013-04-17 19:49:50.158860","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"This was my original approach. Chris pointed out that there may be MITM proxies that only implement SSLv3. Preventing fallback would allow them to continue to work, but setting the minimum version breaks them.\n\nOn 2013/04/17 19:49:50, wtc wrote:\n> \n> IMPORTANT: the name \"ssl_version_min_preloaded_disabled\"\n> suggests that we can simply change server_ssl_config_.version_min\n> here, as soon as request_->url is available and we can\n> call TransportSecurityState::IsGooglePinnedProperty().\n> \n> I think this alternative implementation would be better.\n\n","draft":false,"lineno":176,"date":"2013-04-17 22:16:07.100400","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/17 19:49:50, wtc wrote:\n> \n> I suggest moving this comment before the if statement to\n> avoid mixing comments with conditional expressions.\n> \n> This change is borderline \"optimizing Chrome for Google\n> servers\". I think we should clarify this in this comment.\n> Perhaps we will experiment with Google servers first and\n> expand this to other servers after we have gained enough\n> experience. Perhaps there is a high risk of breaking the\n> servers so we are uncomfortable doing this in general.\n\nDone.","draft":false,"lineno":1253,"date":"2013-04-17 22:16:07.100660","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"I rename it to ssl3_version_fallback_enabled.\n\nI chose the old name because it was part of a bigger plan to induce minimum SSL version from HSTS preloaded configuration.\n\nOn 2013/04/17 19:49:50, wtc wrote:\n> \n> I think \"hsts\" should be part of this member's name. I had\n> no idea what \"preloaded\" means.\n> \n> It is a little confusing to use \"version_min\" in this member's\n> name because it is actually used in conjunction with version_max\n> here. This is another reason to consider the alternative\n> implementation.\n> \n> Perhaps this member should be named something like\n> \"strict_ssl_version_fallback_disabled\".\n\n","draft":false,"lineno":1255,"date":"2013-04-17 22:16:07.100880","left":false}],"id":75008,"is_binary":false},"net/http/http_network_transaction.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":75009,"is_binary":false},"chrome/common/chrome_switches.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":0,"messages":[{"author":"wtc","author_email":"wtc@chromium.org","text":"\nThe CL's description says this option is\n--ssl-version-min-preloaded-disabled. Please update the CL's\ndescription.","draft":false,"lineno":327,"date":"2013-04-17 19:49:50.158170","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"I change it to --enable-ssl3-version-fallback, and update the CL's description.\n\nOn 2013/04/17 19:49:50, wtc wrote:\n> \n> The CL's description says this option is\n> --ssl-version-min-preloaded-disabled. Please update the CL's\n> description.\n\n","draft":false,"lineno":327,"date":"2013-04-17 22:16:07.100200","left":false}],"id":75004,"is_binary":false},"net/socket/socket_test_util.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[{"author":"wtc","author_email":"wtc@chromium.org","text":"\nNit: move this getter method to be next to the related\nResetNextIndex() method.","draft":false,"lineno":522,"date":"2013-04-17 19:49:50.159020","left":false},{"author":"thaidn_google","author_email":"thaidn@google.com","text":"On 2013/04/17 19:49:50, wtc wrote:\n> \n> Nit: move this getter method to be next to the related\n> ResetNextIndex() method.\n\nDone.","draft":false,"lineno":522,"date":"2013-04-17 22:16:07.101090","left":false}],"id":75012,"is_binary":false},"chrome/browser/net/ssl_config_service_manager_pref_unittest.cc":{"status":"M","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":21,"num_removed":2,"messages":[],"id":75002,"is_binary":false},"net/ssl/ssl_config_service_unittest.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":75015,"is_binary":false},"chrome/common/pref_names.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":75006,"is_binary":false}},"owner_email":"thaidn@google.com","owner":"thaidn_google","message":"Cleanup before sending for reviews.","try_job_results":[],"created":"2013-04-17 04:30:29.384620","url":null,"num_comments":17,"modified":"2013-04-17 22:16:07.219640","patchset":74001,"issue":14125003}