{"files":{"media/base/user_input_monitor_mac.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":8,"messages":[],"id":46005,"is_binary":false},"media/base/user_input_monitor_linux.cc":{"status":"M","num_chunks":10,"no_base_file":false,"property_changes":"","num_added":125,"num_removed":64,"messages":[{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"There is still the problem that I pointed before: If some thread calls StartMonitor() and then IO thread calls StopMonitor() immediately after that then StopMonitor() will be executed before StartMonitor() is called on the IO thread. This should be easy to fix. Just add DoStartMonitor() and always post a task from StartMonitor().\n\nStartMonitoring() and StopMonitoring() are always called with the lock held, so there is definite order in which these methods are called. The code that starts/stops monitoring on the IO thread should be always executed in the same order, but that's not guaranteed if you don't always post a task here.","draft":false,"lineno":174,"date":"2013-09-07 20:19:41.212690","left":false},{"author":"jiayl","author_email":"jiayl@chromium.org","text":"On 2013/09/07 20:19:41, Sergey Ulanov wrote:\n> There is still the problem that I pointed before: If some thread calls\n> StartMonitor() and then IO thread calls StopMonitor() immediately after that\n> then StopMonitor() will be executed before StartMonitor() is called on the IO\n> thread. This should be easy to fix. Just add DoStartMonitor() and always post a\n> task from StartMonitor().\n> \n> StartMonitoring() and StopMonitoring() are always called with the lock held, so\n> there is definite order in which these methods are called. The code that\n> starts/stops monitoring on the IO thread should be always executed in the same\n> order, but that's not guaranteed if you don't always post a task here.\n\nDone.","draft":false,"lineno":174,"date":"2013-09-10 16:31:00.715220","left":false}],"id":46004,"is_binary":false},"media/base/user_input_monitor.h":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":17,"messages":[],"id":46003,"is_binary":false},"media/base/user_input_monitor_unittest.cc":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":72,"num_removed":0,"messages":[],"id":46006,"is_binary":false},"media/media.gyp":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":2,"messages":[],"id":46008,"is_binary":false},"media/base/user_input_monitor.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":32,"messages":[],"id":46002,"is_binary":false},"media/base/user_input_monitor_win.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":308,"num_removed":3,"messages":[],"id":46007,"is_binary":false},"media/base/keyboard_event_counter.h":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":1,"messages":[],"id":46001,"is_binary":false}},"owner_email":"jiayl@chromium.org","owner":"jiayl","message":" ","try_job_results":[],"created":"2013-09-06 22:41:09.076060","url":null,"num_comments":2,"modified":"2013-09-10 16:31:00.768820","patchset":45001,"issue":23702008}