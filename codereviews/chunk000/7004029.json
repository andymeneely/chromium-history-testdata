{"description":"Fix to make InputMethodIBus usable on every ChromeOS device (even without TouchUI)\r\n\r\nAdd switch \"--enable-inputmethod-ibus\" to enable InputMethodIBus on ChromeOS\r\nModify gyp files to link IBus\r\n\r\nBUG=chromium-os:15566\r\nTEST=manually\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=86390","cc":["chromium-reviews@chromium.org"],"reviewers":["oshima@chromium.org"],"messages":[{"sender":"hashimoto@chromium.org","recipients":["hashimoto@chromium.org","oshima@chromium.org","chromium-reviews@chromium.org"],"text":"small changes on InputMethodIBus to add switch\nsmall changes on gyp files to enable IBus\nsmall change on NativeWidgetGtk to enable InputMethodIBus","disapproval":false,"date":"2011-05-20 03:08:18.081368","approval":false},{"sender":"oshima@chromium.org","recipients":["hashimoto@chromium.org","oshima@chromium.org","chromium-reviews@chromium.org"],"text":"http://codereview.chromium.org/7004029/diff/1/build/common.gypi\nFile build/common.gypi (right):\n\nhttp://codereview.chromium.org/7004029/diff/1/build/common.gypi#newcode568\nbuild/common.gypi:568: ['chromeos==1', {\nplease keep touchui=1. If one wants to use ibus on chromeos, he/she can set this manually.\n\nhttp://codereview.chromium.org/7004029/diff/1/views/ime/input_method_ibus.h\nFile views/ime/input_method_ibus.h (right):\n\nhttp://codereview.chromium.org/7004029/diff/1/views/ime/input_method_ibus.h#newcode45\nviews/ime/input_method_ibus.h:45: // 1) built with GYP_DEFINES=\"touchui=1\"\nplease add \" or,\"  at the end. same for the rest.\n\nhttp://codereview.chromium.org/7004029/diff/1/views/widget/native_widget_gtk.cc\nFile views/widget/native_widget_gtk.cc (right):\n\nhttp://codereview.chromium.org/7004029/diff/1/views/widget/native_widget_gtk.cc#newcode48\nviews/widget/native_widget_gtk.cc:48: #if defined(HAVE_IBUS)\nthis change adds gtk impl to touch. could you please change so that\ntouch won't compile  & link gtk?","disapproval":false,"date":"2011-05-20 21:47:31.077336","approval":false},{"sender":"hashimoto@chromium.org","recipients":["hashimoto@chromium.org","oshima@chromium.org","chromium-reviews@chromium.org"],"text":"http://codereview.chromium.org/7004029/diff/1/build/common.gypi\nFile build/common.gypi (right):\n\nhttp://codereview.chromium.org/7004029/diff/1/build/common.gypi#newcode568\nbuild/common.gypi:568: ['chromeos==1', {\nWhat 'use_ibus=1' does is simply adding IBus to dependencies and defining HAVE_IBUS.\nUnless TOUCH_UI is defined or --enable-inputmethod-ibus flag is set, IBus is not used even when 'use_ibus==1'.","disapproval":false,"date":"2011-05-20 22:18:13.586711","approval":false},{"sender":"oshima@chromium.org","recipients":["reply@chromiumcodereview.appspotmail.com"],"text":"On Fri, May 20, 2011 at 3:18 PM, <hashimoto@chromium.org> wrote:\n\n>\n> http://codereview.chromium.org/7004029/diff/1/build/common.gypi\n> File build/common.gypi (right):\n>\n> http://codereview.chromium.org/7004029/diff/1/build/common.gypi#newcode568\n> build/common.gypi:568: ['chromeos==1', {\n> What 'use_ibus=1' does is simply adding IBus to dependencies and\n> defining HAVE_IBUS.\n> Unless TOUCH_UI is defined or --enable-inputmethod-ibus flag is set,\n> IBus is not used even when 'use_ibus==1'.\n\n\nThis may cause issue to those who are building chrome outside of\nchroot. Will this build fine outside of chroot?\n\n\n>\n>\n> http://codereview.chromium.org/7004029/\n>\n","disapproval":false,"date":"2011-05-20 23:05:15.732031","approval":false},{"sender":"hashimoto@chromium.org","recipients":["hashimoto@chromium.org","oshima@chromium.org","chromium-reviews@chromium.org"],"text":"As you say, it causes problem outside chroot.\nKeeping touchui==1 seems good.","disapproval":false,"date":"2011-05-20 23:19:47.809253","approval":false},{"sender":"oshima@chromium.org","recipients":["hashimoto@chromium.org","oshima@chromium.org","chromium-reviews@chromium.org"],"text":"http://codereview.chromium.org/7004029/diff/3005/build/common.gypi\nFile build/common.gypi (right):\n\nhttp://codereview.chromium.org/7004029/diff/3005/build/common.gypi#newcode567\nbuild/common.gypi:567: # Set 1 to enable ibus support.\nSet use_ibus to 1 to enable ...\n\nhttp://codereview.chromium.org/7004029/diff/3005/views/widget/native_widget_gtk.cc\nFile views/widget/native_widget_gtk.cc (right):\n\nhttp://codereview.chromium.org/7004029/diff/3005/views/widget/native_widget_gtk.cc#newcode627\nviews/widget/native_widget_gtk.cc:627: }\n} else {\n\nhttp://codereview.chromium.org/7004029/diff/3005/views/widget/native_widget_gtk.cc#newcode629\nviews/widget/native_widget_gtk.cc:629: input_method_.reset(new InputMethodGtk(this));\nwon't this causes link error in touch build? (since you excluded gtk for touch)","disapproval":false,"date":"2011-05-22 01:18:56.893115","approval":false},{"sender":"hashimoto@chromium.org","recipients":["hashimoto@chromium.org","oshima@chromium.org","chromium-reviews@chromium.org"],"text":"Sorry for my carelessness.\nI fixed these problems and checked that the builds for \"touchui=1\" and \"use_ibus=0\" success.","disapproval":false,"date":"2011-05-23 07:34:24.770552","approval":false},{"sender":"hashimoto@chromium.org","recipients":["hashimoto@chromium.org","oshima@chromium.org","chromium-reviews@chromium.org"],"text":"Inserted one single space between \"if\" and \"{\"","disapproval":false,"date":"2011-05-23 17:43:11.720561","approval":false},{"sender":"oshima@chromium.org","recipients":["hashimoto@chromium.org","oshima@chromium.org","chromium-reviews@chromium.org"],"text":"LGTM with nits\n\nhttp://codereview.chromium.org/7004029/diff/15001/views/widget/native_widget_gtk.cc\nFile views/widget/native_widget_gtk.cc (right):\n\nhttp://codereview.chromium.org/7004029/diff/15001/views/widget/native_widget_gtk.cc#newcode631\nviews/widget/native_widget_gtk.cc:631: }\nnit: nuke {}","disapproval":false,"date":"2011-05-23 20:27:19.791488","approval":true}],"owner_email":"hashimoto@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"hashimoto","subject":"Fix to make InputMethodIBus usable on every ChromeOS device (even without TouchUI)","created":"2011-05-20 03:02:16.448573","patchsets":[1,4002,3005,11001,15001,18001],"modified":"2011-05-24 02:36:29.086472","closed":true,"commit":false,"issue":7004029}