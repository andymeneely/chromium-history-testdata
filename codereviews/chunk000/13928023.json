{"description":"Pass DevToolsClient* to DevToolsEventListener callbacks. DevToolsClient returns its WebView id.\n\nContributed by klm@google.com (Michael Klepikov)\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=193489","cc":["chromium-reviews@chromium.org","vsevik@chromium.org","yurys@chromium.org","pfeldman@chromium.org"],"reviewers":["kkania@chromium.org"],"messages":[{"sender":"klm@google.com","recipients":["klm@google.com","kkania@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","yurys@chromium.org","pfeldman@chromium.org"],"text":"Ken, please review -- this change is per our email conversation.","disapproval":false,"date":"2013-04-09 20:18:46.791060","approval":false},{"sender":"kkania@chromium.org","recipients":["klm@google.com","kkania@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","yurys@chromium.org","pfeldman@chromium.org"],"text":"https://codereview.chromium.org/13928023/diff/1/chrome/test/chromedriver/chrome/frame_tracker.cc\nFile chrome/test/chromedriver/chrome/frame_tracker.cc (right):\n\nhttps://codereview.chromium.org/13928023/diff/1/chrome/test/chromedriver/chrome/frame_tracker.cc#newcode30\nchrome/test/chromedriver/chrome/frame_tracker.cc:30: Status FrameTracker::OnConnected(DevToolsClient *) {\nno space\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/devtools_client.h\nFile chrome/test/chromedriver/chrome/devtools_client.h (right):\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/devtools_client.h#newcode47\nchrome/test/chromedriver/chrome/devtools_client.h:47: virtual const std::string& GetWebViewId() = 0;\nthe DevToolsClient isn't supposed to know about any WebView concepts. Just rename this to GetId, and go ahead and move it up after the destructor.\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/devtools_client_impl.h\nFile chrome/test/chromedriver/chrome/devtools_client_impl.h (right):\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/devtools_client_impl.h#newcode57\nchrome/test/chromedriver/chrome/devtools_client_impl.h:57: const std::string& web_view_id,\njust call this the id\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/dom_tracker.h\nFile chrome/test/chromedriver/chrome/dom_tracker.h (right):\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/dom_tracker.h#newcode38\nchrome/test/chromedriver/chrome/dom_tracker.h:38: DevToolsClient* client_;\nhow about delete these and use the passed client instead in the DevToolsEventListeners. you can still pass in the client into the constructor for it to add itself as a listener\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/stub_devtools_client.cc\nFile chrome/test/chromedriver/chrome/stub_devtools_client.cc (right):\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/stub_devtools_client.cc#newcode42\nchrome/test/chromedriver/chrome/stub_devtools_client.cc:42: static const std::string id = \"stub-webview-id\";\nthis is disallowed by http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Static_and_Global_Variables#Static_and_Global_Variables","disapproval":false,"date":"2013-04-09 22:46:35.553550","approval":false},{"sender":"klm@google.com","recipients":["klm@google.com","kkania@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","yurys@chromium.org","pfeldman@chromium.org"],"text":"Thanks! PTAL.\n\nhttps://codereview.chromium.org/13928023/diff/1/chrome/test/chromedriver/chrome/frame_tracker.cc\nFile chrome/test/chromedriver/chrome/frame_tracker.cc (right):\n\nhttps://codereview.chromium.org/13928023/diff/1/chrome/test/chromedriver/chrome/frame_tracker.cc#newcode30\nchrome/test/chromedriver/chrome/frame_tracker.cc:30: Status FrameTracker::OnConnected(DevToolsClient *) {\nOn 2013/04/09 22:46:35, kkania wrote:\n> no space\n\nAlready done in patchset 3, also added missing arg names.\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/devtools_client.h\nFile chrome/test/chromedriver/chrome/devtools_client.h (right):\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/devtools_client.h#newcode47\nchrome/test/chromedriver/chrome/devtools_client.h:47: virtual const std::string& GetWebViewId() = 0;\nOn 2013/04/09 22:46:35, kkania wrote:\n> the DevToolsClient isn't supposed to know about any WebView concepts. Just\n> rename this to GetId, and go ahead and move it up after the destructor.\n\nDone.\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/devtools_client_impl.h\nFile chrome/test/chromedriver/chrome/devtools_client_impl.h (right):\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/devtools_client_impl.h#newcode57\nchrome/test/chromedriver/chrome/devtools_client_impl.h:57: const std::string& web_view_id,\nOn 2013/04/09 22:46:35, kkania wrote:\n> just call this the id\n\nDone.\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/dom_tracker.h\nFile chrome/test/chromedriver/chrome/dom_tracker.h (right):\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/dom_tracker.h#newcode38\nchrome/test/chromedriver/chrome/dom_tracker.h:38: DevToolsClient* client_;\nOn 2013/04/09 22:46:35, kkania wrote:\n> how about delete these and use the passed client instead in the\n> DevToolsEventListeners. you can still pass in the client into the constructor\n> for it to add itself as a listener\n\nDone here and in frame_tracker.\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/stub_devtools_client.cc\nFile chrome/test/chromedriver/chrome/stub_devtools_client.cc (right):\n\nhttps://codereview.chromium.org/13928023/diff/3007/chrome/test/chromedriver/chrome/stub_devtools_client.cc#newcode42\nchrome/test/chromedriver/chrome/stub_devtools_client.cc:42: static const std::string id = \"stub-webview-id\";\nOn 2013/04/09 22:46:35, kkania wrote:\n> this is disallowed by\n> http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Static_and_Global_Variables#Static_and_Global_Variables\n\nReplaced with a member var, added a constructor for completeness. Will use that constructor in the event logger unit test where I care about several fake clients with different ids.\n\nSimilarly replaced in web_view_impl_unittest.cc.","disapproval":false,"date":"2013-04-10 03:09:00.025170","approval":false},{"sender":"kkania@chromium.org","recipients":["klm@google.com","kkania@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","yurys@chromium.org","pfeldman@chromium.org"],"text":"lgtm","disapproval":false,"date":"2013-04-10 17:07:28.602300","approval":true},{"sender":"commit-bot@chromium.org","recipients":["klm@google.com","kkania@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","yurys@chromium.org","pfeldman@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/klm@google.com/13928023/16001","disapproval":false,"date":"2013-04-10 17:31:24.564990","approval":false},{"sender":"commit-bot@chromium.org","recipients":["klm@google.com","kkania@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","yurys@chromium.org","pfeldman@chromium.org"],"text":"Change committed as 193489","disapproval":false,"date":"2013-04-10 23:04:20.174330","approval":false}],"owner_email":"klm@google.com","private":false,"base_url":"https://src.chromium.org/chrome/trunk/src/","owner":"klm","subject":"Pass DevToolsClient* to DevToolsEventListener callbacks. DevToolsClient returns its WebView id.","created":"2013-04-09 20:13:50.179350","patchsets":[1,27,3007,16001],"modified":"2013-04-10 23:04:20.301780","closed":true,"commit":false,"issue":13928023}