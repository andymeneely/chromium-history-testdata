{"files":{"chrome/test/functional/sync.py":{"status":"M    ","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":20,"messages":[],"id":30005,"is_binary":false},"chrome/test/functional/test_utils.py":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":17,"num_removed":0,"messages":[],"id":30006,"is_binary":false},"chrome/test/pyautolib/pyauto.py":{"status":"M    ","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":128,"num_removed":0,"messages":[{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"All this new code is too close to the top. Move it further down, after all the setUp/tearDown and other @staticmethod's in this class","draft":false,"lineno":156,"date":"2011-10-19 06:35:48.085068","left":false},{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"\"and sets\" -> with","draft":false,"lineno":160,"date":"2011-10-19 06:35:48.085230","left":false},{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"This is a repeat of what you said in the previous line. Remove this line.\n\nAdd: The new browser is launched with its own fresh profile.","draft":false,"lineno":162,"date":"2011-10-19 06:35:48.085381","left":false},{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"flags -> extra","draft":false,"lineno":166,"date":"2011-10-19 06:35:48.085559","left":false},{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"When is new browser's tearDown called?","draft":false,"lineno":173,"date":"2011-10-19 06:35:48.085803","left":false},{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"I don't think it's necessary to have this global anymore. Find a way to make it not so. Use member vars if needed. Make the testserver launching be similar to StartFTPServer()","draft":false,"lineno":193,"date":"2011-10-19 06:35:48.085973","left":false},{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"Why all caps?\n\nInclude testserver.py in this var.","draft":false,"lineno":215,"date":"2011-10-19 06:35:48.086124","left":false},{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"Instead of launching the testserver yourself, why not use the swigged TestServer class with TYPE_SYNC? Make it like StartFTPServer()","draft":false,"lineno":231,"date":"2011-10-19 06:35:48.086273","left":false},{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"Why not move this inside LaunchNewBrowser()?","draft":false,"lineno":257,"date":"2011-10-19 06:35:48.086423","left":false},{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"why? It would create a fresh clean profile of its own anyway","draft":false,"lineno":261,"date":"2011-10-19 06:35:48.086642","left":false},{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"this should not be necessary. A test should be able to launch and destroy all that's needed, like StartFTPServer usage.","draft":false,"lineno":4409,"date":"2011-10-19 06:35:48.086834","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"On 2011/10/19 06:35:48, Nirnimesh wrote:\n> All this new code is too close to the top. Move it further down, after all the\n> setUp/tearDown and other @staticmethod's in this class\n\nDone.","draft":false,"lineno":156,"date":"2011-10-20 20:19:49.047632","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"On 2011/10/19 06:35:48, Nirnimesh wrote:\n> \"and sets\" -> with\n\nDone.","draft":false,"lineno":160,"date":"2011-10-20 20:19:49.047791","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"On 2011/10/19 06:35:48, Nirnimesh wrote:\n> This is a repeat of what you said in the previous line. Remove this line.\n> \n> Add: The new browser is launched with its own fresh profile.\n\nDone.","draft":false,"lineno":162,"date":"2011-10-20 20:19:49.047938","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"On 2011/10/19 06:35:48, Nirnimesh wrote:\n> flags -> extra\n\nDone.","draft":false,"lineno":166,"date":"2011-10-20 20:19:49.048082","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"The browser tear down was called in the last line in testAddBookmarkAndVerifySync() function within bookmarks.py.\nThe line was new_browser's super class tearDown(). The NewBrowser didn't need to implement tearDown().\n\nI changed this a little by adding a destructor __del__() in ExtraBrowser() which just calls the pyUITest.tearDown() and then the superclasses's destructor. This way when the new_browser var is out of scope, tearDown is called before it is destroyed. This is done by explicitly calling the destructor 'del new_browser'\n\nOn 2011/10/19 06:35:48, Nirnimesh wrote:\n> When is new browser's tearDown called?\n\n","draft":false,"lineno":173,"date":"2011-10-20 20:19:49.048319","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"On 2011/10/19 06:35:48, Nirnimesh wrote:\n> I don't think it's necessary to have this global anymore. Find a way to make it\n> not so. Use member vars if needed. Make the testserver launching be similar to\n> StartFTPServer()\n\nDone.","draft":false,"lineno":193,"date":"2011-10-20 20:19:49.048500","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"On 2011/10/19 06:35:48, Nirnimesh wrote:\n> Why all caps?\n> \n> Include testserver.py in this var.\n\nDone.","draft":false,"lineno":215,"date":"2011-10-20 20:19:49.048656","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"I tried to make it like StartFTPServer by using 'sync_server = pyautolib.TestServer(pyautolib.TestServer.TYPE_SYNC, pyautolib.FilePath(\"))' While it did create a new process running testserver.py with the same params as in subprocess.fopen I couldn't find a way to get the ports (http and xmpp).\n\nThe way dtu implemented this it takes in one flag so it launches the server using pipe --start-pipe=x. Is there a way to use this and get the two ports needed to start the sync server?\n\n\nOn 2011/10/19 06:35:48, Nirnimesh wrote:\n> Instead of launching the testserver yourself, why not use the swigged TestServer\n> class with TYPE_SYNC? Make it like StartFTPServer()\n\n","draft":false,"lineno":231,"date":"2011-10-20 20:19:49.048817","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"This can't be done because if ChromeFlagsForSyncTestServer() is inside LaunchNewBrowser() then we wont be able to call this function in the main test browser (browser 1). This function is also used in ExtraChfromeFlags() and not only in the new_browser.\n\n\nOn 2011/10/19 06:35:48, Nirnimesh wrote:\n> Why not move this inside LaunchNewBrowser()?\n\n","draft":false,"lineno":257,"date":"2011-10-20 20:19:49.049049","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"I created this argument based on Ragu's manual steps to start the multiple browsers in the sync server. \n\nOn 2011/10/19 06:35:48, Nirnimesh wrote:\n> why? It would create a fresh clean profile of its own anyway\n\n","draft":false,"lineno":261,"date":"2011-10-20 20:19:49.049320","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"On 2011/10/19 06:35:48, Nirnimesh wrote:\n> this should not be necessary. A test should be able to launch and destroy all\n> that's needed, like StartFTPServer usage.\n\nDone.","draft":false,"lineno":4409,"date":"2011-10-20 20:19:49.049548","left":false},{"author":"Nirnimesh","author_email":"nirnimesh@chromium.org","text":"How does Raghu use them for sync tests? (sync uses the same TestServer code)","draft":false,"lineno":231,"date":"2011-10-21 01:44:29.661830","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"Changed the use of the destructor from 'del new_browser' to 'new_browser.tearDown(). ","draft":false,"lineno":173,"date":"2011-10-24 19:34:08.388113","left":false},{"author":"dyu1","author_email":"dyu@chromium.org","text":"removed the user_data_dir flag.","draft":false,"lineno":261,"date":"2011-10-24 19:34:08.388395","left":false}],"id":30007,"is_binary":false},"chrome/test/functional/bookmarks.py":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":71,"num_removed":0,"messages":[],"id":30004,"is_binary":false}},"owner_email":"dyu@chromium.org","owner":"dyu1","message":"''","try_job_results":[],"created":"2011-10-16 22:35:29.729995","url":null,"num_comments":25,"modified":"2011-10-24 19:34:08.423389","patchset":34001,"issue":8224025}