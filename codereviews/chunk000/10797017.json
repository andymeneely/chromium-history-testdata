{"description":"base: Make ScopedVector::clear() destroy elements.\n\nThis makes ScopedVector's clear() method destroy the\nelements before clearing the internal vector, matching the\nbehavior of the erase() method.  I'm moving clear()'s\nprevious element-preserving behavior into a new weak_clear()\nmethod, matching weak_erase().\n\nI'm also removing ScopedVector::reset(), as it duplicated\nclear()'s new behavior and isn't a part of std::vector.\n\nBUG=137909\nTEST=added\n\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=147360","cc":["chromium-reviews@chromium.org","erikwright@chromium.org","brettw-cc@chromium.org","tfarina@chromium.org"],"reviewers":["brettw@chromium.org","sky@chromium.org","pkasting@chromium.org","willchan@chromium.org","akalin@chromium.org"],"messages":[{"sender":"derat@chromium.org","recipients":["derat@chromium.org","brettw@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","erikwright@chromium.org","brettw-cc@chromium.org","tfarina@chromium.org"],"text":"brettw -> base\nsky -> ui\n\nPatch set 1 is just a rename of clear() to weak_clear().  The Chrome OS build compiled locally, but I started some try jobs to hopefully catch any additional callers of clear() that expect the old behavior.","disapproval":false,"date":"2012-07-18 20:52:39.837930","approval":false},{"sender":"sky@chromium.org","recipients":["derat@chromium.org","brettw@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","erikwright@chromium.org","brettw-cc@chromium.org","tfarina@chromium.org"],"text":"LGTM\n\nhttp://codereview.chromium.org/10797017/diff/7001/base/memory/scoped_vector.h\nFile base/memory/scoped_vector.h (right):\n\nhttp://codereview.chromium.org/10797017/diff/7001/base/memory/scoped_vector.h#newcode85\nbase/memory/scoped_vector.h:85: void clear() { STLDeleteElements(&v); }\nAny chance we could get rid of one of reset or clear?","disapproval":false,"date":"2012-07-18 21:24:38.122030","approval":true},{"sender":"pkasting@chromium.org","recipients":["derat@chromium.org","brettw@chromium.org","sky@chromium.org","pkasting@chromium.org","chromium-reviews@chromium.org","erikwright@chromium.org","brettw-cc@chromium.org","tfarina@chromium.org"],"text":"http://codereview.chromium.org/10797017/diff/7001/base/memory/scoped_vector.h\nFile base/memory/scoped_vector.h (right):\n\nhttp://codereview.chromium.org/10797017/diff/7001/base/memory/scoped_vector.h#newcode85\nbase/memory/scoped_vector.h:85: void clear() { STLDeleteElements(&v); }\nOn 2012/07/18 21:24:38, sky wrote:\n> Any chance we could get rid of one of reset or clear?\n\n(I suggest nuking reset())","disapproval":false,"date":"2012-07-18 21:26:32.156640","approval":false},{"sender":"derat@chromium.org","recipients":["derat@chromium.org","brettw@chromium.org","sky@chromium.org","pkasting@chromium.org","chromium-reviews@chromium.org","erikwright@chromium.org","brettw-cc@chromium.org","tfarina@chromium.org"],"text":"On 2012/07/18 21:26:32, Peter Kasting wrote:\n> http://codereview.chromium.org/10797017/diff/7001/base/memory/scoped_vector.h\n> File base/memory/scoped_vector.h (right):\n> \n> http://codereview.chromium.org/10797017/diff/7001/base/memory/scoped_vector.h#newcode85\n> base/memory/scoped_vector.h:85: void clear() { STLDeleteElements(&v); }\n> On 2012/07/18 21:24:38, sky wrote:\n> > Any chance we could get rid of one of reset or clear?\n> \n> (I suggest nuking reset())\n\nSure, in-progress (Brett suggested the same thing).","disapproval":false,"date":"2012-07-18 21:32:37.388420","approval":false},{"sender":"derat@chromium.org","recipients":["derat@chromium.org","brettw@chromium.org","sky@chromium.org","pkasting@chromium.org","willchan@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","erikwright@chromium.org","brettw-cc@chromium.org","tfarina@chromium.org"],"text":"willchan -> net, chrome/browser/net\nakalin -> chrome/browser/sync","disapproval":false,"date":"2012-07-18 21:55:03.130190","approval":false},{"sender":"willchan@chromium.org","recipients":["derat@chromium.org","brettw@chromium.org","sky@chromium.org","pkasting@chromium.org","willchan@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","erikwright@chromium.org","brettw-cc@chromium.org","tfarina@chromium.org"],"text":"Thanks for the change. LGTM.","disapproval":false,"date":"2012-07-18 22:00:37.704920","approval":true},{"sender":"akalin@chromium.org","recipients":["derat@chromium.org","brettw@chromium.org","sky@chromium.org","pkasting@chromium.org","willchan@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","erikwright@chromium.org","brettw-cc@chromium.org","tfarina@chromium.org"],"text":"sync lgtm","disapproval":false,"date":"2012-07-18 22:00:45.979010","approval":true},{"sender":"brettw@chromium.org","recipients":["derat@chromium.org","brettw@chromium.org","sky@chromium.org","pkasting@chromium.org","willchan@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","erikwright@chromium.org","brettw-cc@chromium.org","tfarina@chromium.org"],"text":"LGTM in case you still need me.","disapproval":false,"date":"2012-07-18 22:01:50.726460","approval":true},{"sender":"commit-bot@chromium.org","recipients":["derat@chromium.org","brettw@chromium.org","sky@chromium.org","pkasting@chromium.org","willchan@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","erikwright@chromium.org","brettw-cc@chromium.org","tfarina@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/derat@chromium.org/10797017/10002","disapproval":false,"date":"2012-07-18 23:33:27.585530","approval":false},{"sender":"commit-bot@chromium.org","recipients":["derat@chromium.org","brettw@chromium.org","sky@chromium.org","pkasting@chromium.org","willchan@chromium.org","akalin@chromium.org","chromium-reviews@chromium.org","erikwright@chromium.org","brettw-cc@chromium.org","tfarina@chromium.org"],"text":"Change committed as 147360","disapproval":false,"date":"2012-07-19 00:39:02.131800","approval":false}],"owner_email":"derat@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"Daniel Erat","subject":"base: Make ScopedVector::clear() destroy elements.","created":"2012-07-18 20:44:17.552670","patchsets":[1,7001,2003,5002,9006,10002],"modified":"2012-07-19 00:39:02.541220","closed":true,"commit":false,"issue":10797017}