{"description":"Change ExtensionActionContextMenu to a simple controller class\n\nCurrently ExtensionActionContextMenu derives from NSMenu. With this CL\nit now derives from NSObject and simply populates a given menu.\n\nThis is helpful for the info bar refactoring work where it's useful\nto be able to delay populating the context menu.\n\nBUG=62154\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=219705","cc":["chromium-reviews@chromium.org","chromium-apps-reviews@chromium.org","extensions-reviews@chromium.org","pkasting@chromium.org"],"reviewers":["rsesek@chromium.org"],"messages":[{"sender":"sail@chromium.org","recipients":["sail@chromium.org","rsesek@chromium.org","chromium-reviews@chromium.org","chromium-apps-reviews@chromium.org","extensions-reviews@chromium.org","pkasting@chromium.org"],"text":"","disapproval":false,"date":"2013-08-25 19:48:58.482760","approval":false},{"sender":"rsesek@chromium.org","recipients":["sail@chromium.org","rsesek@chromium.org","chromium-reviews@chromium.org","chromium-apps-reviews@chromium.org","extensions-reviews@chromium.org","pkasting@chromium.org"],"text":"https://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h (left):\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h#oldcode58\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h:58: // Initializes and returns a context menu for the given extension and browser.\nshould still be documented\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h (right):\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h#newcode20\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h:20: // Controller for context menus used by any UI components that require it.\nThis comment feels lacking.\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h#newcode41\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h:41: - (void)populateMenu:(NSMenu*)menu;\ndocument\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm (right):\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm#newcode7\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm:7: #include \"base/prefs/pref_change_registrar.h\"\nIWYU\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm#newcode46\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm:46: // A class that loads the extension icon on the I/O thread before showing the\nI don't see anything about icons here?\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm (right):\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm#newcode37\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm:37: l10n_util::GetNSStringWithFixup(IDS_EXTENSION_ACTION_INSPECT_POPUP)];\nnit: only indent 4 spaces","disapproval":false,"date":"2013-08-26 13:44:08.087410","approval":false},{"sender":"sail@chromium.org","recipients":["sail@chromium.org","rsesek@chromium.org","chromium-reviews@chromium.org","chromium-apps-reviews@chromium.org","extensions-reviews@chromium.org","pkasting@chromium.org"],"text":"https://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h (left):\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h#oldcode58\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h:58: // Initializes and returns a context menu for the given extension and browser.\nOn 2013/08/26 13:44:08, rsesek wrote:\n> should still be documented\n\nDone.\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h (right):\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h#newcode20\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h:20: // Controller for context menus used by any UI components that require it.\nOn 2013/08/26 13:44:08, rsesek wrote:\n> This comment feels lacking.\n\nDone.\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h#newcode41\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.h:41: - (void)populateMenu:(NSMenu*)menu;\nOn 2013/08/26 13:44:08, rsesek wrote:\n> document\n\nDone.\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm (right):\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm#newcode7\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm:7: #include \"base/prefs/pref_change_registrar.h\"\nOn 2013/08/26 13:44:08, rsesek wrote:\n> IWYU\n\nDone.\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm#newcode46\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm:46: // A class that loads the extension icon on the I/O thread before showing the\nOn 2013/08/26 13:44:08, rsesek wrote:\n> I don't see anything about icons here?\n\nDone.\nRemoved reference to icon.\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm (right):\n\nhttps://codereview.chromium.org/23295032/diff/5001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm#newcode37\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm:37: l10n_util::GetNSStringWithFixup(IDS_EXTENSION_ACTION_INSPECT_POPUP)];\nOn 2013/08/26 13:44:08, rsesek wrote:\n> nit: only indent 4 spaces\n\nDone.","disapproval":false,"date":"2013-08-26 18:03:20.816160","approval":false},{"sender":"rsesek@chromium.org","recipients":["sail@chromium.org","rsesek@chromium.org","chromium-reviews@chromium.org","chromium-apps-reviews@chromium.org","extensions-reviews@chromium.org","pkasting@chromium.org"],"text":"LGTM\n\nhttps://codereview.chromium.org/23295032/diff/25001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm (right):\n\nhttps://codereview.chromium.org/23295032/diff/25001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm#newcode23\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm:23: #include \"chrome/browser/ui/cocoa/info_bubble_view.h\"\nI think this list of includes can be very heavily trimmed.\n\nhttps://codereview.chromium.org/23295032/diff/25001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm (right):\n\nhttps://codereview.chromium.org/23295032/diff/25001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm#newcode37\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm:37: l10n_util::GetNSStringWithFixup(IDS_EXTENSION_ACTION_INSPECT_POPUP)];\nnit: indent 2 more","disapproval":false,"date":"2013-08-26 18:57:13.202380","approval":true},{"sender":"sail@chromium.org","recipients":["sail@chromium.org","rsesek@chromium.org","chromium-reviews@chromium.org","chromium-apps-reviews@chromium.org","extensions-reviews@chromium.org","pkasting@chromium.org"],"text":"https://codereview.chromium.org/23295032/diff/25001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm (right):\n\nhttps://codereview.chromium.org/23295032/diff/25001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm#newcode23\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller.mm:23: #include \"chrome/browser/ui/cocoa/info_bubble_view.h\"\nOn 2013/08/26 18:57:13, rsesek wrote:\n> I think this list of includes can be very heavily trimmed.\n\nDone.\n\nhttps://codereview.chromium.org/23295032/diff/25001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm\nFile chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm (right):\n\nhttps://codereview.chromium.org/23295032/diff/25001/chrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm#newcode37\nchrome/browser/ui/cocoa/extensions/extension_action_context_menu_controller_browsertest.mm:37: l10n_util::GetNSStringWithFixup(IDS_EXTENSION_ACTION_INSPECT_POPUP)];\nOn 2013/08/26 18:57:13, rsesek wrote:\n> nit: indent 2 more\n\nDone.","disapproval":false,"date":"2013-08-26 21:46:06.803070","approval":false},{"sender":"commit-bot@chromium.org","recipients":["sail@chromium.org","rsesek@chromium.org","chromium-reviews@chromium.org","chromium-apps-reviews@chromium.org","extensions-reviews@chromium.org","pkasting@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/sail@chromium.org/23295032/28001","disapproval":false,"date":"2013-08-26 22:07:20.838330","approval":false},{"sender":"commit-bot@chromium.org","recipients":["sail@chromium.org","rsesek@chromium.org","chromium-reviews@chromium.org","chromium-apps-reviews@chromium.org","extensions-reviews@chromium.org","pkasting@chromium.org"],"text":"Change committed as 219705","disapproval":false,"date":"2013-08-27 05:44:19.380360","approval":false}],"owner_email":"sail@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"sail","subject":"Change ExtensionActionContextMenu to a simple controller class","created":"2013-08-25 19:28:29.672430","patchsets":[1,2001,2002,5001,25001,28001],"modified":"2013-08-27 05:44:19.537870","closed":true,"commit":false,"issue":23295032}