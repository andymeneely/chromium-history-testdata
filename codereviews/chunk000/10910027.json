{"description":"Upstream latest changes from build/android/pylib.\n\n- test_result.py cleanup and related dependencies, including fixing\nrun_monkey_test.py\n- always use sharding for java tests\n- test package parser\n\nBUG=136980\nTEST=\n\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=155182","cc":["chromium-reviews@chromium.org","bulach+watch@chromium.org","yfriedman+watch@chromium.org","timurrrr+watch@chromium.org","peter+watch@chromium.org","glider+watch@chromium.org","ilevy+watch@chromium.org","bruening+watch@chromium.org"],"reviewers":["frankf@chromium.org","peter@chromium.org"],"messages":[{"sender":"bulach@chromium.org","recipients":["bulach@chromium.org","frankf@chromium.org","chromium-reviews@chromium.org","bulach+watch@chromium.org","yfriedman+watch@chromium.org","timurrrr+watch@chromium.org","peter+watch@chromium.org","glider+watch@chromium.org","ilevy+watch@chromium.org","bruening+watch@chromium.org"],"text":"","disapproval":false,"date":"2012-08-31 11:11:40.704800","approval":false},{"sender":"frankf@chromium.org","recipients":["bulach@chromium.org","frankf@chromium.org","chromium-reviews@chromium.org","bulach+watch@chromium.org","yfriedman+watch@chromium.org","timurrrr+watch@chromium.org","peter+watch@chromium.org","glider+watch@chromium.org","ilevy+watch@chromium.org","bruening+watch@chromium.org"],"text":"http://codereview.chromium.org/10910027/diff/2001/build/android/pylib/run_java_tests.py\nFile build/android/pylib/run_java_tests.py (right):\n\nhttp://codereview.chromium.org/10910027/diff/2001/build/android/pylib/run_java_tests.py#newcode174\nbuild/android/pylib/run_java_tests.py:174: print self.adb.Adb().SendCommand('install ' + apk.GetApkPath())\nPlease use ManagedInstall in adb_commands. What do you think of making android_commands a one-stop shop by providing a wrapper for SendCommand? It would encourage reuse of the commands there and remove direct dependency on AdbInterface.\n\nhttp://codereview.chromium.org/10910027/diff/2001/build/android/pylib/run_java_tests.py#newcode581\nbuild/android/pylib/run_java_tests.py:581: if len(attached_devices) > 1 and (coverage  or options.wait_for_debugger):\nCould you add a comment for the logic here? Perhaps even log the fact you're downgrading to one device.\n\nhttp://codereview.chromium.org/10910027/diff/2001/build/android/pylib/valgrind_tools.py\nFile build/android/pylib/valgrind_tools.py (right):\n\nhttp://codereview.chromium.org/10910027/diff/2001/build/android/pylib/valgrind_tools.py#newcode108\nbuild/android/pylib/valgrind_tools.py:108: \"\"\"AddressSanitizer wrapper must be added to all instrumented binaries,\nStyle nit. First sentence should be a one-liner followed by a blank line.","disapproval":false,"date":"2012-08-31 18:48:55.987940","approval":false},{"sender":"frankf@chromium.org","recipients":["bulach@chromium.org","frankf@chromium.org","chromium-reviews@chromium.org","bulach+watch@chromium.org","yfriedman+watch@chromium.org","timurrrr+watch@chromium.org","peter+watch@chromium.org","glider+watch@chromium.org","ilevy+watch@chromium.org","bruening+watch@chromium.org"],"text":"lgtm","disapproval":false,"date":"2012-09-04 20:46:28.156020","approval":true},{"sender":"bulach@chromium.org","recipients":["bulach@chromium.org","frankf@chromium.org","chromium-reviews@chromium.org","bulach+watch@chromium.org","yfriedman+watch@chromium.org","timurrrr+watch@chromium.org","peter+watch@chromium.org","glider+watch@chromium.org","ilevy+watch@chromium.org","bruening+watch@chromium.org"],"text":"thanks frank! all comments addressed, will CQ it soon..\n\nhttp://codereview.chromium.org/10910027/diff/2001/build/android/pylib/run_java_tests.py\nFile build/android/pylib/run_java_tests.py (right):\n\nhttp://codereview.chromium.org/10910027/diff/2001/build/android/pylib/run_java_tests.py#newcode174\nbuild/android/pylib/run_java_tests.py:174: print self.adb.Adb().SendCommand('install ' + apk.GetApkPath())\nOn 2012/08/31 18:48:56, frankf wrote:\n> Please use ManagedInstall in adb_commands. What do you think of making\n> android_commands a one-stop shop by providing a wrapper for SendCommand? It\n> would encourage reuse of the commands there and remove direct dependency on\n> AdbInterface.\n\nDone.\n\nhttp://codereview.chromium.org/10910027/diff/2001/build/android/pylib/run_java_tests.py#newcode581\nbuild/android/pylib/run_java_tests.py:581: if len(attached_devices) > 1 and (coverage  or options.wait_for_debugger):\nOn 2012/08/31 18:48:56, frankf wrote:\n> Could you add a comment for the logic here? Perhaps even log the fact you're\n> downgrading to one device.\n\nDone.\n\nhttp://codereview.chromium.org/10910027/diff/2001/build/android/pylib/valgrind_tools.py\nFile build/android/pylib/valgrind_tools.py (right):\n\nhttp://codereview.chromium.org/10910027/diff/2001/build/android/pylib/valgrind_tools.py#newcode108\nbuild/android/pylib/valgrind_tools.py:108: \"\"\"AddressSanitizer wrapper must be added to all instrumented binaries,\nOn 2012/08/31 18:48:56, frankf wrote:\n> Style nit. First sentence should be a one-liner followed by a blank line.\n\nDone.","disapproval":false,"date":"2012-09-06 09:49:05.194740","approval":false},{"sender":"peter@chromium.org","recipients":["bulach@chromium.org","frankf@chromium.org","peter@chromium.org","chromium-reviews@chromium.org","bulach+watch@chromium.org","yfriedman+watch@chromium.org","timurrrr+watch@chromium.org","peter+watch@chromium.org","glider+watch@chromium.org","ilevy+watch@chromium.org","bruening+watch@chromium.org"],"text":"LGTM\n\nhttp://codereview.chromium.org/10910027/diff/7003/build/android/pylib/run_java_tests.py\nFile build/android/pylib/run_java_tests.py (right):\n\nhttp://codereview.chromium.org/10910027/diff/7003/build/android/pylib/run_java_tests.py#newcode580\nbuild/android/pylib/run_java_tests.py:580: if len(attached_devices) > 1 and (coverage  or options.wait_for_debugger):\nnit: double space\n\nhttp://codereview.chromium.org/10910027/diff/7003/build/android/pylib/valgrind_tools.py\nFile build/android/pylib/valgrind_tools.py (right):\n\nhttp://codereview.chromium.org/10910027/diff/7003/build/android/pylib/valgrind_tools.py#newcode33\nbuild/android/pylib/valgrind_tools.py:33: if not scale or scale == 0.0 or scale == 1.0:\nmicro nit: \"not scale\" will also be true when scale == 0.0. You *could* omit the condition, but it is clearer. Maybe add it as the last condition, so we're consistent with the comment on line 34 and can maybe the comparison if scale == 1.0?\n\nhttp://codereview.chromium.org/10910027/diff/7003/build/android/pylib/valgrind_tools.py#newcode233\nbuild/android/pylib/valgrind_tools.py:233: 'asan': lambda x: AddressSanitizerTool(x),\nOut of interest: why do we need four spaces of indent here?","disapproval":false,"date":"2012-09-06 09:57:32.600950","approval":true},{"sender":"bulach@chromium.org","recipients":["bulach@chromium.org","frankf@chromium.org","peter@chromium.org","chromium-reviews@chromium.org","bulach+watch@chromium.org","yfriedman+watch@chromium.org","timurrrr+watch@chromium.org","peter+watch@chromium.org","glider+watch@chromium.org","ilevy+watch@chromium.org","bruening+watch@chromium.org"],"text":"comments addressed, cqing. thanks!\n\nhttp://codereview.chromium.org/10910027/diff/7003/build/android/pylib/run_java_tests.py\nFile build/android/pylib/run_java_tests.py (right):\n\nhttp://codereview.chromium.org/10910027/diff/7003/build/android/pylib/run_java_tests.py#newcode580\nbuild/android/pylib/run_java_tests.py:580: if len(attached_devices) > 1 and (coverage  or options.wait_for_debugger):\nOn 2012/09/06 09:57:32, Peter Beverloo wrote:\n> nit: double space\n\nDone.\n\nhttp://codereview.chromium.org/10910027/diff/7003/build/android/pylib/valgrind_tools.py\nFile build/android/pylib/valgrind_tools.py (right):\n\nhttp://codereview.chromium.org/10910027/diff/7003/build/android/pylib/valgrind_tools.py#newcode233\nbuild/android/pylib/valgrind_tools.py:233: 'asan': lambda x: AddressSanitizerTool(x),\nOn 2012/09/06 09:57:32, Peter Beverloo wrote:\n> Out of interest: why do we need four spaces of indent here?\n\npylint said it's a continuation, rather than a block on itself, I suppose..","disapproval":false,"date":"2012-09-06 11:06:07.978670","approval":false},{"sender":"commit-bot@chromium.org","recipients":["bulach@chromium.org","frankf@chromium.org","peter@chromium.org","chromium-reviews@chromium.org","bulach+watch@chromium.org","yfriedman+watch@chromium.org","timurrrr+watch@chromium.org","peter+watch@chromium.org","glider+watch@chromium.org","ilevy+watch@chromium.org","bruening+watch@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/bulach@chromium.org/10910027/10003","disapproval":false,"date":"2012-09-06 11:07:00.270690","approval":false},{"sender":"commit-bot@chromium.org","recipients":["bulach@chromium.org","frankf@chromium.org","peter@chromium.org","chromium-reviews@chromium.org","bulach+watch@chromium.org","yfriedman+watch@chromium.org","timurrrr+watch@chromium.org","peter+watch@chromium.org","glider+watch@chromium.org","ilevy+watch@chromium.org","bruening+watch@chromium.org"],"text":"Change committed as 155182","disapproval":false,"date":"2012-09-06 13:29:02.405960","approval":false}],"owner_email":"bulach@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"bulach","subject":"Upstream latest changes from build/android/pylib.","created":"2012-08-31 11:07:16.758120","patchsets":[2001,7003,10003],"modified":"2012-09-06 13:29:02.594620","closed":true,"commit":false,"issue":10910027}