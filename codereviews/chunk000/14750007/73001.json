{"files":{"chrome/common/render_messages.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":3,"messages":[],"id":60008,"is_binary":false},"chrome/browser/nacl_host/nacl_process_host.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":65,"num_removed":1,"messages":[{"author":"Justin Schuh","author_email":"jschuh@chromium.org","text":"This seems like unambiguously bad occurrence. At a minimum we should have a NOTREACHED, but maybe we should actually terminate the child process?","draft":false,"lineno":967,"date":"2013-05-23 01:02:32.788750","left":false},{"author":"Nick Bray (chromium)","author_email":"ncbray@chromium.org","text":"On 2013/05/23 01:02:32, Justin Schuh wrote:\n> This seems like unambiguously bad occurrence. At a minimum we should have a\n> NOTREACHED, but maybe we should actually terminate the child process?\n\nSee the above comment.  Bounding the cache size implies that it may be valid for the query to fail. :/","draft":false,"lineno":967,"date":"2013-05-23 16:44:11.875470","left":false},{"author":"bsy_cr","author_email":"bsy@chromium.org","text":"On 2013/05/23 16:44:11, Nick Bray (chromium) wrote:\n> On 2013/05/23 01:02:32, Justin Schuh wrote:\n> > This seems like unambiguously bad occurrence. At a minimum we should have a\n> > NOTREACHED, but maybe we should actually terminate the child process?\n> \n> See the above comment.  Bounding the cache size implies that it may be valid for\n> the query to fail. :/\n\nJust because it's valid doesn't mean it's likely.  We should do (upper bound) estimates of number of tabs -- hundreds? -- that might re-open when the browser restarts, and the percentage of them that might involve NaCl -- 5%? 10%? -- and the number of manifest entries -- 64? 128? -- to get an estimate for when the cache might hit size limits.  Assume worse case behavior (not serial startup), etc.\n\nFurthermore, since the cache doesn't actually hold file descriptors (limited global resources) any more and just hold file tokens, that argument for keeping the cache really small no longer apply.  The only limit is memory, albeit still a limited resource, but much less limiting.  So, I'd like to see at least a ballpark analysis/discussion for the proper size for the cache, its cost in memory usage, versus the likelihood of a valid cache miss.  If the probability of a valid cache miss is low, then this could be a useful signal.  Even if it is not super low, a sharp spike in the cache miss rate is a signal that there might be something \"interesting\" going on in the wild.\n\nCould we have UMA or other feedback statistics for this?  At least a comment about the considerations, please.","draft":false,"lineno":967,"date":"2013-05-23 17:57:24.690130","left":false},{"author":"Nick Bray (chromium)","author_email":"ncbray@chromium.org","text":"On 2013/05/23 17:57:24, bsy_cr wrote:\n> On 2013/05/23 16:44:11, Nick Bray (chromium) wrote:\n> > On 2013/05/23 01:02:32, Justin Schuh wrote:\n> > > This seems like unambiguously bad occurrence. At a minimum we should have a\n> > > NOTREACHED, but maybe we should actually terminate the child process?\n> > \n> > See the above comment.  Bounding the cache size implies that it may be valid\n> for\n> > the query to fail. :/\n> \n> Just because it's valid doesn't mean it's likely.  We should do (upper bound)\n> estimates of number of tabs -- hundreds? -- that might re-open when the browser\n> restarts, and the percentage of them that might involve NaCl -- 5%? 10%? -- and\n> the number of manifest entries -- 64? 128? -- to get an estimate for when the\n> cache might hit size limits.  Assume worse case behavior (not serial startup),\n> etc.\n> \n> Furthermore, since the cache doesn't actually hold file descriptors (limited\n> global resources) any more and just hold file tokens, that argument for keeping\n> the cache really small no longer apply.  The only limit is memory, albeit still\n> a limited resource, but much less limiting.  So, I'd like to see at least a\n> ballpark analysis/discussion for the proper size for the cache, its cost in\n> memory usage, versus the likelihood of a valid cache miss.  If the probability\n> of a valid cache miss is low, then this could be a useful signal.  Even if it is\n> not super low, a sharp spike in the cache miss rate is a signal that there might\n> be something \"interesting\" going on in the wild.\n> \n> Could we have UMA or other feedback statistics for this?  At least a comment\n> about the considerations, please.\n\nDone.","draft":false,"lineno":967,"date":"2013-05-24 16:54:28.822120","left":false}],"id":60005,"is_binary":false},"chrome/browser/nacl_host/nacl_process_host.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[],"id":60006,"is_binary":false},"ppapi/native_client/src/trusted/plugin/plugin.h":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":4,"messages":[],"id":60020,"is_binary":false},"ppapi/native_client/src/trusted/plugin/plugin.cc":{"status":"M","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":27,"num_removed":30,"messages":[],"id":60019,"is_binary":false},"chrome/nacl/nacl_validation_query_unittest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":0,"messages":[],"id":60013,"is_binary":false},"chrome/common/nacl_messages.h":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":0,"messages":[],"id":60007,"is_binary":false},"ppapi/c/private/ppb_nacl_private.h":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":19,"messages":[],"id":60016,"is_binary":false},"ppapi/native_client/src/trusted/plugin/service_runtime.cc":{"status":"M","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":18,"messages":[],"id":60021,"is_binary":false},"ppapi/api/private/ppb_nacl_private.idl":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":7,"messages":[],"id":60015,"is_binary":false},"chrome/nacl/nacl_validation_db.h":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":60010,"is_binary":false},"chrome/renderer/pepper/ppb_nacl_private_impl.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":7,"messages":[],"id":60014,"is_binary":false},"chrome/nacl/nacl_validation_query.cc":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":27,"num_removed":0,"messages":[],"id":60011,"is_binary":false},"ppapi/native_client/src/trusted/plugin/file_downloader.h":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":3,"messages":[],"id":60018,"is_binary":false},"chrome/browser/nacl_host/nacl_browser.h":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":38,"num_removed":0,"messages":[],"id":60003,"is_binary":false},"ppapi/native_client/src/trusted/plugin/service_runtime.h":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":4,"messages":[],"id":60022,"is_binary":false},"chrome/nacl/nacl_validation_query.h":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":60012,"is_binary":false},"ppapi/native_client/src/trusted/plugin/file_downloader.cc":{"status":"M","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":6,"messages":[],"id":60017,"is_binary":false},"chrome/browser/nacl_host/nacl_browser.cc":{"status":"M","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":77,"num_removed":0,"messages":[],"id":60002,"is_binary":false},"chrome/browser/nacl_host/nacl_file_host.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":36,"num_removed":30,"messages":[],"id":60004,"is_binary":false},"chrome/nacl/nacl_listener.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":33,"num_removed":0,"messages":[],"id":60009,"is_binary":false}},"owner_email":"ncbray@chromium.org","owner":"Nick Bray (chromium)","message":"Missed fixes","try_job_results":[],"created":"2013-05-22 23:50:50.377070","url":null,"num_comments":4,"modified":"2013-05-24 16:54:28.873000","patchset":73001,"issue":14750007}