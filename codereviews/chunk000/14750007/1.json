{"files":{"ppapi/native_client/src/trusted/plugin/plugin.cc":{"status":"M","num_chunks":6,"no_base_file":false,"property_changes":"","num_added":26,"num_removed":30,"messages":[],"id":19,"is_binary":false},"ppapi/api/private/ppb_nacl_private.idl":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":7,"messages":[],"id":15,"is_binary":false},"ppapi/native_client/src/trusted/plugin/file_downloader.cc":{"status":"M","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":6,"messages":[{"author":"dmichael","author_email":"dmichael@chromium.org","text":"I find these error returns less obvious now. Not sure of a nicer way to do it. You could maybe do:\nreturn { NACL_NO_FILE_DESC, nonce };\n? That has the downside that NaClFileInfo can only change by appending, though.","draft":false,"lineno":177,"date":"2013-05-15 18:37:53.810150","left":false},{"author":"Nick Bray (chromium)","author_email":"ncbray@chromium.org","text":"On 2013/05/15 18:37:53, dmichael wrote:\n> I find these error returns less obvious now. Not sure of a nicer way to do it.\n> You could maybe do:\n> return { NACL_NO_FILE_DESC, nonce };\n> ? That has the downside that NaClFileInfo can only change by appending, though.\n\nThe file info structure is defined in the NaCl repo, so I want to avoid any assumptions about the layout.  I get what you're saying and considered it myself, but didn't see a better way.","draft":false,"lineno":177,"date":"2013-05-16 16:38:17.953840","left":false},{"author":"dmichael","author_email":"dmichael@chromium.org","text":"On 2013/05/16 16:38:17, Nick Bray (chromium) wrote:\n> On 2013/05/15 18:37:53, dmichael wrote:\n> > I find these error returns less obvious now. Not sure of a nicer way to do it.\n> > You could maybe do:\n> > return { NACL_NO_FILE_DESC, nonce };\n> > ? That has the downside that NaClFileInfo can only change by appending,\n> though.\n> \n> The file info structure is defined in the NaCl repo, so I want to avoid any\n> assumptions about the layout.  I get what you're saying and considered it\n> myself, but didn't see a better way.\nHow about a simple little helper function in the unnamed namespace, and do:\nMakeNaClFileInfo(NACL_NO_FILE_DESC, nonce);\nhere.\nMakeNaClFileInfo would do the memset and assign those fields without making assumptions about layout.\n\nOr if you have any better ideas, I'm open. I would just like it to be super obvious that these branches are error conditions somehow.","draft":false,"lineno":177,"date":"2013-05-16 17:08:35.326040","left":false},{"author":"Nick Bray (chromium)","author_email":"ncbray@chromium.org","text":"On 2013/05/16 17:08:35, dmichael wrote:\n> On 2013/05/16 16:38:17, Nick Bray (chromium) wrote:\n> > On 2013/05/15 18:37:53, dmichael wrote:\n> > > I find these error returns less obvious now. Not sure of a nicer way to do\n> it.\n> > > You could maybe do:\n> > > return { NACL_NO_FILE_DESC, nonce };\n> > > ? That has the downside that NaClFileInfo can only change by appending,\n> > though.\n> > \n> > The file info structure is defined in the NaCl repo, so I want to avoid any\n> > assumptions about the layout.  I get what you're saying and considered it\n> > myself, but didn't see a better way.\n> How about a simple little helper function in the unnamed namespace, and do:\n> MakeNaClFileInfo(NACL_NO_FILE_DESC, nonce);\n> here.\n> MakeNaClFileInfo would do the memset and assign those fields without making\n> assumptions about layout.\n> \n> Or if you have any better ideas, I'm open. I would just like it to be super\n> obvious that these branches are error conditions somehow.\n\nDidn't think of that one.  Good idea.  Done.","draft":false,"lineno":177,"date":"2013-05-16 17:44:15.731930","left":false}],"id":17,"is_binary":false},"chrome/nacl/nacl_validation_query_unittest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":0,"messages":[],"id":13,"is_binary":false},"chrome/nacl/nacl_validation_db.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":10,"is_binary":false},"chrome/browser/nacl_host/nacl_process_host.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":6,"is_binary":false},"chrome/nacl/nacl_validation_query.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":0,"messages":[],"id":11,"is_binary":false},"ppapi/native_client/src/trusted/plugin/file_downloader.h":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":3,"messages":[],"id":18,"is_binary":false},"chrome/browser/nacl_host/nacl_browser.h":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":16,"num_removed":0,"messages":[],"id":3,"is_binary":false},"chrome/common/render_messages.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":2,"messages":[],"id":8,"is_binary":false},"chrome/browser/nacl_host/nacl_process_host.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":59,"num_removed":1,"messages":[{"author":"bennet.yee","author_email":"bennet.yee@gmail.com","text":"this should never happen in normal operation -- and is a good signal that the renderer and/or the NaCl module was compromised.  perhaps logging something?  kill either the renderer or the NaCl module, or both?  justin: any advice?","draft":false,"lineno":961,"date":"2013-05-16 01:52:48.908360","left":false},{"author":"Nick Bray (chromium)","author_email":"ncbray@chromium.org","text":"On 2013/05/16 01:52:48, bennet.yee wrote:\n> this should never happen in normal operation -- and is a good signal that the\n> renderer and/or the NaCl module was compromised.  perhaps logging something? \n> kill either the renderer or the NaCl module, or both?  justin: any advice?\n\nThis could happen someone launches 10+ NaCl modules at once.  The file path cache has a limited size, and it will evict the oldest entry.  Queries for evicted entries will fail gracefully.  Added a comment.","draft":false,"lineno":961,"date":"2013-05-16 16:38:17.953630","left":false}],"id":5,"is_binary":false},"chrome/common/nacl_messages.h":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":0,"messages":[],"id":7,"is_binary":false},"ppapi/native_client/src/trusted/plugin/service_runtime.h":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":4,"messages":[{"author":"dmichael","author_email":"dmichael@chromium.org","text":"please use distinct names for the parameter and the member.","draft":false,"lineno":72,"date":"2013-05-15 18:37:53.810760","left":false},{"author":"Nick Bray (chromium)","author_email":"ncbray@chromium.org","text":"On 2013/05/15 18:37:53, dmichael wrote:\n> please use distinct names for the parameter and the member.\n\nDone.","draft":false,"lineno":72,"date":"2013-05-16 16:38:17.954030","left":false}],"id":23,"is_binary":false},"ppapi/native_client/src/trusted/plugin/service_runtime.cc":{"status":"M","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":18,"messages":[{"author":"dmichael","author_email":"dmichael@chromium.org","text":"I know this isn't your fault, but this seems to warrant a comment to me: to_open is made on the heap, but has pointers to stack variables (and |info| which I guess comes from SRPC?). It appears that to_open will be deleted in the continuation, and that must happen in another thread before this function exits. So I think it's all OK, but it looks fishy at first glance.","draft":false,"lineno":179,"date":"2013-05-15 18:37:53.810440","left":false},{"author":"dmichael","author_email":"dmichael@chromium.org","text":"On 2013/05/15 18:37:53, dmichael wrote:\n> I know this isn't your fault, but this seems to warrant a comment to me: to_open\n> is made on the heap, but has pointers to stack variables (and |info| which I\n> guess comes from SRPC?). It appears that to_open will be deleted in the\n> continuation, and that must happen in another thread before this function exits.\n> So I think it's all OK, but it looks fishy at first glance.\nCould you comment this a little, pretty please? The way this method works by jumping threads and shuffling pointers around is unusual and a bit tricky. It would be helpful to have a high-level comment about what it's doing (which will also hopefully explain to the reader why it's okay to pass stack pointers to this heap object).","draft":false,"lineno":179,"date":"2013-05-16 17:08:35.326340","left":false},{"author":"Nick Bray (chromium)","author_email":"ncbray@chromium.org","text":"On 2013/05/16 17:08:35, dmichael wrote:\n> On 2013/05/15 18:37:53, dmichael wrote:\n> > I know this isn't your fault, but this seems to warrant a comment to me:\n> to_open\n> > is made on the heap, but has pointers to stack variables (and |info| which I\n> > guess comes from SRPC?). It appears that to_open will be deleted in the\n> > continuation, and that must happen in another thread before this function\n> exits.\n> > So I think it's all OK, but it looks fishy at first glance.\n> Could you comment this a little, pretty please? The way this method works by\n> jumping threads and shuffling pointers around is unusual and a bit tricky. It\n> would be helpful to have a high-level comment about what it's doing (which will\n> also hopefully explain to the reader why it's okay to pass stack pointers to\n> this heap object).\n\nDone.","draft":false,"lineno":179,"date":"2013-05-16 17:44:15.732230","left":false}],"id":22,"is_binary":false},"ppapi/native_client/src/trusted/plugin/plugin.h":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":4,"messages":[],"id":20,"is_binary":false},"ppapi/c/private/ppb_nacl_private.h":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":19,"messages":[],"id":16,"is_binary":false},"chrome/browser/nacl_host/nacl_browser.cc":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":65,"num_removed":0,"messages":[],"id":2,"is_binary":false},"chrome/renderer/pepper/ppb_nacl_private_impl.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":7,"messages":[],"id":14,"is_binary":false},"chrome/nacl/nacl_listener.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":28,"num_removed":0,"messages":[],"id":9,"is_binary":false},"chrome/nacl/nacl_validation_query.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":12,"is_binary":false},"ppapi/native_client/src/trusted/plugin/pnacl_coordinator.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":3,"messages":[],"id":21,"is_binary":false},"chrome/browser/nacl_host/nacl_file_host.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":32,"num_removed":30,"messages":[],"id":4,"is_binary":false}},"owner_email":"ncbray@chromium.org","owner":"Nick Bray (chromium)","message":null,"try_job_results":[{"parent_name":"android_dbg","tests":["defaulttests"],"slave":"chromeperf44","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_dbg_triggered_tests/builds/54346","timestamp":"2013-05-16 17:34:42.914961","builder":"android_dbg_triggered_tests","clobber":false,"project":"Chromium Try Server","reason":"Triggerable(android_dbg)","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjCPgw","requester":null,"buildnumber":"54346","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm372-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_rel/builds/149656","timestamp":"2013-05-16 17:00:54.785033","builder":"win_rel","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBixbQw","requester":null,"buildnumber":"149656","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm467-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_dbg/builds/63835","timestamp":"2013-05-16 16:59:13.855948","builder":"android_dbg","clobber":false,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBj3XQw","requester":null,"buildnumber":"63835","revision":"200432"},{"parent_name":null,"tests":["compile"],"slave":"vm344-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win/builds/74573","timestamp":"2013-05-16 16:55:29.889449","builder":"win","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjZswEM","requester":null,"buildnumber":"74573","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm436-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_clang_dbg/builds/44026","timestamp":"2013-05-16 16:51:56.428183","builder":"android_clang_dbg","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBiZdQw","requester":null,"buildnumber":"44026","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm198-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win7_aura/builds/40664","timestamp":"2013-05-16 16:49:09.413112","builder":"win7_aura","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjaswEM","requester":null,"buildnumber":"40664","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"mini30-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_dbg_simulator/builds/53009","timestamp":"2013-05-16 16:47:52.115644","builder":"ios_dbg_simulator","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBiqwwEM","requester":null,"buildnumber":"53009","revision":"200432"},{"parent_name":null,"tests":["compile"],"slave":"slave380-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_clang/builds/107964","timestamp":"2013-05-16 16:47:28.778285","builder":"linux_clang","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjphAEM","requester":null,"buildnumber":"107964","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"slave372-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_asan/builds/31342","timestamp":"2013-05-16 16:46:05.684184","builder":"linux_asan","clobber":false,"project":"Chromium Try Server","reason":"","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjqhAEM","requester":null,"buildnumber":"31342","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"slave323-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_rel/builds/128406","timestamp":"2013-05-16 16:44:00.051436","builder":"linux_rel","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBibdQw","requester":null,"buildnumber":"128406","revision":"200432"},{"parent_name":null,"tests":["compile"],"slave":"vm711-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac/builds/52774","timestamp":"2013-05-16 16:43:54.111951","builder":"mac","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBiJpAEM","requester":null,"buildnumber":"52774","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm735-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac_rel/builds/128996","timestamp":"2013-05-16 16:43:52.435086","builder":"mac_rel","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBiBfQw","requester":null,"buildnumber":"128996","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"slave313-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_aura/builds/41556","timestamp":"2013-05-16 16:43:39.426798","builder":"linux_aura","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBiadQw","requester":null,"buildnumber":"41556","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm778-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_chromeos/builds/115082","timestamp":"2013-05-16 16:43:09.565136","builder":"linux_chromeos","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjRjAEM","requester":null,"buildnumber":"115082","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm710-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac_asan/builds/32554","timestamp":"2013-05-16 16:42:44.826607","builder":"mac_asan","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBipwwEM","requester":null,"buildnumber":"32554","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"mini20-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_rel_device/builds/50096","timestamp":"2013-05-16 16:40:55.760727","builder":"ios_rel_device","clobber":false,"project":"Chromium Try Server","reason":"round2#2026de","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIwCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjyqwEM","requester":null,"buildnumber":"50096","revision":"200432"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm315-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_rel/builds/147809","timestamp":"2013-05-13 21:32:58.908578","builder":"win_rel","clobber":false,"project":"Chromium Try Server","reason":"Attempt9","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjRDww","requester":null,"buildnumber":"147809","revision":"199749"},{"parent_name":"win_rel","tests":["defaulttests"],"slave":"vm15-m4#0","url":"http://build.chromium.org/p/tryserver.chromium/builders/swarm_triggered/builds/3466","timestamp":"2013-05-13 20:32:38.313145","builder":"swarm_triggered","clobber":false,"project":"Chromium Try Server","reason":"Triggerable(swarm_triggered)","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYt6KEBwwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBi5Fww","requester":null,"buildnumber":"3466","revision":"199749"}],"created":"2013-05-13 17:57:43.106050","url":null,"num_comments":11,"modified":"2013-05-16 17:44:15.774250","patchset":1,"issue":14750007}