{"description":"Simplified Domain Resolver for mDNS Domains\n\nThis is a domain resolver for mDNS domains (*.local). It allows users of mDNS\nto resolve the IP address of machines that advertise A or AAAA records using\nmDNS.\n\nBUG=\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=209752","cc":["chromium-reviews@chromium.org"],"reviewers":["vitalybuka@chromium.org","gene@chromium.org"],"messages":[{"sender":"noamsml@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"","disapproval":false,"date":"2013-06-21 19:18:23.395370","approval":false},{"sender":"vitalybuka@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"https://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc\nFile chrome/browser/local_discovery/local_domain_resolver.cc (right):\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc#newcode24\nchrome/browser/local_discovery/local_domain_resolver.cc:24: if (address_family_ == net::ADDRESS_FAMILY_IPV4 ||\nmissaligned\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc#newcode27\nchrome/browser/local_discovery/local_domain_resolver.cc:27: if (!transaction_a_->Start()) return false;\none line if?\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc#newcode33\nchrome/browser/local_discovery/local_domain_resolver.cc:33: if (!transaction_aaaa_->Start()) return false;\nagain\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc#newcode43\nchrome/browser/local_discovery/local_domain_resolver.cc:43: net::MDnsTransaction::QUERY_CACHE |\nreturn net::MDnsClient::GetInstance()->CreateTransaction(\n    type, domain_, net::MDnsTransaction::SINGLE_RESULT |\n                   net::MDnsTransaction::QUERY_CACHE |\n                   net::MDnsTransaction::QUERY_NETWORK,\n    base::Bind(&LocalDomainResolver::OnTransactionComplete,\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc#newcode54\nchrome/browser/local_discovery/local_domain_resolver.cc:54: address_family_ == net::ADDRESS_FAMILY_UNSPECIFIED &&\nDoes this mean that callback will never be called.\nProbably more convenient to guaranty that for every Start callback will be trigered\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver_unittest.cc\nFile chrome/browser/local_discovery/local_domain_resolver_unittest.cc (right):\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver_unittest.cc#newcode163\nchrome/browser/local_discovery/local_domain_resolver_unittest.cc:163: EXPECT_CALL(*this, AddressCallbackInternal(false, \"\"));\nmissaligned","disapproval":false,"date":"2013-06-21 19:35:25.905620","approval":false},{"sender":"noamsml@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"https://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc\nFile chrome/browser/local_discovery/local_domain_resolver.cc (right):\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc#newcode54\nchrome/browser/local_discovery/local_domain_resolver.cc:54: address_family_ == net::ADDRESS_FAMILY_UNSPECIFIED &&\nOn 2013/06/21 19:35:25, Vitaly Buka wrote:\n> Does this mean that callback will never be called.\n> Probably more convenient to guaranty that for every Start callback will be\n> trigered\n\nNo, this means the callback will only be called once per Start() call. Since UNSPECIFIED has two transactions, we only call the callback if both have failed.","disapproval":false,"date":"2013-06-21 23:10:45.109840","approval":false},{"sender":"noamsml@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"https://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc\nFile chrome/browser/local_discovery/local_domain_resolver.cc (right):\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc#newcode24\nchrome/browser/local_discovery/local_domain_resolver.cc:24: if (address_family_ == net::ADDRESS_FAMILY_IPV4 ||\nOn 2013/06/21 19:35:25, Vitaly Buka wrote:\n> missaligned\n\nDone.\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc#newcode27\nchrome/browser/local_discovery/local_domain_resolver.cc:27: if (!transaction_a_->Start()) return false;\nOn 2013/06/21 19:35:25, Vitaly Buka wrote:\n> one line if?\n\nDone.\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc#newcode33\nchrome/browser/local_discovery/local_domain_resolver.cc:33: if (!transaction_aaaa_->Start()) return false;\nOn 2013/06/21 19:35:25, Vitaly Buka wrote:\n> again\n\nDone.\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver.cc#newcode43\nchrome/browser/local_discovery/local_domain_resolver.cc:43: net::MDnsTransaction::QUERY_CACHE |\nOn 2013/06/21 19:35:25, Vitaly Buka wrote:\n> return net::MDnsClient::GetInstance()->CreateTransaction(\n>     type, domain_, net::MDnsTransaction::SINGLE_RESULT |\n>                    net::MDnsTransaction::QUERY_CACHE |\n>                    net::MDnsTransaction::QUERY_NETWORK,\n>     base::Bind(&LocalDomainResolver::OnTransactionComplete,\n\nDone.\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver_unittest.cc\nFile chrome/browser/local_discovery/local_domain_resolver_unittest.cc (right):\n\nhttps://codereview.chromium.org/17514013/diff/1/chrome/browser/local_discovery/local_domain_resolver_unittest.cc#newcode163\nchrome/browser/local_discovery/local_domain_resolver_unittest.cc:163: EXPECT_CALL(*this, AddressCallbackInternal(false, \"\"));\nOn 2013/06/21 19:35:25, Vitaly Buka wrote:\n> missaligned\n\nDone.","disapproval":false,"date":"2013-06-21 23:16:47.739910","approval":false},{"sender":"vitalybuka@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"lgtm","disapproval":false,"date":"2013-06-21 23:18:23.781820","approval":true},{"sender":"gene@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"https://codereview.chromium.org/17514013/diff/9001/chrome/browser/local_discovery/local_domain_resolver.h\nFile chrome/browser/local_discovery/local_domain_resolver.h (right):\n\nhttps://codereview.chromium.org/17514013/diff/9001/chrome/browser/local_discovery/local_domain_resolver.h#newcode20\nchrome/browser/local_discovery/local_domain_resolver.h:20: IPAddressCallback;\nindentation\n\nhttps://codereview.chromium.org/17514013/diff/9001/chrome/browser/local_discovery/local_domain_resolver.h#newcode22\nchrome/browser/local_discovery/local_domain_resolver.h:22: LocalDomainResolver(std::string domain, net::AddressFamily address_family,\nconst std::string&\nconst AddressFamily&\n  ???\n\nhttps://codereview.chromium.org/17514013/diff/9001/chrome/browser/local_discovery/local_domain_resolver.h#newcode45\nchrome/browser/local_discovery/local_domain_resolver.h:45: };\ndisable copy constructor macro","disapproval":false,"date":"2013-06-22 00:32:49.149780","approval":false},{"sender":"noamsml@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"https://codereview.chromium.org/17514013/diff/9001/chrome/browser/local_discovery/local_domain_resolver.h\nFile chrome/browser/local_discovery/local_domain_resolver.h (right):\n\nhttps://codereview.chromium.org/17514013/diff/9001/chrome/browser/local_discovery/local_domain_resolver.h#newcode20\nchrome/browser/local_discovery/local_domain_resolver.h:20: IPAddressCallback;\nOn 2013/06/22 00:32:49, gene wrote:\n> indentation\n\nDone.\n\nhttps://codereview.chromium.org/17514013/diff/9001/chrome/browser/local_discovery/local_domain_resolver.h#newcode22\nchrome/browser/local_discovery/local_domain_resolver.h:22: LocalDomainResolver(std::string domain, net::AddressFamily address_family,\nOn 2013/06/22 00:32:49, gene wrote:\n> const std::string&\n> const AddressFamily&\n>   ???\n\nDone on the string. AddressFamily is an enum, so const& isn't necessary.\n\nhttps://codereview.chromium.org/17514013/diff/9001/chrome/browser/local_discovery/local_domain_resolver.h#newcode45\nchrome/browser/local_discovery/local_domain_resolver.h:45: };\nOn 2013/06/22 00:32:49, gene wrote:\n> disable copy constructor macro\n\nDone.","disapproval":false,"date":"2013-06-24 20:24:12.638250","approval":false},{"sender":"noamsml@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"https://codereview.chromium.org/17514013/diff/17001/chrome/browser/local_discovery/local_domain_resolver.cc\nFile chrome/browser/local_discovery/local_domain_resolver.cc (right):\n\nhttps://codereview.chromium.org/17514013/diff/17001/chrome/browser/local_discovery/local_domain_resolver.cc#newcode57\nchrome/browser/local_discovery/local_domain_resolver.cc:57: transactions_complete_ < 2) {\nChange to transaction_failures_","disapproval":false,"date":"2013-06-25 23:03:00.100010","approval":false},{"sender":"noamsml@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"https://codereview.chromium.org/17514013/diff/17001/chrome/browser/local_discovery/local_domain_resolver.cc\nFile chrome/browser/local_discovery/local_domain_resolver.cc (right):\n\nhttps://codereview.chromium.org/17514013/diff/17001/chrome/browser/local_discovery/local_domain_resolver.cc#newcode57\nchrome/browser/local_discovery/local_domain_resolver.cc:57: transactions_complete_ < 2) {\nOn 2013/06/25 23:03:00, Noam Samuel wrote:\n> Change to transaction_failures_\n\nDone.","disapproval":false,"date":"2013-06-25 23:36:53.071430","approval":false},{"sender":"gene@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"lgtm","disapproval":false,"date":"2013-07-02 03:19:00.697140","approval":true},{"sender":"commit-bot@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/noamsml@chromium.org/17514013/29001","disapproval":false,"date":"2013-07-02 17:14:57.033330","approval":false},{"sender":"commit-bot@chromium.org","recipients":["noamsml@chromium.org","vitalybuka@chromium.org","gene@chromium.org","chromium-reviews@chromium.org"],"text":"Change committed as 209752","disapproval":false,"date":"2013-07-02 19:40:02.628720","approval":false}],"owner_email":"noamsml@chromium.org","private":false,"base_url":"https://chromium.googlesource.com/chromium/src.git@dns_sd_implementation","owner":"Noam Samuel","subject":"Simplified Domain Resolver for mDNS Domains","created":"2013-06-21 19:15:35.314070","patchsets":[1,9001,17001,24001,29001],"modified":"2013-07-02 19:40:02.789900","closed":true,"commit":false,"issue":17514013}