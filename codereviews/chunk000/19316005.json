{"description":"Fix two issues in parsing the iTunes xml file.\n\nBUG=260711\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=212312","cc":["chromium-reviews@chromium.org","thestig@chromium.org","tommycli@chromium.org","gbillock@chromium.org","vandebo@chromium.org"],"reviewers":["tommycli@chromium.org","thestig@chromium.org"],"messages":[{"sender":"vandebo@chromium.org","recipients":["vandebo@chromium.org","tommycli@chromium.org","thestig@chromium.org","chromium-reviews@chromium.org","thestig@chromium.org","tommycli@chromium.org","gbillock@chromium.org","vandebo@chromium.org"],"text":"tommy: initial review.\nlei: final and owner's review.","disapproval":false,"date":"2013-07-16 15:36:57.104610","approval":false},{"sender":"tommycli@chromium.org","recipients":["vandebo@chromium.org","tommycli@chromium.org","thestig@chromium.org","chromium-reviews@chromium.org","thestig@chromium.org","tommycli@chromium.org","gbillock@chromium.org","vandebo@chromium.org"],"text":"https://codereview.chromium.org/19316005/diff/1/chrome/common/itunes_xml_utils.cc\nFile chrome/common/itunes_xml_utils.cc (right):\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/common/itunes_xml_utils.cc#newcode14\nchrome/common/itunes_xml_utils.cc:14: bool SkipToNextElement(XmlReader* reader) {\nIs there every used to find a non-sibling node? If not, why not rename to SkipToNextSibling and put depth checking inside here?\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/utility/itunes_library_parser.cc\nFile chrome/utility/itunes_library_parser.cc (right):\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/utility/itunes_library_parser.cc#newcode73\nchrome/utility/itunes_library_parser.cc:73: !(found_id && found_location && found_artist && found_album)) {\ndoes this conditional need to be updated to match the return conditional?","disapproval":false,"date":"2013-07-16 18:48:22.439170","approval":false},{"sender":"vandebo@chromium.org","recipients":["vandebo@chromium.org","tommycli@chromium.org","thestig@chromium.org","chromium-reviews@chromium.org","thestig@chromium.org","tommycli@chromium.org","gbillock@chromium.org","vandebo@chromium.org"],"text":"https://codereview.chromium.org/19316005/diff/1/chrome/common/itunes_xml_utils.cc\nFile chrome/common/itunes_xml_utils.cc (right):\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/common/itunes_xml_utils.cc#newcode14\nchrome/common/itunes_xml_utils.cc:14: bool SkipToNextElement(XmlReader* reader) {\nOn 2013/07/16 18:48:22, tommycli wrote:\n> Is there every used to find a non-sibling node? If not, why not rename to\n> SkipToNextSibling and put depth checking inside here?\n\nEven if I did that, the contract for SeekToNodeAtCurrentDepth() doesn't change and it can always be called on the last node of the current depth.\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/utility/itunes_library_parser.cc\nFile chrome/utility/itunes_library_parser.cc (right):\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/utility/itunes_library_parser.cc#newcode73\nchrome/utility/itunes_library_parser.cc:73: !(found_id && found_location && found_artist && found_album)) {\nOn 2013/07/16 18:48:22, tommycli wrote:\n> does this conditional need to be updated to match the return conditional?\n\nNope, we keep looking until we found all four things (or run out of things to search). However, we declare victory if we found at leas the id and location.","disapproval":false,"date":"2013-07-16 18:54:41.963220","approval":false},{"sender":"tommycli@chromium.org","recipients":["vandebo@chromium.org","tommycli@chromium.org","thestig@chromium.org","chromium-reviews@chromium.org","thestig@chromium.org","tommycli@chromium.org","gbillock@chromium.org","vandebo@chromium.org"],"text":"lgtm","disapproval":false,"date":"2013-07-16 19:02:26.478940","approval":true},{"sender":"thestig@chromium.org","recipients":["vandebo@chromium.org","tommycli@chromium.org","thestig@chromium.org","chromium-reviews@chromium.org","thestig@chromium.org","tommycli@chromium.org","gbillock@chromium.org","vandebo@chromium.org"],"text":"Looks like we should take a look at 'Artist' vs 'Album Artist' and see if we can better mimic iTunes.\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/chrome_tests_unit.gypi\nFile chrome/chrome_tests_unit.gypi (left):\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/chrome_tests_unit.gypi#oldcode2175\nchrome/chrome_tests_unit.gypi:2175: ['OS==\"win\" or OS==\"mac\"', {\nDon't you need to rebase after https://codereview.chromium.org/19243004/ ?","disapproval":false,"date":"2013-07-16 20:26:42.958330","approval":false},{"sender":"vandebo@chromium.org","recipients":["vandebo@chromium.org","tommycli@chromium.org","thestig@chromium.org","chromium-reviews@chromium.org","thestig@chromium.org","tommycli@chromium.org","gbillock@chromium.org","vandebo@chromium.org"],"text":"On 2013/07/16 20:26:42, Lei Zhang wrote:\n> Looks like we should take a look at 'Artist' vs 'Album Artist' and see if we can\n> better mimic iTunes.\n\nIndeed.  If Album Artist is present, it's used for the Artist name in the directory organization, so I've updated the code to do that.  Unfortunately it means we'll only ever early exit out of the parsing if there is an Album Artist - which isn't very common.\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/chrome_tests_unit.gypi\nFile chrome/chrome_tests_unit.gypi (left):\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/chrome_tests_unit.gypi#oldcode2175\nchrome/chrome_tests_unit.gypi:2175: ['OS==\"win\" or OS==\"mac\"', {\nOn 2013/07/16 20:26:43, Lei Zhang wrote:\n> Don't you need to rebase after https://codereview.chromium.org/19243004/ ?\n\nThe picasa tests had bit rotted. Tommy is fixing them so I didn't commit that CL.","disapproval":false,"date":"2013-07-17 04:59:27.003960","approval":false},{"sender":"thestig@chromium.org","recipients":["vandebo@chromium.org","tommycli@chromium.org","thestig@chromium.org","chromium-reviews@chromium.org","thestig@chromium.org","tommycli@chromium.org","gbillock@chromium.org","vandebo@chromium.org"],"text":"lgtm assuming \"Unknown {Artist,Album}\" doesn't need to be localized.\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/chrome_tests_unit.gypi\nFile chrome/chrome_tests_unit.gypi (left):\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/chrome_tests_unit.gypi#oldcode2175\nchrome/chrome_tests_unit.gypi:2175: ['OS==\"win\" or OS==\"mac\"', {\nOn 2013/07/17 04:59:27, vandebo wrote:\n> On 2013/07/16 20:26:43, Lei Zhang wrote:\n> > Don't you need to rebase after https://codereview.chromium.org/19243004/ ?\n> \n> The picasa tests had bit rotted. Tommy is fixing them so I didn't commit that\n> CL.\n\nCan we copy them over and just comment them out with a TODO?\n\nhttps://codereview.chromium.org/19316005/diff/11001/chrome/utility/itunes_library_parser.cc\nFile chrome/utility/itunes_library_parser.cc (right):\n\nhttps://codereview.chromium.org/19316005/diff/11001/chrome/utility/itunes_library_parser.cc#newcode225\nchrome/utility/itunes_library_parser.cc:225: track_info.artist = \"Unknown Artist\";\nDo we need to localize this?","disapproval":false,"date":"2013-07-17 20:03:39.179720","approval":true},{"sender":"commit-bot@chromium.org","recipients":["vandebo@chromium.org","tommycli@chromium.org","thestig@chromium.org","chromium-reviews@chromium.org","thestig@chromium.org","tommycli@chromium.org","gbillock@chromium.org","vandebo@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/vandebo@chromium.org/19316005/23001","disapproval":false,"date":"2013-07-17 20:41:34.916710","approval":false},{"sender":"vandebo@chromium.org","recipients":["vandebo@chromium.org","tommycli@chromium.org","thestig@chromium.org","chromium-reviews@chromium.org","thestig@chromium.org","tommycli@chromium.org","gbillock@chromium.org","vandebo@chromium.org"],"text":"https://codereview.chromium.org/19316005/diff/1/chrome/chrome_tests_unit.gypi\nFile chrome/chrome_tests_unit.gypi (left):\n\nhttps://codereview.chromium.org/19316005/diff/1/chrome/chrome_tests_unit.gypi#oldcode2175\nchrome/chrome_tests_unit.gypi:2175: ['OS==\"win\" or OS==\"mac\"', {\nOn 2013/07/17 20:03:39, Lei Zhang wrote:\n> On 2013/07/17 04:59:27, vandebo wrote:\n> > On 2013/07/16 20:26:43, Lei Zhang wrote:\n> > > Don't you need to rebase after https://codereview.chromium.org/19243004/ ?\n> > \n> > The picasa tests had bit rotted. Tommy is fixing them so I didn't commit that\n> > CL.\n> \n> Can we copy them over and just comment them out with a TODO?\n\nTommy's CL landed, this is gone in the newest patch set.\n\nhttps://codereview.chromium.org/19316005/diff/11001/chrome/utility/itunes_library_parser.cc\nFile chrome/utility/itunes_library_parser.cc (right):\n\nhttps://codereview.chromium.org/19316005/diff/11001/chrome/utility/itunes_library_parser.cc#newcode225\nchrome/utility/itunes_library_parser.cc:225: track_info.artist = \"Unknown Artist\";\nOn 2013/07/17 20:03:39, Lei Zhang wrote:\n> Do we need to localize this?\n\nConfirmed in the japanese version of iTunes that \"Unknown Artist\" and \"Unknown Album\" are not localized.","disapproval":false,"date":"2013-07-17 20:50:42.028280","approval":false},{"sender":"commit-bot@chromium.org","recipients":["vandebo@chromium.org","tommycli@chromium.org","thestig@chromium.org","chromium-reviews@chromium.org","thestig@chromium.org","tommycli@chromium.org","gbillock@chromium.org","vandebo@chromium.org"],"text":"Change committed as 212312","disapproval":false,"date":"2013-07-18 09:52:18.523370","approval":false}],"owner_email":"vandebo@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"vandebo","subject":"Fix two issues in parsing the iTunes xml file.","created":"2013-07-16 15:35:33.624070","patchsets":[1,11001,23001],"modified":"2013-07-18 09:52:18.678750","closed":true,"commit":false,"issue":19316005}