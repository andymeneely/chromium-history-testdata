{"files":{"chrome/browser/ui/views/tabs/base_tab.cc":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":1,"messages":[],"id":3004,"is_binary":false},"chrome/common/chrome_switches.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":3009,"is_binary":false},"chrome/browser/ui/views/tabs/base_tab_strip.h":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[{"author":"sky","author_email":"sky@chromium.org","text":"Why is this virtual?\n\nAlso, this class is only used on windows and chromeos. We're going to want this feature on other platforms too (sadly). This function should be extracted into a place that can be used on other platforms. I'm thinking you create some class like PrefixMatcher or PrefixFinder or TabTitlePrefixBlahBlahBlah (you get the idea) in chrome/browser/ui. The class has a single static method, CalculatePrefixes and it takes a std::vector<string16> and calculates the std::vector<size_t> of prefixes. This also has the benefit that you can write a nice unit test for it:)","draft":false,"lineno":199,"date":"2011-02-25 17:02:07.304827","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> Why is this virtual?\n> \n> Also, this class is only used on windows and chromeos. We're going to want this\n> feature on other platforms too (sadly). This function should be extracted into a\n> place that can be used on other platforms. I'm thinking you create some class\n> like PrefixMatcher or PrefixFinder or TabTitlePrefixBlahBlahBlah (you get the\n> idea) in chrome/browser/ui. The class has a single static method,\n> CalculatePrefixes and it takes a std::vector<string16> and calculates the\n> std::vector<size_t> of prefixes. This also has the benefit that you can write a\n> nice unit test for it:)\n\nOne additional comment. Don't take my comment to mean you have to figure out the other platforms now. Just that you should prepare for them:)","draft":false,"lineno":199,"date":"2011-02-25 17:03:03.329345","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> Why is this virtual?\n> \n> Also, this class is only used on windows and chromeos. We're going to want this\n> feature on other platforms too (sadly). This function should be extracted into a\n> place that can be used on other platforms. I'm thinking you create some class\n> like PrefixMatcher or PrefixFinder or TabTitlePrefixBlahBlahBlah (you get the\n> idea) in chrome/browser/ui. The class has a single static method,\n> CalculatePrefixes and it takes a std::vector<string16> and calculates the\n> std::vector<size_t> of prefixes. This also has the benefit that you can write a\n> nice unit test for it:)\n\nGood point... I looked for a test infrastructure for tabs and couldn't find one... I'll follow your advice here... Thanks!\n","draft":false,"lineno":199,"date":"2011-02-25 20:09:13.289762","left":false}],"id":3006,"is_binary":false},"chrome/browser/ui/views/tabs/tab_renderer_data.h":{"status":"M    ","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[{"author":"sky","author_email":"sky@chromium.org","text":"size_t","draft":false,"lineno":50,"date":"2011-02-25 17:02:07.304958","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> size_t\n\nD'Ho!... Done... :-)","draft":false,"lineno":50,"date":"2011-02-25 20:09:13.289891","left":false}],"id":3007,"is_binary":false},"chrome/browser/ui/views/tabs/base_tab_strip.cc":{"status":"M    ","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":94,"num_removed":0,"messages":[{"author":"sky","author_email":"sky@chromium.org","text":"This is a bit confusing. I think you mean:\n'This map is used to remember the title and the index of a tab. If multiple tabs have the same title the index is set to -1 and the indices of all tabs sharing the same title are placed in no_prefix_tab.'","draft":false,"lineno":432,"date":"2011-02-25 17:02:07.303511","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"Shouldn't you skip over mini tabs?","draft":false,"lineno":436,"date":"2011-02-25 17:02:07.303642","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"This code is tricky to read, how about a comment here saying the title is a duplicate.","draft":false,"lineno":442,"date":"2011-02-25 17:02:07.303774","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"Shouldn't this be std::vector<int> ?","draft":false,"lineno":454,"date":"2011-02-25 17:02:07.303904","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"Maybe I'm just dense, but this comment doesn't make sense to me.","draft":false,"lineno":468,"date":"2011-02-25 17:02:07.304034","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"If words is empty, this is never stops. This might be possible if the title only contained white space. Either way, you should handle that case here.","draft":false,"lineno":469,"date":"2011-02-25 17:02:07.304171","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"It seems horribly inefficient to have to use find again when presumably SplitStringAlongWhitespace knows all this already.","draft":false,"lineno":471,"date":"2011-02-25 17:02:07.304303","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"Move the iter into the for declaration so that its clear the iterator is only used in the for loop.","draft":false,"lineno":480,"date":"2011-02-25 17:02:07.304432","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"static_cast","draft":false,"lineno":496,"date":"2011-02-25 17:02:07.304563","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"I think you need a SchedulePaint here.","draft":false,"lineno":498,"date":"2011-02-25 17:02:07.304694","left":false},{"author":"Peter Kasting","author_email":"pkasting@chromium.org","text":"This is the wrong function to use.  We need to use ICU functions to find logical boundaries as some languages don't have whitespace.","draft":false,"lineno":466,"date":"2011-02-25 17:14:44.155982","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> This is a bit confusing. I think you mean:\n> 'This map is used to remember the title and the index of a tab. If multiple tabs\n> have the same title the index is set to -1 and the indices of all tabs sharing\n> the same title are placed in no_prefix_tab.'\n\nThanks... Done...","draft":false,"lineno":432,"date":"2011-02-25 20:09:13.288286","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> Shouldn't you skip over mini tabs?\nGood point, it would save some processing time since we ignore them later anyway... Done...\n\n","draft":false,"lineno":436,"date":"2011-02-25 20:09:13.288425","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> This code is tricky to read, how about a comment here saying the title is a\n> duplicate.\nDone...\n","draft":false,"lineno":442,"date":"2011-02-25 20:09:13.288556","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> Shouldn't this be std::vector<int> ?\n\nHo, right, thanks again... Done...","draft":false,"lineno":454,"date":"2011-02-25 20:09:13.288686","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:14:44, Peter Kasting wrote:\n> This is the wrong function to use.  We need to use ICU functions to find logical\n> boundaries as some languages don't have whitespace.\n\nWill do in the next iteration, when I move the code to a common place where it will be available to other platforms.","draft":false,"lineno":466,"date":"2011-02-25 20:09:13.288819","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> Maybe I'm just dense, but this comment doesn't make sense to me.\n\nSorry, maybe my wording is wrong (unintended pun :-)...\nWhat I mean is that we don't have to add an entry in the prefixes map for the concatenation of all the words, since a match on the whole title is ignored anyway... I reworded the comment...","draft":false,"lineno":468,"date":"2011-02-25 20:09:13.288951","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> If words is empty, this is never stops. This might be possible if the title only\n> contained white space. Either way, you should handle that case here.\n\nHum, I thought I did handle that case by exiting the loop early for empty titles, and I was under the false impression that I would get empty strings in the words vector for contiguous white spaces, I see my mistake now, good catch!\n\nFixed...","draft":false,"lineno":469,"date":"2011-02-25 20:09:13.289085","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> It seems horribly inefficient to have to use find again when presumably\n> SplitStringAlongWhitespace knows all this already.\n\nYeah, I know, I was debating whether I should just rewrite my own splitter function, and decided to leave it like this... Now that I need to change it for an ICU regexp for word breaks, I'll try to avoid the find if I can...\n\nTODO...\n","draft":false,"lineno":471,"date":"2011-02-25 20:09:13.289214","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> Move the iter into the for declaration so that its clear the iterator is only\n> used in the for loop.\n\nDone...","draft":false,"lineno":480,"date":"2011-02-25 20:09:13.289347","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> static_cast\n\nOops... I meant to fix that and forgot... Sorry about that...\nBut I don't need it anymore, now that I changed the type of common_prefix_length in the next file...","draft":false,"lineno":496,"date":"2011-02-25 20:09:13.289500","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> I think you need a SchedulePaint here.\n\nI was wondering about that, but the SetData implementation actually does it... Should I add it anyway?\n","draft":false,"lineno":498,"date":"2011-02-25 20:09:13.289631","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"On 2011/02/25 20:09:13, MAD wrote:\n> On 2011/02/25 17:02:07, sky wrote:\n> > Shouldn't you skip over mini tabs?\n> Good point, it would save some processing time since we ignore them later\n> anyway... Done...\n> \n\nI wasn't so much concerned about that, but rather if you consider the title here you might incorrectly think a title was duplicated.","draft":false,"lineno":436,"date":"2011-02-25 21:04:44.516653","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"On 2011/02/25 20:09:13, MAD wrote:\n> On 2011/02/25 17:02:07, sky wrote:\n> > I think you need a SchedulePaint here.\n> \n> I was wondering about that, but the SetData implementation actually does it...\n> Should I add it anyway?\n\nIt does? It probably should, but I don't think it currently does.","draft":false,"lineno":498,"date":"2011-02-25 21:04:44.516821","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 21:04:44, sky wrote:\n> On 2011/02/25 20:09:13, MAD wrote:\n> > On 2011/02/25 17:02:07, sky wrote:\n> > > Shouldn't you skip over mini tabs?\n> > Good point, it would save some processing time since we ignore them later\n> > anyway... Done...\n> > \n> \n> I wasn't so much concerned about that, but rather if you consider the title here\n> you might incorrectly think a title was duplicated.\n\nYes, that too... :-)\nFixed now, right?","draft":false,"lineno":436,"date":"2011-02-25 21:49:24.151277","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 21:04:44, sky wrote:\n> On 2011/02/25 20:09:13, MAD wrote:\n> > On 2011/02/25 17:02:07, sky wrote:\n> > > I think you need a SchedulePaint here.\n> > \n> > I was wondering about that, but the SetData implementation actually does it...\n> > Should I add it anyway?\n> \n> It does? It probably should, but I don't think it currently does.\n\nActually, it indirectly does, via Layout, which does a SchedulePaint when we have a layout manager. Should I had one here still?","draft":false,"lineno":498,"date":"2011-02-25 21:49:24.151435","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"On 2011/02/25 21:49:24, MAD wrote:\n> On 2011/02/25 21:04:44, sky wrote:\n> > On 2011/02/25 20:09:13, MAD wrote:\n> > > On 2011/02/25 17:02:07, sky wrote:\n> > > > Shouldn't you skip over mini tabs?\n> > > Good point, it would save some processing time since we ignore them later\n> > > anyway... Done...\n> > > \n> > \n> > I wasn't so much concerned about that, but rather if you consider the title\n> here\n> > you might incorrectly think a title was duplicated.\n> \n> Yes, that too... :-)\n> Fixed now, right?\n\nYes, thanks.","draft":false,"lineno":436,"date":"2011-02-25 22:59:27.694249","left":false},{"author":"sky","author_email":"sky@chromium.org","text":"On 2011/02/25 21:49:24, MAD wrote:\n> On 2011/02/25 21:04:44, sky wrote:\n> > On 2011/02/25 20:09:13, MAD wrote:\n> > > On 2011/02/25 17:02:07, sky wrote:\n> > > > I think you need a SchedulePaint here.\n> > > \n> > > I was wondering about that, but the SetData implementation actually does\n> it...\n> > > Should I add it anyway?\n> > \n> > It does? It probably should, but I don't think it currently does.\n> \n> Actually, it indirectly does, via Layout, which does a SchedulePaint when we\n> have a layout manager. Should I had one here still?\n\nBaseTab doesn't have a LayoutManager though.","draft":false,"lineno":498,"date":"2011-02-25 22:59:27.694396","left":false}],"id":3005,"is_binary":false},"chrome/browser/about_flags.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":0,"messages":[{"author":"sky","author_email":"sky@chromium.org","text":"Your patch only effects windows and chromeos.","draft":false,"lineno":268,"date":"2011-02-25 17:02:07.303357","left":false},{"author":"MAD","author_email":"mad@chromium.org","text":"On 2011/02/25 17:02:07, sky wrote:\n> Your patch only effects windows and chromeos.\n\nHo, I didn't realize that... Changed to:\nkOsWin | kOsCrOS,  // Until we have a solution for non-views platforms.\n","draft":false,"lineno":268,"date":"2011-02-25 20:09:13.288132","left":false}],"id":3003,"is_binary":false},"chrome/app/generated_resources.grd":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":0,"messages":[],"id":3002,"is_binary":false},"chrome/common/chrome_switches.cc":{"status":"M    ","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":3008,"is_binary":false}},"owner_email":"mad@chromium.org","owner":"MAD","message":"''","try_job_results":[{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_chromeos&number=4333","timestamp":"2011-02-25 22:59:27.765829","builder":"linux_chromeos","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIxCxIFSXNzdWUY6saRAwwLEghQYXRjaFNldBjhXQwLEgxUcnlKb2JSZXN1bHQYi_cCDA","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_view&number=3210","timestamp":"2011-02-25 22:59:27.765829","builder":"linux_view","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIxCxIFSXNzdWUY6saRAwwLEghQYXRjaFNldBjhXQwLEgxUcnlKb2JSZXN1bHQYjPcCDA","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac&number=14507","timestamp":"2011-02-25 22:59:27.765829","builder":"mac","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIxCxIFSXNzdWUY6saRAwwLEghQYXRjaFNldBjhXQwLEgxUcnlKb2JSZXN1bHQYjfcCDA","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux&number=14082","timestamp":"2011-02-25 22:59:27.765829","builder":"linux","clobber":null,"project":null,"reason":null,"result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIxCxIFSXNzdWUY6saRAwwLEghQYXRjaFNldBjhXQwLEgxUcnlKb2JSZXN1bHQYjvcCDA","requester":null,"buildnumber":null,"revision":null},{"parent_name":null,"tests":[],"slave":null,"url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win&number=17754","timestamp":"2011-02-25 22:59:27.765829","builder":"win","clobber":null,"project":null,"reason":null,"result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIxCxIFSXNzdWUY6saRAwwLEghQYXRjaFNldBjhXQwLEgxUcnlKb2JSZXN1bHQYj_cCDA","requester":null,"buildnumber":null,"revision":null}],"created":"2011-02-25 04:09:23.629174","url":null,"num_comments":35,"modified":"2012-01-13 14:38:15.778533","patchset":12001,"issue":6579050}