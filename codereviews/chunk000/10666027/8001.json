{"files":{"chrome/renderer/resources/extensions/context_menus_custom_bindings.js":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":4,"messages":[],"id":9009,"is_binary":false},"chrome/test/data/extensions/platform_apps/restrictions/manifest.json":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":9015,"is_binary":false},"chrome/common/extensions/docs/extensions/index.html":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":9004,"is_binary":false},"chrome/renderer/resources/extensions/runtime_custom_bindings.js":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":1,"messages":[{"author":"kalman","author_email":"kalman@chromium.org","text":"Perhaps cache this result?","draft":false,"lineno":26,"date":"2012-06-25 23:35:56.663226","left":false},{"author":"kalman","author_email":"kalman@chromium.org","text":"On 2012/06/25 23:35:56, kalman wrote:\n> Perhaps cache this result?\n\nEh, never mind caching it.\n\nBut I just noticed that you're using appNatives here not a new runtimeNatives class. The problem with appNatives is that it also puts an \"id\" thing in the manifest. I had a separate change quite similar to this one which put the id separately on chrome.runtime.id and I prefer that to including in getManifest().\n\nThe other problem is that... well, it's appNatives not runtimeNatives. That's confusing.\n\nhttp://codereview.chromium.org/10640013/\n\nCopy runtime_natives.cc from there?","draft":false,"lineno":26,"date":"2012-06-25 23:55:11.871449","left":false},{"author":"Antony Sargent","author_email":"asargent@chromium.org","text":"On 2012/06/25 23:55:11, kalman wrote:\n> On 2012/06/25 23:35:56, kalman wrote:\n> > Perhaps cache this result?\n> \n> Eh, never mind caching it.\n> \n> But I just noticed that you're using appNatives here not a new runtimeNatives\n> class. The problem with appNatives is that it also puts an \"id\" thing in the\n> manifest. I had a separate change quite similar to this one which put the id\n> separately on chrome.runtime.id and I prefer that to including in getManifest().\n> \n> The other problem is that... well, it's appNatives not runtimeNatives. That's\n> confusing.\n> \n> http://codereview.chromium.org/10640013/\n> \n> Copy runtime_natives.cc from there?\n\nDone.","draft":false,"lineno":26,"date":"2012-06-28 23:10:33.635064","left":false}],"id":9012,"is_binary":false},"chrome/renderer/resources/extensions/miscellaneous_bindings.js":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":4,"messages":[],"id":9011,"is_binary":false},"chrome/renderer/resources/extensions/apitest.js":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":4,"messages":[],"id":9008,"is_binary":false},"chrome/common/extensions/docs/samples.json":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":9006,"is_binary":false},"chrome/common/extensions/docs/extensions/runtime.html":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":264,"num_removed":1,"messages":[],"id":9005,"is_binary":false},"chrome/browser/extensions/platform_app_browsertest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":0,"messages":[],"id":9001,"is_binary":false},"chrome/test/data/extensions/platform_apps/runtime/test.js":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":40,"num_removed":0,"messages":[],"id":9017,"is_binary":false},"chrome/common/extensions/api/runtime.json":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":56,"num_removed":0,"messages":[{"author":"kalman","author_email":"kalman@chromium.org","text":"description?","draft":false,"lineno":18,"date":"2012-06-25 23:35:56.662513","left":false},{"author":"kalman","author_email":"kalman@chromium.org","text":"Aren't these always strings?","draft":false,"lineno":30,"date":"2012-06-25 23:35:56.662709","left":false},{"author":"kalman","author_email":"kalman@chromium.org","text":"Why optional?","draft":false,"lineno":68,"date":"2012-06-25 23:35:56.662899","left":false},{"author":"Mihai Parparita -not on Chrome","author_email":"mihaip@chromium.org","text":"Should this also include lastError?","draft":false,"lineno":7,"date":"2012-06-25 23:45:18.149018","left":false},{"author":"Antony Sargent","author_email":"asargent@chromium.org","text":"On 2012/06/25 23:45:18, Mihai Parparita wrote:\n> Should this also include lastError?\n\nYes. Done.","draft":false,"lineno":7,"date":"2012-06-28 23:10:33.634632","left":false},{"author":"Antony Sargent","author_email":"asargent@chromium.org","text":"On 2012/06/25 23:35:56, kalman wrote:\n> description?\n\nDone.","draft":false,"lineno":18,"date":"2012-06-28 23:10:33.634736","left":false},{"author":"Antony Sargent","author_email":"asargent@chromium.org","text":"On 2012/06/25 23:35:56, kalman wrote:\n> Aren't these always strings?\n\nYes, good catch. Fixed.","draft":false,"lineno":30,"date":"2012-06-28 23:10:33.634841","left":false},{"author":"Antony Sargent","author_email":"asargent@chromium.org","text":"On 2012/06/25 23:35:56, kalman wrote:\n> Why optional?\n\nGood catch. I copied this from app.json, where I guess it can return null if called from not within an app. But for chrome.runtime it should always return a value.\n\n","draft":false,"lineno":68,"date":"2012-06-28 23:10:33.634951","left":false}],"id":9003,"is_binary":false},"chrome/renderer/resources/extensions/file_system_custom_bindings.js":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":4,"messages":[],"id":9010,"is_binary":false},"chrome/test/data/extensions/platform_apps/runtime/manifest.json":{"status":"A +","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":9016,"is_binary":false},"chrome/test/data/extensions/platform_apps/restrictions/main.js":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":20,"num_removed":0,"messages":[{"author":"kalman","author_email":"kalman@chromium.org","text":"It might be useful to have separate checks for each of these, it would make it easier to track down regressions.","draft":false,"lineno":165,"date":"2012-06-25 23:35:56.663766","left":false},{"author":"Antony Sargent","author_email":"asargent@chromium.org","text":"On 2012/06/25 23:35:56, kalman wrote:\n> It might be useful to have separate checks for each of these, it would make it\n> easier to track down regressions.\nRefactored to use assertEq for each one.\n\n","draft":false,"lineno":165,"date":"2012-06-28 23:10:33.635278","left":false}],"id":9014,"is_binary":false},"chrome/renderer/resources/extensions/send_request.js":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":18,"num_removed":5,"messages":[{"author":"kalman","author_email":"kalman@chromium.org","text":"chromeHidden is not the place for these methods. Either put them on exports, or even better, not as part of send_request.js at all and in their own module. E.g. last_error.js. (hopefully we can avoid the chrome.runtime = chrome.runtime || {}, why is that necessary anyway?)","draft":false,"lineno":22,"date":"2012-06-25 23:35:56.663561","left":false},{"author":"Antony Sargent","author_email":"asargent@chromium.org","text":"On 2012/06/25 23:35:56, kalman wrote:\n> chromeHidden is not the place for these methods. Either put them on exports, or\n> even better, not as part of send_request.js at all and in their own module. E.g.\n> last_error.js. (hopefully we can avoid the chrome.runtime = chrome.runtime ||\n> {}, why is that necessary anyway?)\n\nDone (Moved these to last_error.js)\n\n","draft":false,"lineno":22,"date":"2012-06-28 23:10:33.635171","left":false}],"id":9013,"is_binary":false},"chrome/common/extensions/api/extension_api.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":12,"num_removed":0,"messages":[{"author":"kalman","author_email":"kalman@chromium.org","text":"Can we do this in ChromeV8Context::GetAvailableExtensionAPIs? I'd rather keep this kind of specific information out of this file, and besides, it might regress in here (e.g. if we convert to features system).","draft":false,"lineno":637,"date":"2012-06-25 23:35:56.661874","left":false},{"author":"kalman","author_email":"kalman@chromium.org","text":"ditto","draft":false,"lineno":734,"date":"2012-06-25 23:35:56.662262","left":false},{"author":"Mihai Parparita -not on Chrome","author_email":"mihaip@chromium.org","text":"Can this also check for feature_name == \"app\", like the other check, in case something ends up with a dependency on apps?\n\nBetter yet, add a IsFeatureAllowedForExtension(feature_name, extension) helper and use it in both?","draft":false,"lineno":639,"date":"2012-06-25 23:45:18.148643","left":false},{"author":"Mihai Parparita -not on Chrome","author_email":"mihaip@chromium.org","text":"Can there be a TODO about this being specifiable more declaratively via the feature system?","draft":false,"lineno":733,"date":"2012-06-25 23:45:18.148841","left":false},{"author":"kalman","author_email":"kalman@chromium.org","text":"if (extension->is_platform_app())\n  RemoveNonPlatformAppAPIs(&temp_result);","draft":false,"lineno":602,"date":"2012-06-26 22:40:30.926014","left":false},{"author":"kalman","author_email":"kalman@chromium.org","text":"On 2012/06/25 23:35:56, kalman wrote:\n> Can we do this in ChromeV8Context::GetAvailableExtensionAPIs? I'd rather keep\n> this kind of specific information out of this file, and besides, it might\n> regress in here (e.g. if we convert to features system).\n\nI changed my mind here, a better way to avoid regressions would be to do something like what we do for removing privileged APIs in the UNBLESSED/CONTENT_SCRIPT cases. I've added a comment where. This would replace the code here and below.","draft":false,"lineno":637,"date":"2012-06-26 22:40:30.926218","left":false},{"author":"Antony Sargent","author_email":"asargent@chromium.org","text":"On 2012/06/26 22:40:30, kalman wrote:\n> On 2012/06/25 23:35:56, kalman wrote:\n> > Can we do this in ChromeV8Context::GetAvailableExtensionAPIs? I'd rather keep\n> > this kind of specific information out of this file, and besides, it might\n> > regress in here (e.g. if we convert to features system).\n> \n> I changed my mind here, a better way to avoid regressions would be to do\n> something like what we do for removing privileged APIs in the\n> UNBLESSED/CONTENT_SCRIPT cases. I've added a comment where. This would replace\n> the code here and below.\n\nOk, I've done it this way.\n","draft":false,"lineno":637,"date":"2012-06-28 23:10:33.634283","left":false},{"author":"Antony Sargent","author_email":"asargent@chromium.org","text":"On 2012/06/25 23:45:18, Mihai Parparita wrote:\n> Can this also check for feature_name == \"app\", like the other check, in case\n> something ends up with a dependency on apps?\n> \n> Better yet, add a IsFeatureAllowedForExtension(feature_name, extension) helper\n> and use it in both?\n\nDone. (up above though)","draft":false,"lineno":639,"date":"2012-06-28 23:10:33.634415","left":false},{"author":"Antony Sargent","author_email":"asargent@chromium.org","text":"On 2012/06/25 23:45:18, Mihai Parparita wrote:\n> Can there be a TODO about this being specifiable more declaratively via the\n> feature system?\nRemoved this code, but added the TODO in other place above.\n\n","draft":false,"lineno":733,"date":"2012-06-28 23:10:33.634522","left":false}],"id":9002,"is_binary":false},"chrome/renderer/extensions/extension_dispatcher.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":3,"messages":[],"id":9007,"is_binary":false}},"owner_email":"asargent@chromium.org","owner":"Antony Sargent","message":"fix merge conflict in patch to restrictions test","try_job_results":[],"created":"2012-06-25 18:40:38.262267","url":null,"num_comments":24,"modified":"2012-06-28 23:10:33.691411","patchset":8001,"issue":10666027}