{"description":"A few more cleanups to the pepper code. Dispatch IPCs in the sockets implementations directly by having each object generate its own routing id. This allows us to remove the code to handle mapping in PepperHelperImpl. Also get rid of ResourceHelper since it was just a wrapper around other methods.\n\nBUG=263054\nR=scottmg@chromium.org\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=215678","cc":["chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","jam@chromium.org"],"reviewers":["scottmg@chromium.org"],"messages":[{"sender":"jam@chromium.org","recipients":["jam@chromium.org","scottmg@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","jam@chromium.org"],"text":"","disapproval":false,"date":"2013-08-01 01:47:28.406410","approval":false},{"sender":"scottmg@chromium.org","recipients":["jam@chromium.org","scottmg@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","jam@chromium.org"],"text":"lgtm\n\nhttps://codereview.chromium.org/20777009/diff/1/content/renderer/pepper/pepper_helper_impl.cc\nFile content/renderer/pepper/pepper_helper_impl.cc (right):\n\nhttps://codereview.chromium.org/20777009/diff/1/content/renderer/pepper/pepper_helper_impl.cc#newcode118\ncontent/renderer/pepper/pepper_helper_impl.cc:118: new PepperBrowserConnection(render_view);\nwhy allocated and leaked now instead of contained?","disapproval":false,"date":"2013-08-01 02:45:02.607900","approval":true},{"sender":"jam@chromium.org","recipients":["jam@chromium.org","scottmg@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","jam@chromium.org"],"text":"https://codereview.chromium.org/20777009/diff/1/content/renderer/pepper/pepper_helper_impl.cc\nFile content/renderer/pepper/pepper_helper_impl.cc (right):\n\nhttps://codereview.chromium.org/20777009/diff/1/content/renderer/pepper/pepper_helper_impl.cc#newcode118\ncontent/renderer/pepper/pepper_helper_impl.cc:118: new PepperBrowserConnection(render_view);\nOn 2013/08/01 02:45:02, scottmg wrote:\n> why allocated and leaked now instead of contained?\n\nthis is a RenderViewObserver which deletes itself when a RenderView goes away. this way it gets to filter IPCs on its own, and can Send, without going through this class","disapproval":false,"date":"2013-08-01 06:53:35.616610","approval":false},{"sender":"jam@chromium.org","recipients":["jam@chromium.org","scottmg@chromium.org","dmichael@chromium.org","ygorshenin@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","jam@chromium.org"],"text":"dmichael: please review src/ppapi\nygorshenin: please review all the files with tcp in their name\n\nmy goal is to keep trimming pepper_helper_impl.cc until i can remove it altogether","disapproval":false,"date":"2013-08-01 21:54:09.025650","approval":false},{"sender":"dmichael@chromium.org","recipients":["jam@chromium.org","scottmg@chromium.org","dmichael@chromium.org","ygorshenin@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","jam@chromium.org"],"text":"Could you make your first line of your commit message a short summary (maybe <= 80 chars)? And s/ResourceTracker/ResourceHelper in the commit message.\n\nlgtm\n\nhttps://codereview.chromium.org/20777009/diff/28001/content/renderer/render_thread_impl.cc\nFile content/renderer/render_thread_impl.cc (right):\n\nhttps://codereview.chromium.org/20777009/diff/28001/content/renderer/render_thread_impl.cc#newcode1285\ncontent/renderer/render_thread_impl.cc:1285: AsyncOpenFileCallback* callback =\nnit: scoped_ptr?\n\nhttps://codereview.chromium.org/20777009/diff/28001/ppapi/proxy/ppb_tcp_server_socket_private_proxy.cc\nFile ppapi/proxy/ppb_tcp_server_socket_private_proxy.cc (right):\n\nhttps://codereview.chromium.org/20777009/diff/28001/ppapi/proxy/ppb_tcp_server_socket_private_proxy.cc#newcode188\nppapi/proxy/ppb_tcp_server_socket_private_proxy.cc:188: TCPServerSocket* socket = static_cast<TCPServerSocket*>(it->second);\nsuggestion: You could DCHECK(PpapiGlobals::Get()->IsHostGlobals()); to make sure this cast is safe.","disapproval":false,"date":"2013-08-01 22:43:01.151490","approval":true},{"sender":"jam@chromium.org","recipients":["jam@chromium.org","scottmg@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","jam@chromium.org"],"text":"after merging ygorshenin's change, no more changes are needed in src/ppapi\n\nygorshenin1-> moving you to cc","disapproval":false,"date":"2013-08-05 17:31:31.218970","approval":false}],"owner_email":"jam@chromium.org","private":false,"base_url":"svn://chrome-svn/chrome/trunk/src/","owner":"jam","subject":"A few more cleanups to the pepper code. Dispatch IPCs in the sockets implementations directly by haâ€¦","created":"2013-08-01 01:30:35.172660","patchsets":[1,28001,82001,105001,140001,161001,177001],"modified":"2013-08-05 21:15:28.966990","closed":true,"commit":false,"issue":20777009}