{"description":"Add support for client-side phishing detection for non-UMA users.\n\nIn this mode, a sanitized pingback is sent that does not include the URL or any\ntokens extracted from the URL or page content.  Currently, this feature is\nbehind a command-line flag.\n\nBUG=none\nTEST=ClientSideDetectionServiceTest,BrowserFeatureExtractorTest\n\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=98168\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=98383","cc":["chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"reviewers":["noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","commit-bot@chromium.org"],"messages":[{"sender":"bryner@chromium.org","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"","disapproval":false,"date":"2011-08-12 00:36:39.972402","approval":false},{"sender":"mattm@chromium.org","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"http://codereview.chromium.org/7635010/diff/1015/chrome/browser/safe_browsing/browser_feature_extractor.h\nFile chrome/browser/safe_browsing/browser_feature_extractor.h (right):\n\nhttp://codereview.chromium.org/7635010/diff/1015/chrome/browser/safe_browsing/browser_feature_extractor.h#newcode78\nchrome/browser/safe_browsing/browser_feature_extractor.h:78: // ClientPhishingRequest.suvfix_prefix_hash.  Public for testing.\nsuvfix\n\nhttp://codereview.chromium.org/7635010/diff/1015/chrome/browser/safe_browsing/client_side_detection_service.cc\nFile chrome/browser/safe_browsing/client_side_detection_service.cc (right):\n\nhttp://codereview.chromium.org/7635010/diff/1015/chrome/browser/safe_browsing/client_side_detection_service.cc#newcode261\nchrome/browser/safe_browsing/client_side_detection_service.cc:261: // Token and term features are not included in the pingback.\nDid you consider a white-listing approach to sanitizing as well?  Either way, should add a comment to the features.h files mentioning that this function may need to be updated if adding new features.","disapproval":false,"date":"2011-08-12 03:00:28.204333","approval":false},{"sender":"bryner@chromium.org","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"Please take another look.\n\nThanks,\n\nhttp://codereview.chromium.org/7635010/diff/1015/chrome/browser/safe_browsing/browser_feature_extractor.h\nFile chrome/browser/safe_browsing/browser_feature_extractor.h (right):\n\nhttp://codereview.chromium.org/7635010/diff/1015/chrome/browser/safe_browsing/browser_feature_extractor.h#newcode78\nchrome/browser/safe_browsing/browser_feature_extractor.h:78: // ClientPhishingRequest.suvfix_prefix_hash.  Public for testing.\nOn 2011/08/12 03:00:28, mattm wrote:\n> suvfix\n\nDone.\n\nhttp://codereview.chromium.org/7635010/diff/1015/chrome/browser/safe_browsing/client_side_detection_service.cc\nFile chrome/browser/safe_browsing/client_side_detection_service.cc (right):\n\nhttp://codereview.chromium.org/7635010/diff/1015/chrome/browser/safe_browsing/client_side_detection_service.cc#newcode261\nchrome/browser/safe_browsing/client_side_detection_service.cc:261: // Token and term features are not included in the pingback.\nOn 2011/08/12 03:00:28, mattm wrote:\n> Did you consider a white-listing approach to sanitizing as well?  Either way,\n> should add a comment to the features.h files mentioning that this function may\n> need to be updated if adding new features.\n\nThat's a good point; I think whitelisting is probably safer in terms of not sending data unintentionally.  I've updated to use this approach, and also added comments in features.h and  browser_features.h as you suggested.","disapproval":false,"date":"2011-08-12 04:52:24.488115","approval":false},{"sender":"noelutz@google.com","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"LGTM\n\nThanks,\nnoe.\n\nhttp://codereview.chromium.org/7635010/diff/5001/chrome/browser/safe_browsing/browser_features.h\nFile chrome/browser/safe_browsing/browser_features.h (right):\n\nhttp://codereview.chromium.org/7635010/diff/5001/chrome/browser/safe_browsing/browser_features.h#newcode19\nchrome/browser/safe_browsing/browser_features.h:19: // TODO(noelutz): move renderer/safe_browsing/features.h to common.\nmove remove this TODO?","disapproval":false,"date":"2011-08-12 21:27:03.237915","approval":true},{"sender":"bryner@chromium.org","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"http://codereview.chromium.org/7635010/diff/5001/chrome/browser/safe_browsing/browser_features.h\nFile chrome/browser/safe_browsing/browser_features.h (right):\n\nhttp://codereview.chromium.org/7635010/diff/5001/chrome/browser/safe_browsing/browser_features.h#newcode19\nchrome/browser/safe_browsing/browser_features.h:19: // TODO(noelutz): move renderer/safe_browsing/features.h to common.\nOn 2011/08/12 21:27:03, noelutz wrote:\n> move remove this TODO?\n\nRemoved.","disapproval":false,"date":"2011-08-12 21:32:25.811769","approval":false},{"sender":"mattm@chromium.org","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"LGTM. I think there will be some conflicts with http://codereview.chromium.org/7583007/, to make merging easier could you wait to submit until after that one has been committed?  Thanks","disapproval":false,"date":"2011-08-12 22:37:13.213391","approval":true},{"sender":"bryner@chromium.org","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"I merged with http://codereview.chromium.org/7583007/ , please take another look before I submit.  This also fixes the logic so that --disable-client-side-detection will consistently override --enable-sanitized-client-side-detection if both flags are specified.","disapproval":false,"date":"2011-08-23 22:11:37.096985","approval":false},{"sender":"noelutz@google.com","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"LGTM\n\nOn 2011/08/23 22:11:37, Brian Ryner wrote:\n> I merged with http://codereview.chromium.org/7583007/ , please take another look\n> before I submit.  This also fixes the logic so that\n> --disable-client-side-detection will consistently override\n> --enable-sanitized-client-side-detection if both flags are specified.","disapproval":false,"date":"2011-08-23 22:21:10.591590","approval":true},{"sender":"noelutz@google.com","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"LGTM\n\nhttp://codereview.chromium.org/7635010/diff/14001/chrome/browser/safe_browsing/browser_feature_extractor.cc\nFile chrome/browser/safe_browsing/browser_feature_extractor.cc (right):\n\nhttp://codereview.chromium.org/7635010/diff/14001/chrome/browser/safe_browsing/browser_feature_extractor.cc#newcode447\nchrome/browser/safe_browsing/browser_feature_extractor.cc:447: void BrowserFeatureExtractor::ComputeURLHashes(\nnit: rename this function to ComputeURLHash?","disapproval":false,"date":"2011-08-23 22:21:25.096183","approval":true},{"sender":"bryner@chromium.org","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"http://codereview.chromium.org/7635010/diff/14001/chrome/browser/safe_browsing/browser_feature_extractor.cc\nFile chrome/browser/safe_browsing/browser_feature_extractor.cc (right):\n\nhttp://codereview.chromium.org/7635010/diff/14001/chrome/browser/safe_browsing/browser_feature_extractor.cc#newcode447\nchrome/browser/safe_browsing/browser_feature_extractor.cc:447: void BrowserFeatureExtractor::ComputeURLHashes(\nOn 2011/08/23 22:21:25, noelutz wrote:\n> nit: rename this function to ComputeURLHash?\n\nI was leaving this generic in case we need to send multiple hashes in the future, but I think you're right that it's clearer for now if it's singular.  Changed.","disapproval":false,"date":"2011-08-23 23:00:50.980999","approval":false},{"sender":"mattm@chromium.org","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"lgtm","disapproval":false,"date":"2011-08-24 03:38:02.092942","approval":true},{"sender":"commit-bot@chromium.org","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","commit-bot@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"Change committed as 98168","disapproval":false,"date":"2011-08-25 02:14:02.356944","approval":false},{"sender":"bryner@chromium.org","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","commit-bot@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"I'll try to commit this again now that http://codereview.chromium.org/7748011/ is committed.","disapproval":false,"date":"2011-08-26 00:41:50.523122","approval":false},{"sender":"commit-bot@chromium.org","recipients":["bryner@chromium.org","noelutz@google.com","gcasto@chromium.org","mattm@chromium.org","commit-bot@chromium.org","chromium-reviews@chromium.org","phajdan.jr@chromium.org","chrome-anti-phishing@googlegroups.com"],"text":"Change committed as 98383","disapproval":false,"date":"2011-08-26 02:29:05.664840","approval":false}],"owner_email":"bryner@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"Brian Ryner","subject":"Add support for client-side phishing detection for non-UMA users.","created":"2011-08-12 00:10:37.776979","patchsets":[1,1015,5001,14001,22001],"modified":"2011-08-26 02:29:05.769856","closed":true,"commit":false,"issue":7635010}