{"description":"Rollback Scavenge implemetation and rely on existing functionality to free\r\n\r\nThis is a landing of a patch provided by antonm.  See:\r\nhttp://codereview.chromium.org/235022\r\n\r\nAlso included change to browser_about_handler.cc to fix build, and I set\r\nTCMALLOC_RELEASE_RATE to 1.0 on line 40 of page_heap.cc (I think this\r\nwas an inadvertent rollback element).\r\n\r\nr=antonm","cc":["chromium-reviews@googlegroups.com","brettw+cc@chromium.org","erikkay@chromium.org","jam@chromium.org","pam+watch@chromium.org","darin@chromium.org","jamesr@chromium.org"],"reviewers":["antonm@chromium.org","mbelshe@chromium.org"],"messages":[{"sender":"jar@chromium.org","recipients":["jar@chromium.org","antonm@chromium.org","mbelshe@chromium.org","chromium-reviews@googlegroups.com","brettw+cc@chromium.org","erikkay@chromium.org","jam@chromium.org","pam+watch@chromium.org","darin@chromium.org","jamesr@chromium.org"],"text":"","disapproval":false,"date":"2009-09-30 21:41:08.491241","approval":false},{"sender":"jar@chromium.org","recipients":["jar@chromium.org","antonm@chromium.org","mbelshe@chromium.org","chromium-reviews@googlegroups.com","brettw+cc@chromium.org","erikkay@chromium.org","jam@chromium.org","pam+watch@chromium.org","darin@chromium.org","jamesr@chromium.org"],"text":"I landed this, but gcl did not properly close it.  The message read:\n\nCommitted revision 27692.\nLoaded authentication cookies from c:\\Users\\jar\\.codereview_upload_cookies\nError accessing url /257009/close\n\nI'll manually close this CL shortly.","disapproval":false,"date":"2009-10-01 00:28:14.191746","approval":false},{"sender":"antonm@google.com","recipients":[],"text":"\nThanks a lot, Jim!\n\nyours,\nanton.\n\nOn Thu, Oct 1, 2009 at 4:28 AM,  <jar@chromium.org> wrote:\n> I landed this, but gcl did not properly close it. =A0The message read:\n>\n> Committed revision 27692.\n> Loaded authentication cookies from c:\\Users\\jar\\.codereview_upload_cookie=\ns\n> Error accessing url /257009/close\n>\n> I'll manually close this CL shortly.\n>\n> http://codereview.chromium.org/257009\n>","disapproval":false,"date":"2009-10-01 12:58:25.051100","approval":false},{"sender":"antonm@google.com","recipients":[],"text":"\nJim,\n\nsetting rate to 0 was intentional---that disable IncrementalScavenge.\n\nyours,\nanton.\n\nOn Thu, Oct 1, 2009 at 1:41 AM,  <jar@chromium.org> wrote:\n> Reviewers: antonm, Mike Belshe,\n>\n> Description:\n> Rollback Scavenge implemetation and rely on existing functionality to fre=\ne\n>\n> This is a landing of a patch provided by antonm. =A0See:\n> http://codereview.chromium.org/235022\n>\n> Also included change to browser_about_handler.cc to fix build, and I set\n> TCMALLOC_RELEASE_RATE to 1.0 on line 40 of page_heap.cc (I think this\n> was an inadvertent rollback element).\n>\n> r=3Dantonm\n>\n> Please review this at http://codereview.chromium.org/257009\n>\n> SVN Base: svn://chrome-svn/chrome/trunk/src/\n>\n> Affected files:\n> =A0M =A0 =A0 chrome/browser/browser_about_handler.cc\n> =A0M =A0 =A0 chrome/renderer/render_thread.cc\n> =A0M =A0 =A0 third_party/tcmalloc/config_linux.h\n> =A0M =A0 =A0 third_party/tcmalloc/config_win.h\n> =A0D =A0 =A0 third_party/tcmalloc/google/malloc_extension.h\n> =A0D =A0 =A0 third_party/tcmalloc/malloc_extension.cc\n> =A0M =A0 =A0 third_party/tcmalloc/page_heap.h\n> =A0M =A0 =A0 third_party/tcmalloc/page_heap.cc\n> =A0M =A0 =A0 third_party/tcmalloc/tcmalloc.cc\n> =A0M =A0 =A0 third_party/tcmalloc/tcmalloc.gyp\n>\n>\n>","disapproval":false,"date":"2009-10-01 13:05:52.227475","approval":false},{"sender":"jar@chromium.org","recipients":[],"text":"The critical point was that without incremental scavenging, we'd currently\nhave no way to release memory in the browser process.  Having this\nincremental scavenge gave us at least a chance to hammer down our browser\nusage over time.\nWas there some other way that the browser would have moved off its\nhigh-water mark without this setting?\n\nJim\n\nOn Thu, Oct 1, 2009 at 6:05 AM, Anton Muhin <antonm@google.com> wrote:\n\n> Jim,\n>\n> setting rate to 0 was intentional---that disable IncrementalScavenge.\n>\n> yours,\n> anton.\n>\n> On Thu, Oct 1, 2009 at 1:41 AM,  <jar@chromium.org> wrote:\n> > Reviewers: antonm, Mike Belshe,\n> >\n> > Description:\n> > Rollback Scavenge implemetation and rely on existing functionality to\n> free\n> >\n> > This is a landing of a patch provided by antonm.  See:\n> > http://codereview.chromium.org/235022\n> >\n> > Also included change to browser_about_handler.cc to fix build, and I set\n> > TCMALLOC_RELEASE_RATE to 1.0 on line 40 of page_heap.cc (I think this\n> > was an inadvertent rollback element).\n> >\n> > r=antonm\n> >\n> > Please review this at http://codereview.chromium.org/257009\n> >\n> > SVN Base: svn://chrome-svn/chrome/trunk/src/\n> >\n> > Affected files:\n> >  M     chrome/browser/browser_about_handler.cc\n> >  M     chrome/renderer/render_thread.cc\n> >  M     third_party/tcmalloc/config_linux.h\n> >  M     third_party/tcmalloc/config_win.h\n> >  D     third_party/tcmalloc/google/malloc_extension.h\n> >  D     third_party/tcmalloc/malloc_extension.cc\n> >  M     third_party/tcmalloc/page_heap.h\n> >  M     third_party/tcmalloc/page_heap.cc\n> >  M     third_party/tcmalloc/tcmalloc.cc\n> >  M     third_party/tcmalloc/tcmalloc.gyp\n> >\n> >\n> >\n>\n","disapproval":false,"date":"2009-10-01 18:20:41.287070","approval":false},{"sender":"antonm@google.com","recipients":[],"text":"\nNot in the active tab (currently), but in the hidden yes.  Was\nplanning to invoke release for active tab as well, but now it's\nprobably unnecessary.\n\nyours,\nanton.\n\nOn Thu, Oct 1, 2009 at 10:20 PM, Jim Roskind <jar@chromium.org> wrote:\n> The critical point was that without incremental scavenging, we'd currentl=\ny\n> have no way to release memory in the browser process. =A0Having this\n> incremental scavenge gave us at least a chance to hammer down our browser\n> usage over time.\n> Was there some other way that the browser would have moved off its\n> high-water mark without this setting?\n>\n> Jim\n>\n> On Thu, Oct 1, 2009 at 6:05 AM, Anton Muhin <antonm@google.com> wrote:\n>>\n>> Jim,\n>>\n>> setting rate to 0 was intentional---that disable IncrementalScavenge.\n>>\n>> yours,\n>> anton.\n>>\n>> On Thu, Oct 1, 2009 at 1:41 AM, =A0<jar@chromium.org> wrote:\n>> > Reviewers: antonm, Mike Belshe,\n>> >\n>> > Description:\n>> > Rollback Scavenge implemetation and rely on existing functionality to\n>> > free\n>> >\n>> > This is a landing of a patch provided by antonm. =A0See:\n>> > http://codereview.chromium.org/235022\n>> >\n>> > Also included change to browser_about_handler.cc to fix build, and I s=\net\n>> > TCMALLOC_RELEASE_RATE to 1.0 on line 40 of page_heap.cc (I think this\n>> > was an inadvertent rollback element).\n>> >\n>> > r=3Dantonm\n>> >\n>> > Please review this at http://codereview.chromium.org/257009\n>> >\n>> > SVN Base: svn://chrome-svn/chrome/trunk/src/\n>> >\n>> > Affected files:\n>> > =A0M =A0 =A0 chrome/browser/browser_about_handler.cc\n>> > =A0M =A0 =A0 chrome/renderer/render_thread.cc\n>> > =A0M =A0 =A0 third_party/tcmalloc/config_linux.h\n>> > =A0M =A0 =A0 third_party/tcmalloc/config_win.h\n>> > =A0D =A0 =A0 third_party/tcmalloc/google/malloc_extension.h\n>> > =A0D =A0 =A0 third_party/tcmalloc/malloc_extension.cc\n>> > =A0M =A0 =A0 third_party/tcmalloc/page_heap.h\n>> > =A0M =A0 =A0 third_party/tcmalloc/page_heap.cc\n>> > =A0M =A0 =A0 third_party/tcmalloc/tcmalloc.cc\n>> > =A0M =A0 =A0 third_party/tcmalloc/tcmalloc.gyp\n>> >\n>> >\n>> >\n>\n>","disapproval":false,"date":"2009-10-01 18:24:19.196261","approval":false}],"owner_email":"jar@chromium.org","private":false,"base_url":"svn://chrome-svn/chrome/trunk/src/","owner":"jar","subject":"Rollback Scavenge implemetation and rely on existing functionality to free...","created":"2009-09-30 20:41:25.677228","patchsets":[1,1006],"modified":"2011-05-28 03:21:43.953874","closed":true,"commit":false,"issue":257009}