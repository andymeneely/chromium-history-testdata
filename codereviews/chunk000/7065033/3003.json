{"files":{"chrome/common/extensions/docs/examples/extensions/proxy_configuration/proxy_form_controller.js":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":4,"messages":[],"id":37,"is_binary":false},"chrome/common/extensions/docs/samples.json":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":40,"is_binary":false},"chrome/browser/extensions/extension_pref_value_map_unittest.cc":{"status":"M","num_chunks":13,"no_base_file":false,"property_changes":"","num_added":51,"num_removed":39,"messages":[],"id":26,"is_binary":false},"chrome/common/extensions/docs/static/preferences.html":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":12,"messages":[],"id":41,"is_binary":false},"chrome/browser/extensions/extension_prefs_unittest.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":14,"messages":[],"id":31,"is_binary":false},"chrome/browser/extensions/extension_preference_api.cc":{"status":"M","num_chunks":7,"no_base_file":false,"property_changes":"","num_added":27,"num_removed":12,"messages":[{"author":"Matt Perry","author_email":"mpcomplete@chromium.org","text":"Hmm.. what is the desired behavior for the preferences API in a split-mode extension? include_incognito will always be false in that case.\n\nYou probably want to restrict things this way:\n- split-mode regular profile: error unless scope is kRegular\n- split-mode incognito profile: error unless scope is kIncognito*","draft":false,"lineno":371,"date":"2011-05-24 21:04:56.839925","left":false},{"author":"Bernhard Bauer","author_email":"bauerb@chromium.org","text":"On 2011/05/24 21:04:56, Matt Perry wrote:\n> Hmm.. what is the desired behavior for the preferences API in a split-mode\n> extension? include_incognito will always be false in that case.\n> \n> You probably want to restrict things this way:\n> - split-mode regular profile: error unless scope is kRegular\n> - split-mode incognito profile: error unless scope is kIncognito*\n\nMy idea behind it was that for a split-mode incognito profile regular scope is automatically mapped to incognito.","draft":false,"lineno":371,"date":"2011-05-24 21:16:25.248628","left":false},{"author":"battre","author_email":"battre@chromium.org","text":"On 2011/05/24 21:16:25, Bernhard Bauer wrote:\n> On 2011/05/24 21:04:56, Matt Perry wrote:\n> > Hmm.. what is the desired behavior for the preferences API in a split-mode\n> > extension? include_incognito will always be false in that case.\n> > \n> > You probably want to restrict things this way:\n> > - split-mode regular profile: error unless scope is kRegular\n> > - split-mode incognito profile: error unless scope is kIncognito*\n> \n> My idea behind it was that for a split-mode incognito profile regular scope is\n> automatically mapped to incognito.\n\nI am not familiar with the split-mode preferences - in particular how I can figure out whether a extension runs in split mode. Can you please provide the snippet you would like to see here?\nThanks.","draft":false,"lineno":371,"date":"2011-05-25 11:31:45.905935","left":false},{"author":"Matt Perry","author_email":"mpcomplete@chromium.org","text":"On 2011/05/25 11:31:45, battre wrote:\n> On 2011/05/24 21:16:25, Bernhard Bauer wrote:\n> > On 2011/05/24 21:04:56, Matt Perry wrote:\n> > > Hmm.. what is the desired behavior for the preferences API in a split-mode\n> > > extension? include_incognito will always be false in that case.\n> > > \n> > > You probably want to restrict things this way:\n> > > - split-mode regular profile: error unless scope is kRegular\n> > > - split-mode incognito profile: error unless scope is kIncognito*\n> > \n> > My idea behind it was that for a split-mode incognito profile regular scope is\n> > automatically mapped to incognito.\n> \n> I am not familiar with the split-mode preferences - in particular how I can\n> figure out whether a extension runs in split mode. Can you please provide the\n> snippet you would like to see here?\n> Thanks.\n\nbool incognito = (scope == ...);\nif (incognito) {\n  // regular profiles can't access incognito unless\n  // include_incognito is true.\n  if (!profile()->IsOffTheRecord() && !include_incognito())\n    error = kIncognitoErrorMessage;\n} else {\n  // incognito profiles can't access regular mode ever. \n  // (they only exist in split mode).\n  if (profile()->IsOffTheRecord())\n    error = \"Incognito extension can't access regular settings.\";\n}","draft":false,"lineno":371,"date":"2011-05-25 18:40:42.382656","left":false},{"author":"battre","author_email":"battre@chromium.org","text":"On 2011/05/25 18:40:42, Matt Perry wrote:\n> On 2011/05/25 11:31:45, battre wrote:\n> > On 2011/05/24 21:16:25, Bernhard Bauer wrote:\n> > > On 2011/05/24 21:04:56, Matt Perry wrote:\n> > > > Hmm.. what is the desired behavior for the preferences API in a split-mode\n> > > > extension? include_incognito will always be false in that case.\n> > > > \n> > > > You probably want to restrict things this way:\n> > > > - split-mode regular profile: error unless scope is kRegular\n> > > > - split-mode incognito profile: error unless scope is kIncognito*\n> > > \n> > > My idea behind it was that for a split-mode incognito profile regular scope\n> is\n> > > automatically mapped to incognito.\n> > \n> > I am not familiar with the split-mode preferences - in particular how I can\n> > figure out whether a extension runs in split mode. Can you please provide the\n> > snippet you would like to see here?\n> > Thanks.\n> \n> bool incognito = (scope == ...);\n> if (incognito) {\n>   // regular profiles can't access incognito unless\n>   // include_incognito is true.\n>   if (!profile()->IsOffTheRecord() && !include_incognito())\n>     error = kIncognitoErrorMessage;\n> } else {\n>   // incognito profiles can't access regular mode ever. \n>   // (they only exist in split mode).\n>   if (profile()->IsOffTheRecord())\n>     error = \"Incognito extension can't access regular settings.\";\n> }\n\nDone.","draft":false,"lineno":371,"date":"2011-05-25 19:47:44.197883","left":false}],"id":27,"is_binary":false},"chrome/common/extensions/docs/examples/extensions/proxy_configuration.zip":{"status":null,"num_chunks":0,"no_base_file":false,"property_changes":"","num_added":-1,"num_removed":-1,"messages":[],"id":35,"is_binary":false},"chrome/test/data/extensions/api_test/content_settings/incognito/test.html":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":4,"messages":[],"id":43,"is_binary":false},"chrome/browser/extensions/extension_pref_value_map.h":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":9,"num_removed":6,"messages":[],"id":25,"is_binary":false},"chrome/test/data/extensions/api_test/proxy/individual_incognito_also/test.js":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":2,"messages":[],"id":46,"is_binary":false},"chrome/common/extensions/api/extension_api.json":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":4,"num_removed":4,"messages":[],"id":34,"is_binary":false},"chrome/common/extensions/docs/proxy.html":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":2,"messages":[],"id":39,"is_binary":false},"chrome/browser/extensions/extension_prefs.h":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":3,"messages":[],"id":29,"is_binary":false},"chrome/browser/extensions/extension_prefs_scope.h":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":23,"num_removed":0,"messages":[{"author":"Matt Perry","author_email":"mpcomplete@chromium.org","text":"This should not be a namespace. See this discussion on chromium-dev http://groups.google.com/a/chromium.org/group/chromium-dev/browse_thread/thread/455a6ceb4e8807f8/a650ba672aebd2aa?lnk=gst&q=Namespace+usage+clarifications#a650ba672aebd2aa\n\nI'd say you can just make it a member of either the ExtensionPrefs or ExtensionPrefValueMap class.","draft":false,"lineno":9,"date":"2011-05-24 21:04:56.840146","left":false},{"author":"battre","author_email":"battre@chromium.org","text":"On 2011/05/24 21:04:56, Matt Perry wrote:\n> This should not be a namespace. See this discussion on chromium-dev\n> http://groups.google.com/a/chromium.org/group/chromium-dev/browse_thread/thread/455a6ceb4e8807f8/a650ba672aebd2aa?lnk=gst&q=Namespace+usage+clarifications#a650ba672aebd2aa\n> \n> I'd say you can just make it a member of either the ExtensionPrefs or\n> ExtensionPrefValueMap class.\n\nBoth would be a layering violation.\n- ExtensionPrefValueMap is an implementation detail that should not be visible to consumers of ExtensionPrefs.\n- ExtensionPrefs on the other hand builds upon ExtensionPrefValueMap and therefore should not be required for ExtensionPrefValueMap.\n\nI have taken a note and propose to discuss this afterwards. After all it is just an implementation detail that is not visible to the outside.","draft":false,"lineno":9,"date":"2011-05-25 11:31:45.906167","left":false},{"author":"Bernhard Bauer","author_email":"bauerb@chromium.org","text":"On 2011/05/25 11:31:45, battre wrote:\n> On 2011/05/24 21:04:56, Matt Perry wrote:\n> > This should not be a namespace. See this discussion on chromium-dev\n> >\n> http://groups.google.com/a/chromium.org/group/chromium-dev/browse_thread/thread/455a6ceb4e8807f8/a650ba672aebd2aa?lnk=gst&q=Namespace+usage+clarifications#a650ba672aebd2aa\n> > \n> > I'd say you can just make it a member of either the ExtensionPrefs or\n> > ExtensionPrefValueMap class.\n> \n> Both would be a layering violation.\n> - ExtensionPrefValueMap is an implementation detail that should not be visible\n> to consumers of ExtensionPrefs.\n> - ExtensionPrefs on the other hand builds upon ExtensionPrefValueMap and\n> therefore should not be required for ExtensionPrefValueMap.\n> \n> I have taken a note and propose to discuss this afterwards. After all it is just\n> an implementation detail that is not visible to the outside.\n\nHow about just calling it ExtensionPrefScope?","draft":false,"lineno":9,"date":"2011-05-25 17:48:34.990617","left":false},{"author":"Matt Perry","author_email":"mpcomplete@chromium.org","text":"On 2011/05/25 11:31:45, battre wrote:\n> On 2011/05/24 21:04:56, Matt Perry wrote:\n> > This should not be a namespace. See this discussion on chromium-dev\n> >\n> http://groups.google.com/a/chromium.org/group/chromium-dev/browse_thread/thread/455a6ceb4e8807f8/a650ba672aebd2aa?lnk=gst&q=Namespace+usage+clarifications#a650ba672aebd2aa\n> > \n> > I'd say you can just make it a member of either the ExtensionPrefs or\n> > ExtensionPrefValueMap class.\n> \n> Both would be a layering violation.\n> - ExtensionPrefValueMap is an implementation detail that should not be visible\n> to consumers of ExtensionPrefs.\n> - ExtensionPrefs on the other hand builds upon ExtensionPrefValueMap and\n> therefore should not be required for ExtensionPrefValueMap.\n> \n> I have taken a note and propose to discuss this afterwards. After all it is just\n> an implementation detail that is not visible to the outside.\n\nPlease add a TODO(battre) in that case.","draft":false,"lineno":9,"date":"2011-05-25 18:40:42.382915","left":false},{"author":"battre","author_email":"battre@chromium.org","text":"On 2011/05/25 18:40:42, Matt Perry wrote:\n> On 2011/05/25 11:31:45, battre wrote:\n> > On 2011/05/24 21:04:56, Matt Perry wrote:\n> > > This should not be a namespace. See this discussion on chromium-dev\n> > >\n> >\n> http://groups.google.com/a/chromium.org/group/chromium-dev/browse_thread/thread/455a6ceb4e8807f8/a650ba672aebd2aa?lnk=gst&q=Namespace+usage+clarifications#a650ba672aebd2aa\n> > > \n> > > I'd say you can just make it a member of either the ExtensionPrefs or\n> > > ExtensionPrefValueMap class.\n> > \n> > Both would be a layering violation.\n> > - ExtensionPrefValueMap is an implementation detail that should not be visible\n> > to consumers of ExtensionPrefs.\n> > - ExtensionPrefs on the other hand builds upon ExtensionPrefValueMap and\n> > therefore should not be required for ExtensionPrefValueMap.\n> > \n> > I have taken a note and propose to discuss this afterwards. After all it is\n> just\n> > an implementation detail that is not visible to the outside.\n> \n> Please add a TODO(battre) in that case.\n\nDone.","draft":false,"lineno":9,"date":"2011-05-25 19:47:44.198160","left":false}],"id":30,"is_binary":false},"chrome/test/data/extensions/api_test/proxy/individual_incognito_only/test.js":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":47,"is_binary":false},"chrome/chrome_browser.gypi":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":33,"is_binary":false},"chrome/test/data/extensions/api_test/content_settings/standard/test.html":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":45,"is_binary":false},"chrome/browser/extensions/extension_proxy_apitest.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":4,"messages":[],"id":32,"is_binary":false},"chrome/common/extensions/docs/preferences.html":{"status":"M","num_chunks":8,"no_base_file":false,"property_changes":"","num_added":22,"num_removed":17,"messages":[],"id":38,"is_binary":false},"chrome/common/extensions/docs/examples/extensions/proxy_configuration/popup.html":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":0,"num_removed":4,"messages":[],"id":36,"is_binary":false},"chrome/common/extensions/docs/static/proxy.html":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":3,"messages":[],"id":42,"is_binary":false},"chrome/browser/extensions/extension_content_settings_apitest.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":0,"num_removed":3,"messages":[],"id":23,"is_binary":false},"chrome/browser/extensions/extension_prefs.cc":{"status":"M","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":57,"num_removed":19,"messages":[],"id":28,"is_binary":false},"chrome/browser/extensions/extension_pref_value_map.cc":{"status":"M","num_chunks":7,"no_base_file":false,"property_changes":"","num_added":39,"num_removed":22,"messages":[],"id":24,"is_binary":false},"chrome/test/data/extensions/api_test/content_settings/onchange/test.html":{"status":"M","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":9,"messages":[],"id":44,"is_binary":false}},"owner_email":"battre@chromium.org","owner":"battre","message":"Fixed a unit test","try_job_results":[],"created":"2011-05-24 19:28:33.963636","url":null,"num_comments":10,"modified":"2011-05-25 19:47:44.231512","patchset":3003,"issue":7065033}