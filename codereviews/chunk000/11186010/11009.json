{"files":{"chrome/test/base/chrome_test_suite.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":17017,"is_binary":false},"chrome/browser/android/google_location_settings_helper.cc":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":57,"num_removed":0,"messages":[],"id":17006,"is_binary":false},"chrome/browser/android/google_location_settings_helper.h":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":40,"num_removed":0,"messages":[{"author":"bulach","author_email":"bulach@chromium.org","text":"nit: C++ comments are // instead of /* */","draft":false,"lineno":20,"date":"2012-10-23 13:06:26.581590","left":false},{"author":"bulach","author_email":"bulach@chromium.org","text":"nit: add \\n after this.\nalso, the destructor shouldn't be inline, as this class contains non-POD member (clang bot will complain..)","draft":false,"lineno":24,"date":"2012-10-23 13:06:26.581810","left":false},{"author":"bulach","author_email":"bulach@chromium.org","text":"this will leak.. :(\n\nhow about we invert the dependency?\nrather than this class requiring the embedder to call \"Set...Factory\", we could:\n\n- make this class a pure c++ interface.\n- add \"static GoogleLocationSettingsHelper* Create()\"\n|__ this method will be implemented by content shell, or the android app. in tests, we could then implement a mock\n\n- if you agree with the above, we could completely remove all the java files from this patch... that is, chromium requires a very thin C++ interface, and in the app side in android it's an implementation detail that it happens to be implemented in java. both content shell and tests can then provide their own implementations..\n","draft":false,"lineno":35,"date":"2012-10-23 13:06:26.581990","left":false},{"author":"Jay Civelli","author_email":"jcivelli@chromium.org","text":"On 2012/10/23 13:06:26, bulach wrote:\n> this will leak.. :(\nIt should not be too bad a leak though, we only have one GoogleLocationSettingsHelperFactory per run of the application.\n\n> \n> how about we invert the dependency?\n> rather than this class requiring the embedder to call \"Set...Factory\", we could:\n> \n> - make this class a pure c++ interface.\n> - add \"static GoogleLocationSettingsHelper* Create()\"\n> |__ this method will be implemented by content shell, or the android app. in\n> tests, we could then implement a mock\n> \n> - if you agree with the above, we could completely remove all the java files\n> from this patch... that is, chromium requires a very thin C++ interface, and in\n> the app side in android it's an implementation detail that it happens to be\n> implemented in java. both content shell and tests can then provide their own\n> implementations..\nI believe this is the approach that Ramya had originally taken but then review comments suggested her to go the factory route, so she reimplemented it that way.\nDo you think she could revisit that at a later point?\n\n","draft":false,"lineno":35,"date":"2012-10-23 17:37:53.229190","left":false},{"author":"Ramya","author_email":"cramya@chromium.org","text":"On 2012/10/23 13:06:26, bulach wrote:\n> nit: C++ comments are // instead of /* */\n\nDone.","draft":false,"lineno":20,"date":"2012-10-23 21:57:14.001010","left":false},{"author":"Ramya","author_email":"cramya@chromium.org","text":"On 2012/10/23 13:06:26, bulach wrote:\n> nit: add \\n after this.\n> also, the destructor shouldn't be inline, as this class contains non-POD member\n> (clang bot will complain..)\n\nDone.","draft":false,"lineno":24,"date":"2012-10-23 21:57:14.001280","left":false}],"id":17007,"is_binary":false},"chrome/android/testshell/testshell_stubs.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":17004,"is_binary":false},"chrome/browser/geolocation/chrome_geolocation_permission_context_android.h":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":11,"num_removed":0,"messages":[],"id":17013,"is_binary":false},"chrome/browser/geolocation/chrome_geolocation_permission_context.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":11,"num_removed":0,"messages":[{"author":"John Knottenbelt","author_email":"jknotten@chromium.org","text":"Remove this diff as the code is already in ChromeGeolocationPermissionContextAndroid::DecidePermission","draft":false,"lineno":98,"date":"2012-10-23 13:10:05.503730","left":false},{"author":"Ramya","author_email":"cramya@chromium.org","text":"On 2012/10/23 13:10:05, John Knottenbelt wrote:\n> Remove this diff as the code is already in\n> ChromeGeolocationPermissionContextAndroid::DecidePermission\n\nDone.","draft":false,"lineno":98,"date":"2012-10-23 21:57:14.001560","left":false}],"id":17010,"is_binary":false},"chrome/browser/geolocation/geolocation_confirm_infobar_delegate_android.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":21,"num_removed":3,"messages":[],"id":17014,"is_binary":false},"chrome/android/java/src/org/chromium/chrome/browser/GoogleLocationSettingsHelperImpl.java":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":43,"num_removed":0,"messages":[{"author":"bulach","author_email":"bulach@chromium.org","text":"nit: maybe \"Stub\" rather than Impl, since the real Impl will live in the other side?","draft":false,"lineno":15,"date":"2012-10-23 13:06:26.581190","left":false},{"author":"bulach","author_email":"bulach@chromium.org","text":"since this is just a stub, maybe inline this in 26?","draft":false,"lineno":18,"date":"2012-10-23 13:06:26.581360","left":false},{"author":"Ramya","author_email":"cramya@chromium.org","text":"On 2012/10/23 13:06:26, bulach wrote:\n> nit: maybe \"Stub\" rather than Impl, since the real Impl will live in the other\n> side?\n\nDone.","draft":false,"lineno":15,"date":"2012-10-23 21:57:14.000520","left":false},{"author":"Ramya","author_email":"cramya@chromium.org","text":"On 2012/10/23 13:06:26, bulach wrote:\n> since this is just a stub, maybe inline this in 26?\n\nDone.","draft":false,"lineno":18,"date":"2012-10-23 21:57:14.000770","left":false}],"id":17003,"is_binary":false},"chrome/chrome_browser.gypi":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":0,"messages":[],"id":17016,"is_binary":false},"chrome/browser/geolocation/chrome_geolocation_permission_context_android.cc":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":28,"num_removed":1,"messages":[],"id":17012,"is_binary":false},"chrome/browser/geolocation/chrome_geolocation_permission_context.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":17011,"is_binary":false},"chrome/browser/android/google_location_settings_helper_factory.h":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":32,"num_removed":0,"messages":[],"id":17009,"is_binary":false},"chrome/browser/android/chrome_jni_registrar.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":0,"messages":[],"id":17005,"is_binary":false},"chrome/android/java/src/org/chromium/chrome/browser/GoogleLocationSettingsHelper.java":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":0,"messages":[{"author":"bulach","author_email":"bulach@chromium.org","text":"nit: remove \\n","draft":false,"lineno":13,"date":"2012-10-23 13:06:26.580960","left":false},{"author":"Ramya","author_email":"cramya@chromium.org","text":"On 2012/10/23 13:06:26, bulach wrote:\n> nit: remove \\n\n\nDone.","draft":false,"lineno":13,"date":"2012-10-23 21:57:14.000260","left":false}],"id":17002,"is_binary":false},"chrome/browser/android/google_location_settings_helper_factory.cc":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":25,"num_removed":0,"messages":[],"id":17008,"is_binary":false},"base/android/jni_generator/jni_generator.py":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":17001,"is_binary":false},"chrome/browser/geolocation/geolocation_confirm_infobar_delegate_android.h":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":0,"messages":[],"id":17015,"is_binary":false}},"owner_email":"cramya@chromium.org","owner":"Ramya","message":"Missed removing some diffs","try_job_results":[],"created":"2012-10-22 23:57:02.516630","url":null,"num_comments":14,"modified":"2012-10-23 21:57:14.047850","patchset":11009,"issue":11186010}