{"description":"Linux: support css font-family fallback.\n\nCurrently we'll always take the first element of a font-family list and\nrun with it, using fontconfig's fallback. This adds a, slightly hacky,\ntest to see if the fontconfig result is good enough and, if not, reports\nthe failure back into WebKit so that other font-family elements can be\ntried.\n\nThis fixes LayoutTests/css2.1/t040103-escapes-01-b.html","cc":["chromium-reviews@googlegroups.com"],"reviewers":["evan@chromium.org"],"messages":[{"sender":"agl@chromium.org","recipients":["agl@chromium.org","evan@chromium.org","chromium-reviews@googlegroups.com"],"text":"","disapproval":false,"date":"2008-12-03 19:10:57.240941","approval":false},{"sender":"evan@chromium.org","recipients":["agl@chromium.org","evan@chromium.org","chromium-reviews@googlegroups.com"],"text":"Thanks for the awesome comment in the code explaining the rationale -- makes it quite clear.\n\nhttp://codereview.chromium.org/12914/diff/1/2\nFile skia/ports/SkFontHost_fontconfig.cpp (right):\n\nhttp://codereview.chromium.org/12914/diff/1/2#newcode182\nLine 182: FcPatternDestroy(pattern);\nCouldn't you move this destroy up a bunch and then smash together these family_names_match tests (and even perhaps elminiate the bool)?\n\nhttp://codereview.chromium.org/12914/diff/1/5\nFile webkit/tools/test_shell/resources/linux-fontconfig-config (right):\n\nhttp://codereview.chromium.org/12914/diff/1/5#newcode36\nLine 36: <edit name=\"family\" mode=\"assign\">\nIs this really correct for layout tests?  Maybe it could use a comment indicating why.","disapproval":false,"date":"2008-12-03 19:19:24.231487","approval":false},{"sender":"agl@chromium.org","recipients":["agl@chromium.org","evan@chromium.org","chromium-reviews@googlegroups.com"],"text":"http://codereview.chromium.org/12914/diff/1/2\nFile skia/ports/SkFontHost_fontconfig.cpp (right):\n\nhttp://codereview.chromium.org/12914/diff/1/2#newcode182\nLine 182: FcPatternDestroy(pattern);\nOn 2008/12/03 19:19:24, Evan Martin wrote:\n> Couldn't you move this destroy up a bunch and then smash together these\n> family_names_match tests (and even perhaps elminiate the bool)?\n\nWell, I certainly remove the fprintf there :) However, the post_match_family string points into this object, so it cannot be destroyed before family_names_match is calculated.\n\nhttp://codereview.chromium.org/12914/diff/1/5\nFile webkit/tools/test_shell/resources/linux-fontconfig-config (right):\n\nhttp://codereview.chromium.org/12914/diff/1/5#newcode36\nLine 36: <edit name=\"family\" mode=\"assign\">\nOn 2008/12/03 19:19:24, Evan Martin wrote:\n> Is this really correct for layout tests?  Maybe it could use a comment\n> indicating why.\n\nDone.","disapproval":false,"date":"2008-12-03 19:24:35.398318","approval":false},{"sender":"evan@chromium.org","recipients":["agl@chromium.org","evan@chromium.org","chromium-reviews@googlegroups.com"],"text":"Some stars cling to right\nI haven't the heart to bitch\nRest looks good to me","disapproval":false,"date":"2008-12-03 19:26:38.961688","approval":false}],"owner_email":"agl@chromium.org","private":false,"base_url":"","owner":"agl","subject":"Linux: support css font-family fallback.","created":"2008-12-03 19:10:40.971681","patchsets":[1,205],"modified":"2011-05-24 20:16:51.714240","closed":true,"commit":false,"issue":12914}