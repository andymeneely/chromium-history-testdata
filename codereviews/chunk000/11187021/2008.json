{"files":{"chrome/browser/sync_file_system/remote_file_provider.cc":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":37,"num_removed":0,"messages":[],"id":9001,"is_binary":false},"chrome/browser/sync_file_system/remote_file_provider.h":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":115,"num_removed":0,"messages":[{"author":"kinuko","author_email":"kinuko@chromium.org","text":"This class provides access to the remote side changes. ?","draft":false,"lineno":34,"date":"2012-10-18 13:54:32.704070","left":false},{"author":"kinuko","author_email":"kinuko@chromium.org","text":"Registers |origin| to track remote side changes for the |origin|. ?","draft":false,"lineno":43,"date":"2012-10-18 13:54:32.704310","left":false},{"author":"kinuko","author_email":"kinuko@chromium.org","text":"On the second thought I may prefer having this on RemoteFileProvider.  Or we should make it clearer if each method is for a current change or for the provider itself.\n\nAlso in the current interface it's unclear when we populate a next change...\n\nI think I still like a simpler traditional design like following:\n\nclass RemoteChange {\n  bool IsDeletion();\n  bool IsDirectory();\n  FileSystemURL& GetURL();\n};\n\nclass RemoteFileSyncService {\n  explicit RemoteFileSyncService(RemoteChangeObserver* observer);\n\n  void RegisterOriginForTrackChanges(origin);\n  void UnregisterOriginForTrackChanges(origin);\n\n  // Returns a next available remote change.\n  // This returns NULL if no changes are available.\n  // The returned change becomes invalid once FinalizeChange() is called on this\n  // change or after this service gets killed.\n  // Also calling this again without finalizing or ungetting the returned change\n  // (by calling FinalizeChange or UngetChange) is invalid.\n  // The ownership of the returned change is owned by this service and must not\n  // be deleted by the caller.\n  RemoteChange* GetNextChange();\n\n  // Finalizes the given change.\n  // This must be called before next GetNextChange() is called.\n  void FinalizeChange(RemoteChange*);\n\n  // Ungets the given change. This is useful when the consumer of the change\n  // is not ready for process and wants to revisit the change later.\n  void UngetChange(RemoteChange*);\n\n  // ...\n};\n\nWDYT? Let me know if I'm missing something.\n(I changed some class names or reverted some name changes; let's talk offline about them... sorry for not being really decisive)","draft":false,"lineno":44,"date":"2012-10-18 13:54:32.704530","left":false},{"author":"kinuko","author_email":"kinuko@chromium.org","text":"Unregisters |origin| so that this provider no longer returns changes for the |origin|.","draft":false,"lineno":48,"date":"2012-10-18 13:54:32.704710","left":false},{"author":"kinuko","author_email":"kinuko@chromium.org","text":"nit: Change -> Changes ?","draft":false,"lineno":52,"date":"2012-10-18 13:54:32.704880","left":false},{"author":"kinuko","author_email":"kinuko@chromium.org","text":"How do we know if a change is for a file or a directory?\n","draft":false,"lineno":60,"date":"2012-10-18 13:54:32.705080","left":false},{"author":"kinuko","author_email":"kinuko@chromium.org","text":"For consistency & since this interface is still specific to the sync service can we rename this to RemoteFileSyncService?\n(Or RemoteFileSyncBackend maybe)","draft":false,"lineno":75,"date":"2012-10-18 13:54:32.705310","left":false},{"author":"tzik","author_email":"tzik@chromium.org","text":"On 2012/10/18 13:54:32, kinuko wrote:\n> How do we know if a change is for a file or a directory?\n\nChange data from Drive server seems not containing mime-type, which is needed to determine the file was file or directory.\nIs it needed for proceeding RemoteSync?\n\nIf it's needed, we can add a field to database entry to store that.","draft":false,"lineno":60,"date":"2012-10-19 04:32:07.960910","left":false},{"author":"tzik","author_email":"tzik@chromium.org","text":"On 2012/10/18 13:54:32, kinuko wrote:\n> Registers |origin| to track remote side changes for the |origin|. ?\n\nDone.","draft":false,"lineno":43,"date":"2012-10-23 04:19:32.561540","left":false},{"author":"tzik","author_email":"tzik@chromium.org","text":"On 2012/10/18 13:54:32, kinuko wrote:\n> Unregisters |origin| so that this provider no longer returns changes for the\n> |origin|.\n\nDone.","draft":false,"lineno":48,"date":"2012-10-23 04:19:32.561810","left":false},{"author":"tzik","author_email":"tzik@chromium.org","text":"On 2012/10/18 13:54:32, kinuko wrote:\n> For consistency & since this interface is still specific to the sync service can\n> we rename this to RemoteFileSyncService?\n> (Or RemoteFileSyncBackend maybe)\n\nDone.","draft":false,"lineno":75,"date":"2012-10-23 04:19:32.562030","left":false}],"id":9002,"is_binary":false},"chrome/browser/sync_file_system/sync_file_system_service.cc":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":77,"num_removed":9,"messages":[{"author":"kinuko","author_email":"kinuko@chromium.org","text":"Until we resolve the TODO on line 158 don't we hit this assertion?","draft":false,"lineno":54,"date":"2012-10-18 13:54:32.705500","left":false},{"author":"kinuko","author_email":"kinuko@chromium.org","text":"Hmm... while you're there can you also change this to app_url.GetOrigin() ?","draft":false,"lineno":57,"date":"2012-10-18 13:54:32.705680","left":false},{"author":"kinuko","author_email":"kinuko@chromium.org","text":"We also need to handle directory cases.\n","draft":false,"lineno":105,"date":"2012-10-18 13:54:32.705850","left":false},{"author":"tzik","author_email":"tzik@chromium.org","text":"On 2012/10/18 13:54:32, kinuko wrote:\n> Hmm... while you're there can you also change this to app_url.GetOrigin() ?\n\nDone.","draft":false,"lineno":57,"date":"2012-10-23 04:19:32.562240","left":false}],"id":9003,"is_binary":false},"chrome/browser/sync_file_system/sync_file_system_service.h":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":19,"num_removed":2,"messages":[{"author":"kinuko","author_email":"kinuko@chromium.org","text":"Not necessary for now?","draft":false,"lineno":52,"date":"2012-10-18 13:54:32.706020","left":false},{"author":"kinuko","author_email":"kinuko@chromium.org","text":"remote_sync_is_running_ at least for now?","draft":false,"lineno":68,"date":"2012-10-18 13:54:32.706200","left":false},{"author":"tzik","author_email":"tzik@chromium.org","text":"On 2012/10/18 13:54:32, kinuko wrote:\n> Not necessary for now?\n\nDone.","draft":false,"lineno":52,"date":"2012-10-23 04:19:32.562470","left":false}],"id":9004,"is_binary":false},"chrome/chrome_browser.gypi":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":9005,"is_binary":false}},"owner_email":"tzik@chromium.org","owner":"tzik","message":"''","try_job_results":[],"created":"2012-10-18 07:13:57.095240","url":null,"num_comments":18,"modified":"2012-10-23 04:19:32.616740","patchset":2008,"issue":11187021}