{"files":{"remoting/protocol/transport_config.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":1,"messages":[],"id":21,"is_binary":false},"remoting/protocol/transport_config.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[{"author":"Wez","author_email":"wez@chromium.org","text":"nit: Specifying the range as inclusive does mean that you can't set min_port=max_port to disable port allocation entirely.  Probably not an issue here, though.","draft":false,"lineno":23,"date":"2012-02-17 20:58:01.819012","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> nit: Specifying the range as inclusive does mean that you can't set\n> min_port=max_port to disable port allocation entirely.  Probably not an issue\n> here, though.\n\nYou can always set min_port=1000, max_port=999.","draft":false,"lineno":23,"date":"2012-02-17 23:02:33.812669","left":false}],"id":22,"is_binary":false},"remoting/protocol/libjingle_transport_factory.h":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":36,"num_removed":0,"messages":[{"author":"Wez","author_email":"wez@chromium.org","text":"Why are you calling this LibjingleTransportFactory rather than JingleTransportFactory?","draft":false,"lineno":18,"date":"2012-02-17 20:58:01.817920","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> Why are you calling this LibjingleTransportFactory rather than\n> JingleTransportFactory?\n\nBecause JingleTransportFactory would be confusing. Jingle is a name of a protocol. Libjingle is a library that implements jingle protocol and bunch of other stuff (ICE/XMPP). This particular class is not related to Jingle protocol in any way, but uses P2P transport implementation provided by libjingle.","draft":false,"lineno":18,"date":"2012-02-17 23:02:33.811569","left":false}],"id":16,"is_binary":false},"jingle/glue/channel_socket_adapter.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":0,"messages":[],"id":13,"is_binary":false},"remoting/protocol/session_manager.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":0,"messages":[],"id":20,"is_binary":false},"remoting/protocol/libjingle_transport_factory.cc":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":283,"num_removed":0,"messages":[{"author":"Wez","author_email":"wez@chromium.org","text":"I don't think we actually need this to be a member, do we?","draft":false,"lineno":80,"date":"2012-02-17 20:58:01.814598","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"nit: connected_ -> is_connected_","draft":false,"lineno":83,"date":"2012-02-17 20:58:01.814880","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"Initialise |socket_| here, too.","draft":false,"lineno":95,"date":"2012-02-17 20:58:01.815162","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"nit: disables -> disable\n","draft":false,"lineno":134,"date":"2012-02-17 20:58:01.815443","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"Where does \"transp2\" come from?","draft":false,"lineno":139,"date":"2012-02-17 20:58:01.815715","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"nit: Remove either this blank line, or the one before \"if (config_.nat_travesal)\"...","draft":false,"lineno":148,"date":"2012-02-17 20:58:01.815985","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"nit: Create P2PTransportChannel and attached signal handlers.","draft":false,"lineno":151,"date":"2012-02-17 20:58:01.816255","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"nit: Prefix this with a comment like \"Connect P2PTransportChannel and adapt it to provide the net::Socket interface\"","draft":false,"lineno":160,"date":"2012-02-17 20:58:01.816542","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"nit: Configure and connect the PseudoTcp adapter.","draft":false,"lineno":167,"date":"2012-02-17 20:58:01.816814","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"No thread check?","draft":false,"lineno":200,"date":"2012-02-17 20:58:01.817091","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"The StreamTransport is returned to the caller via a scoped_ptr<>, so how is it ever appropriate for it to delete itself?","draft":false,"lineno":238,"date":"2012-02-17 20:58:01.817366","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"nit: You could clear |callback_| here, and have is_connected() depend on whether |callback_.is_null()|, to avoid the extra state variable and ensure consistency.","draft":false,"lineno":245,"date":"2012-02-17 20:58:01.817647","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> I don't think we actually need this to be a member, do we?\n\nDone.","draft":false,"lineno":80,"date":"2012-02-17 23:02:33.808077","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> nit: connected_ -> is_connected_\n\nDone.","draft":false,"lineno":83,"date":"2012-02-17 23:02:33.808364","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> Initialise |socket_| here, too.\n\nNot necessary since i removed |socket_|","draft":false,"lineno":95,"date":"2012-02-17 23:02:33.808639","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> nit: disables -> disable\n\nDone.","draft":false,"lineno":134,"date":"2012-02-17 23:02:33.808917","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> Where does \"transp2\" come from?\n\nThis is the same value that JingleSessionManager uses, and it came there from libjingle examples. This is a user-agent string that is used when with HTTP proxies, but we currently don't connect over HTTP proxies, so this value does't matter at all. I've changed it to an empty string.","draft":false,"lineno":139,"date":"2012-02-17 23:02:33.809226","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> nit: Remove either this blank line, or the one before \"if\n> (config_.nat_travesal)\"...\n\nDone.","draft":false,"lineno":148,"date":"2012-02-17 23:02:33.809521","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> nit: Create P2PTransportChannel and attached signal handlers.\n\nDone.","draft":false,"lineno":151,"date":"2012-02-17 23:02:33.809801","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> nit: Prefix this with a comment like \"Connect P2PTransportChannel and adapt it\n> to provide the net::Socket interface\"\n\nDone.","draft":false,"lineno":160,"date":"2012-02-17 23:02:33.810144","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> nit: Configure and connect the PseudoTcp adapter.\n\nDone.","draft":false,"lineno":167,"date":"2012-02-17 23:02:33.810449","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> No thread check?\n\nDone.","draft":false,"lineno":200,"date":"2012-02-17 23:02:33.810721","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> The StreamTransport is returned to the caller via a scoped_ptr<>, so how is it\n> ever appropriate for it to delete itself?\nTransport creator (PepperSession) owns the transport initially but then drop ownership once the channel is connected. We could fix that by returning transport instance from Session::Create*Channel(). We considered that solution but then decided to add Session::RemoveChannel() instead. Perhaps we should reconsider it.\n","draft":false,"lineno":238,"date":"2012-02-17 23:02:33.810995","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> nit: You could clear |callback_| here, and have is_connected() depend on whether\n> |callback_.is_null()|, to avoid the extra state variable and ensure consistency.\n\nDone.","draft":false,"lineno":245,"date":"2012-02-17 23:02:33.811269","left":false}],"id":15,"is_binary":false},"jingle/glue/channel_socket_adapter.h":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":0,"messages":[{"author":"Wez","author_email":"wez@chromium.org","text":"nit: Are there limitations on what the callback can touch/do?","draft":false,"lineno":32,"date":"2012-02-17 20:58:01.814275","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> nit: Are there limitations on what the callback can touch/do?\n\nNo except that it cannot access adapter object that's being destroyed, but I think it's obvious and not worth mentioning here.\n","draft":false,"lineno":32,"date":"2012-02-17 23:02:33.807782","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"On 2012/02/17 23:02:33, sergeyu wrote:\n> On 2012/02/17 20:58:01, Wez wrote:\n> > nit: Are there limitations on what the callback can touch/do?\n> \n> No except that it cannot access adapter object that's being destroyed, but I\n> think it's obvious and not worth mentioning here.\n\nThat may be obvious, but it's not obvious whether there are any other structures that should not be touched; clarifying that there are no other limits here helps avoid future changes to the API implementation breaking things.","draft":false,"lineno":32,"date":"2012-02-19 22:26:51.699351","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/19 22:26:51, Wez wrote:\n> On 2012/02/17 23:02:33, sergeyu wrote:\n> > On 2012/02/17 20:58:01, Wez wrote:\n> > > nit: Are there limitations on what the callback can touch/do?\n> > \n> > No except that it cannot access adapter object that's being destroyed, but I\n> > think it's obvious and not worth mentioning here.\n> \n> That may be obvious, but it's not obvious whether there are any other structures\n> that should not be touched; clarifying that there are no other limits here helps\n> avoid future changes to the API implementation breaking things.\n\nDone.","draft":false,"lineno":32,"date":"2012-02-21 19:38:53.694740","left":false}],"id":14,"is_binary":false},"remoting/remoting.gyp":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":23,"is_binary":false},"remoting/protocol/pepper_session_unittest.cc":{"status":"M","num_chunks":9,"no_base_file":false,"property_changes":"","num_added":90,"num_removed":4,"messages":[{"author":"Wez","author_email":"wez@chromium.org","text":"nit: --(*counter) ?","draft":false,"lineno":56,"date":"2012-02-17 20:58:01.818191","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"Won't this crash if the expectations end up being met after this function has returned, since they are attached to the mock, while |counter| will no longer be in scope?","draft":false,"lineno":237,"date":"2012-02-17 20:58:01.818471","left":false},{"author":"Wez","author_email":"wez@chromium.org","text":"nit: This comment makes no sense. :P","draft":false,"lineno":324,"date":"2012-02-17 20:58:01.818742","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> nit: --(*counter) ?\n\nDone, but there is nothing in the style guide that requires this.","draft":false,"lineno":56,"date":"2012-02-17 23:02:33.811845","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> Won't this crash if the expectations end up being met after this function has\n> returned, since they are attached to the mock, while |counter| will no longer be\n> in scope?\n\nMessageLoop::Run() below will not return until both expectations are met.","draft":false,"lineno":237,"date":"2012-02-17 23:02:33.812116","left":false},{"author":"Sergey Ulanov","author_email":"sergeyu@chromium.org","text":"On 2012/02/17 20:58:01, Wez wrote:\n> nit: This comment makes no sense. :P\n\nDone.","draft":false,"lineno":324,"date":"2012-02-17 23:02:33.812402","left":false}],"id":18,"is_binary":false},"remoting/protocol/pepper_session_manager.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":4,"messages":[],"id":17,"is_binary":false},"remoting/protocol/pepper_transport_factory.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":0,"num_removed":1,"messages":[],"id":19,"is_binary":false}},"owner_email":"sergeyu@chromium.org","owner":"Sergey Ulanov","message":"-","try_job_results":[],"created":"2012-02-08 00:52:37.105668","url":null,"num_comments":38,"modified":"2012-02-21 19:38:53.719432","patchset":2001,"issue":9365002}