{"description":"Add CanAccuratelyCopyFromBackingStore() to the backing store class. \r\n\r\nUse the new method to avoid using CopyFromBackingStore() for screen captures when CopyFromBackingStore() will not give a flawless copy.\r\n\r\nBUG=35204\r\nTEST=Manual testing with example screenshot extension.\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=41475","cc":["chromium-reviews@googlegroups.com"],"reviewers":["brettw@chromium.org"],"messages":[{"sender":"skerner@chromium.org","recipients":["skerner@chromium.org","brettw@chromium.org","chromium-reviews@googlegroups.com"],"text":"Brett,\n   Sending this to you because git blame shows that you edited the relevant parts of backing_store_x.cc last.  Let me know if someone else should be reviewing this.\n\nSam","disapproval":false,"date":"2010-03-10 19:39:23.203952","approval":false},{"sender":"brettw@chromium.org","recipients":["skerner@chromium.org","brettw@chromium.org","chromium-reviews@googlegroups.com"],"text":"http://codereview.chromium.org/830001/diff/2001/1009\nFile chrome/browser/renderer_host/backing_store_x.cc (right):\n\nhttp://codereview.chromium.org/830001/diff/2001/1009#newcode348\nchrome/browser/renderer_host/backing_store_x.cc:348: return true;\nIt seems like this function should return false for cases where it doesn't know how to convert the colors. Can we add that detection?\n\nWhen we add that, I wonder if the new function is necessary. Is it reasonable from the calling code's perspective to try to capture it, and if that fails, fall back on explicitly asking for a tab capture? It seems like that might be better handling anyway for the errors that can already occur in capturing.\n\nhttp://codereview.chromium.org/830001/diff/2001/1010\nFile chrome/browser/renderer_host/backing_store_x.h (right):\n\nhttp://codereview.chromium.org/830001/diff/2001/1010#newcode60\nchrome/browser/renderer_host/backing_store_x.h:60: virtual bool CanAccuratelyCopyFromBackingStore();\nDon't put blank lines around this (for derived classes we put all the functions together under one commend listing the source of the override).","disapproval":false,"date":"2010-03-11 19:40:01.731264","approval":false},{"sender":"skerner@chromium.org","recipients":["skerner@chromium.org","brettw@chromium.org","chromium-reviews@googlegroups.com"],"text":"Ready for another look.\n\nhttp://codereview.chromium.org/830001/diff/2001/1009\nFile chrome/browser/renderer_host/backing_store_x.cc (right):\n\nhttp://codereview.chromium.org/830001/diff/2001/1009#newcode348\nchrome/browser/renderer_host/backing_store_x.cc:348: return true;\nOn 2010/03/11 19:40:01, brettw wrote:\n> It seems like this function should return false for cases where it doesn't know\n> how to convert the colors. Can we add that detection?\n> \n> When we add that, I wonder if the new function is necessary. Is it reasonable\n> from the calling code's perspective to try to capture it, and if that fails,\n> fall back on explicitly asking for a tab capture? It seems like that might be\n> better handling anyway for the errors that can already occur in capturing.\n\nThat method is reasonable, but it means the other user of CopyFromBackingStore() needs to be updated as well.  That use is the creation of tab thumbnails.  I took a look at that code, and it does handle failures of CopyFromBackingStore() gracefully.  So, I changed CopyFromBackingStore() as you recommend.","disapproval":false,"date":"2010-03-12 17:06:39.210849","approval":false},{"sender":"brettw@chromium.org","recipients":["skerner@chromium.org","brettw@chromium.org","chromium-reviews@googlegroups.com"],"text":"LGTM","disapproval":false,"date":"2010-03-12 19:28:08.285173","approval":true}],"owner_email":"skerner@chromium.org","private":false,"base_url":"","owner":"Sam Kerner (Chrome)","subject":"Add CanAccuratelyCopyFromBackingStore() to the backing store class. ","created":"2010-03-10 19:20:19.298557","patchsets":[1,2001,11001],"modified":"2011-05-09 13:38:49.644580","closed":true,"commit":false,"issue":830001}