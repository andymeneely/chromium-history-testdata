{"files":{"chrome/browser/extensions/api/system_info_cpu/cpu_info_provider_win.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":74,"num_removed":2,"messages":[{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"This information class is declared in winternl.h. See SystemProcessorPerformanceInformation.","draft":false,"lineno":16,"date":"2012-09-11 16:33:16.750530","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"This structure is declared in <winternl.h>.","draft":false,"lineno":20,"date":"2012-09-11 16:33:16.785350","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"nit: It is partially documented. There us an entry in MSDN and the prototype in winternl.h. I think you can refer to them instead of describing the function parameters below.","draft":false,"lineno":28,"date":"2012-09-11 16:33:16.827240","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"Move \"return false\" to the next line.","draft":false,"lineno":42,"date":"2012-09-11 16:33:16.831490","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"nit: you can avoid this by having a local std::vector<CpuTime> variable and swapping it (std::vertor::swap()) with |*timer| at the very end of the function. This way you will also avoid touching |*times| in case of an error.","draft":false,"lineno":44,"date":"2012-09-11 16:33:16.835930","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"nit: consider declaring constants for L\"ntdll.dll\" and \"NtQuerySystemInformation\" below.","draft":false,"lineno":46,"date":"2012-09-11 16:33:16.840000","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"nit: Add CHECK(ntmodule != NULL) here.","draft":false,"lineno":46,"date":"2012-09-11 16:33:16.840970","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"nit: I believe this can be CHECK(NtQuerySystemInformation)","draft":false,"lineno":51,"date":"2012-09-11 16:33:16.842010","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"nit: Why is this number signed?","draft":false,"lineno":54,"date":"2012-09-11 16:33:16.843410","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"nit: no need for an empty line here.","draft":false,"lineno":55,"date":"2012-09-11 16:33:16.843840","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"nit: Declare both |bytes| and |returned_bytes| on separate lines. Initialize and declare them in the same statement.","draft":false,"lineno":59,"date":"2012-09-11 16:33:16.844300","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"nit: no need for an empty line here.","draft":false,"lineno":62,"date":"2012-09-11 16:33:16.844980","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"Does |returned_num_of_processors != num_of_processors| mean a catastrophic failure? Can I happen if say a CPU is hot added or removed (http://msdn.microsoft.com/en-us/library/bb964703(v=sql.105).aspx)? Will it be better to retry once?\n\nI'm pretty sure that at least we should return an error nicely here. I'm not sure about retrying though.","draft":false,"lineno":72,"date":"2012-09-11 16:33:16.845600","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"nit: no need for an empty line.","draft":false,"lineno":76,"date":"2012-09-11 16:33:16.845950","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> This information class is declared in winternl.h. See\n> SystemProcessorPerformanceInformation.\n\nDone.","draft":false,"lineno":16,"date":"2012-09-12 12:31:37.162700","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> This structure is declared in <winternl.h>.\n\nDone.","draft":false,"lineno":20,"date":"2012-09-12 12:31:37.163110","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> nit: It is partially documented. There us an entry in MSDN and the prototype in\n> winternl.h. I think you can refer to them instead of describing the function\n> parameters below.\n\nDone.","draft":false,"lineno":28,"date":"2012-09-12 12:31:37.163430","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> Move \"return false\" to the next line.\n\nDone.","draft":false,"lineno":42,"date":"2012-09-12 12:31:37.164150","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> nit: you can avoid this by having a local std::vector<CpuTime> variable and\n> swapping it (std::vertor::swap()) with |*timer| at the very end of the function.\n> This way you will also avoid touching |*times| in case of an error.\n\nDone.","draft":false,"lineno":44,"date":"2012-09-12 12:31:37.164660","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> nit: consider declaring constants for L\"ntdll.dll\" and\n> \"NtQuerySystemInformation\" below.\n\nDone.","draft":false,"lineno":46,"date":"2012-09-12 12:31:37.165330","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> nit: I believe this can be CHECK(NtQuerySystemInformation)\n\nDirectly use NtQuerySystemInformation API as defined in winternl.h now.","draft":false,"lineno":51,"date":"2012-09-12 12:31:37.165690","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> nit: Why is this number signed?\n\nThe base::SysInfo::NumberOfProcessors returns signed number.","draft":false,"lineno":54,"date":"2012-09-12 12:31:37.166010","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> nit: no need for an empty line here.\n\nDone.","draft":false,"lineno":55,"date":"2012-09-12 12:31:37.166330","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> nit: Declare both |bytes| and |returned_bytes| on separate lines. Initialize and\n> declare them in the same statement.\n\nDone.","draft":false,"lineno":59,"date":"2012-09-12 12:31:37.166810","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> nit: no need for an empty line here.\n\nDone.","draft":false,"lineno":62,"date":"2012-09-12 12:31:37.167160","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> Does |returned_num_of_processors != num_of_processors| mean a catastrophic\n> failure? Can I happen if say a CPU is hot added or removed\n> (http://msdn.microsoft.com/en-us/library/bb964703%28v=sql.105%29.aspx%29? Will it be\n> better to retry once?\n> \n> I'm pretty sure that at least we should return an error nicely here. I'm not\n> sure about retrying though.\n\nReturn false in case of that error happens.","draft":false,"lineno":72,"date":"2012-09-12 12:31:37.167510","left":false},{"author":"Hongbo Min","author_email":"hongbo.min@intel.com","text":"On 2012/09/11 16:33:16, alexeypa wrote:\n> nit: no need for an empty line.\n\nDone.","draft":false,"lineno":76,"date":"2012-09-12 12:31:37.167910","left":false},{"author":"alexeypa (please no reviews)","author_email":"alexeypa@chromium.org","text":"On 2012/09/12 12:31:37, Hongbo Min wrote:\n> On 2012/09/11 16:33:16, alexeypa wrote:\n> > nit: Why is this number signed?\n> \n> The base::SysInfo::NumberOfProcessors returns signed number.\n\nI understand but why does it return a signed number? Is it feasible to change this (in a follow up CL)? If not, consider adding DCHECK_GT(num_of_processors, 0);","draft":false,"lineno":54,"date":"2012-09-12 15:41:55.229420","left":false}],"id":4002,"is_binary":false},"chrome/browser/extensions/api/system_info_cpu/cpu_info_provider.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":2,"messages":[],"id":4001,"is_binary":false}},"owner_email":"hongbo.min@intel.com","owner":"Hongbo Min","message":" ","try_job_results":[],"created":"2012-09-09 09:22:35.497010","url":null,"num_comments":28,"modified":"2012-09-12 15:41:55.331840","patchset":3001,"issue":10916197}