{"description":"Make PowerSaveBlocker object an argument to DownloadFileImpl constructor \nso that we don't need to worry about it in unittests.\n\nBUG=110886\nTEST=Run DownloadFileTest.* over an NX connection.\nR=benjhayden@chromium.org\n\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=132998","cc":["chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org"],"reviewers":["benjhayden@chromium.org","sky@chromium.org"],"messages":[{"sender":"rdsmith@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org","mdm@chromium.org"],"text":"Ben, could you take a look?  One functional change of this CL is that the creation of a SaveFile object on behalf of SavePackage no longer blocks power save.  Given how fast SavePackage generally happens (no network involvement) I don't think this is a big deal, but it deserves to be called out.\n\n(This does lead to the thought that long-term we should have the PowerSaveBlocker in the resource handler(s), as that's what's tied to the network involvement, but that's not this CL.)\n\nCCing mdm FHI.","disapproval":false,"date":"2012-04-18 15:51:20.062937","approval":false},{"sender":"benjhayden@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org","mdm@chromium.org"],"text":"http://codereview.chromium.org/10116027/diff/1/content/browser/download/base_file.h\nFile content/browser/download/base_file.h (left):\n\nhttp://codereview.chromium.org/10116027/diff/1/content/browser/download/base_file.h#oldcode129\ncontent/browser/download/base_file.h:129: PowerSaveBlocker power_save_blocker_;\nAre you sure there aren't any other users of BaseFile that might want this functionality? SaveFile?","disapproval":false,"date":"2012-04-18 17:22:23.439413","approval":false},{"sender":"rdsmith@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org","mdm@chromium.org"],"text":"http://codereview.chromium.org/10116027/diff/1/content/browser/download/base_file.h\nFile content/browser/download/base_file.h (left):\n\nhttp://codereview.chromium.org/10116027/diff/1/content/browser/download/base_file.h#oldcode129\ncontent/browser/download/base_file.h:129: PowerSaveBlocker power_save_blocker_;\nOn 2012/04/18 17:22:23, benjhayden_chromium wrote:\n> Are you sure there aren't any other users of BaseFile that might want this\n> functionality? SaveFile?\n\nI tried to address that issue in my initial message on this CL; did that not make sense?  Quick summary: SaveFile is taking data from the renderer, and so will generally complete quickly.  Additional supporting argument: PowerSaveBlocker I believe only works on Linux, so we're already doing without this functionality on other platforms.","disapproval":false,"date":"2012-04-18 17:28:30.355680","approval":false},{"sender":"benjhayden@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org","mdm@chromium.org"],"text":"Oh, nevermind. I read the message, then promptly forgot it.\n\nLGTM","disapproval":false,"date":"2012-04-18 17:30:16.623575","approval":true},{"sender":"commit-bot@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org","mdm@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/rdsmith@chromium.org/10116027/8002","disapproval":false,"date":"2012-04-18 20:51:12.435257","approval":false},{"sender":"commit-bot@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org","mdm@chromium.org"],"text":"Presubmit check for 10116027-8002 failed and returned exit status 1.\n\nRunning presubmit commit checks ...\n\n** Presubmit ERRORS **\nMissing LGTM from an OWNER for files in these directories:\n    content/browser\n    content/test\n\nPresubmit checks took 9.1s to calculate.","disapproval":false,"date":"2012-04-18 20:51:30.289894","approval":false},{"sender":"rdsmith@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org","mdm@chromium.org"],"text":"sky, could you give OWNERS approval for content/browser and content/test?","disapproval":false,"date":"2012-04-18 21:02:31.116401","approval":false},{"sender":"sky@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org","mdm@chromium.org"],"text":"LGTM","disapproval":false,"date":"2012-04-18 21:52:42.644833","approval":true},{"sender":"commit-bot@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org","mdm@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/rdsmith@chromium.org/10116027/8002","disapproval":false,"date":"2012-04-19 14:27:53.221738","approval":false},{"sender":"commit-bot@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org","mdm@chromium.org"],"text":"Change committed as 132998","disapproval":false,"date":"2012-04-19 17:29:34.898432","approval":false},{"sender":"mdm@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org"],"text":"On 2012/04/18 17:28:30, rdsmith wrote:\n> http://codereview.chromium.org/10116027/diff/1/content/browser/download/base_file.h\n> File content/browser/download/base_file.h (left):\n> \n> http://codereview.chromium.org/10116027/diff/1/content/browser/download/base_file.h#oldcode129\n> content/browser/download/base_file.h:129: PowerSaveBlocker power_save_blocker_;\n> On 2012/04/18 17:22:23, benjhayden_chromium wrote:\n> > Are you sure there aren't any other users of BaseFile that might want this\n> > functionality? SaveFile?\n> \n> I tried to address that issue in my initial message on this CL; did that not\n> make sense?  Quick summary: SaveFile is taking data from the renderer, and so\n> will generally complete quickly.  Additional supporting argument:\n> PowerSaveBlocker I believe only works on Linux, so we're already doing without\n> this functionality on other platforms.\n\nIrrelevant to this CL but important FYI: There are implementations of PowerSaveBlocker for all platforms.","disapproval":false,"date":"2012-04-19 18:33:52.884478","approval":false},{"sender":"rdsmith@chromium.org","recipients":["rdsmith@chromium.org","benjhayden@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","rginda+watch@chromium.org","jam@chromium.org","rdsmith+dwatch@chromium.org"],"text":"On 2012/04/19 18:33:52, Mike Mammarella wrote:\n> On 2012/04/18 17:28:30, rdsmith wrote:\n> >\n> http://codereview.chromium.org/10116027/diff/1/content/browser/download/base_file.h\n> > File content/browser/download/base_file.h (left):\n> > \n> >\n> http://codereview.chromium.org/10116027/diff/1/content/browser/download/base_file.h#oldcode129\n> > content/browser/download/base_file.h:129: PowerSaveBlocker\n> power_save_blocker_;\n> > On 2012/04/18 17:22:23, benjhayden_chromium wrote:\n> > > Are you sure there aren't any other users of BaseFile that might want this\n> > > functionality? SaveFile?\n> > \n> > I tried to address that issue in my initial message on this CL; did that not\n> > make sense?  Quick summary: SaveFile is taking data from the renderer, and so\n> > will generally complete quickly.  Additional supporting argument:\n> > PowerSaveBlocker I believe only works on Linux, so we're already doing without\n> > this functionality on other platforms.\n> \n> Irrelevant to this CL but important FYI: There are implementations of\n> PowerSaveBlocker for all platforms.\n\nHuh.  Ooops, my bad.  But I'm a bit confused by the fact that downloads get interrupted on Macintoshes when you close the shell (or at least they used to).  Has the Mac PSB implemetnation been added recently?","disapproval":false,"date":"2012-04-19 18:54:13.675323","approval":false}],"owner_email":"rdsmith@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"rdsmith","subject":"Make PowerSaveBlocker object an argument to DownloadFileImpl constructor","created":"2012-04-18 15:46:11.653691","patchsets":[1,8002],"modified":"2012-04-19 18:54:13.891151","closed":true,"commit":false,"issue":10116027}