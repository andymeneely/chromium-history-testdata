{"description":"A follow-up of r64178.\r\n\r\nCheck for TLS 1.1 and TLS 1.2 (not yet supported)\r\nversion numbers to be future-proof.\r\n\r\nAvoid a null pointer dereference when SSL client\r\nauthentication is used with SSL 2.0.  This will\r\nbe removed when we remove SSL 2.0 support.\r\n\r\nDefine the SSL_CONNECTION_VERSION_xxx enum constants\r\nseparately so we can assert their values are in range\r\nat compile time.\r\n\r\nR=eroman\r\nBUG=53659\r\nTEST=none\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=64814","cc":["chromium-reviews@chromium.org","cbentzel+watch@chromium.org","darin-cc@chromium.org"],"reviewers":["eroman@chromium.org"],"messages":[{"sender":"wtc@chromium.org","recipients":["wtc@chromium.org","eroman@chromium.org","chromium-reviews@chromium.org","cbentzel+watch@chromium.org","darin-cc@chromium.org"],"text":"eroman: please review this CL.\n\nI annotated two places to provide background info for you.\nPlease ask me if it's still not clear.\n\nhttp://codereview.chromium.org/4211006/diff/1/3\nFile net/socket/ssl_client_socket_nss.cc (right):\n\nhttp://codereview.chromium.org/4211006/diff/1/3#newcode1108\nnet/socket/ssl_client_socket_nss.cc:1108: // doesn't support them yet), so we use 0x0302 and 0x0303 directly.\nHere are the SSL version macros defined by NSS:\nhttp://bonsai.mozilla.org/cvsblame.cgi?file=mozilla/security/nss/lib/ssl/sslproto.h&rev=1.15&mark=48-50#47\n\nTLS 1.0 = SSL 3.1\nTLS 1.1 = SSL 3.2\nTLS 1.2 = SSL 3.3\n\nI know this is confusing :-)\n\nhttp://codereview.chromium.org/4211006/diff/1/3#newcode1657\nnet/socket/ssl_client_socket_nss.cc:1657: // trying to make this work, as we plan to remove SSL 2.0 support soon.\nWhen SSL 2.0 is used, NSS calls this function here:\nhttp://bonsai.mozilla.org/cvsblame.cgi?file=mozilla/security/nss/lib/ssl/sslcon.c&rev=1.41&mark=2354-2355#2354\n\nNote that NSS passes NULL as the third argument (ca_names)\nto this function.  This is an inconsistency of NSS between\nits SSL 2.0 and SSL 3.0 code.  (In SSL 3.0, NSS passes a\nnon-NULL ca_names with ca_names->nnames=0 under the same\ncondition.)","disapproval":false,"date":"2010-10-29 17:49:50.234581","approval":false},{"sender":"eroman@chromium.org","recipients":["wtc@chromium.org","eroman@chromium.org","chromium-reviews@chromium.org","cbentzel+watch@chromium.org","darin-cc@chromium.org"],"text":"lgtm","disapproval":false,"date":"2010-10-30 03:35:31.369835","approval":true},{"sender":"wtc@chromium.org","recipients":["wtc@chromium.org","eroman@chromium.org","chromium-reviews@chromium.org","cbentzel+watch@chromium.org","darin-cc@chromium.org"],"text":"eroman: please review Patch Set 2.\n\nIn keeping with the recent decision that SSLInfo should not be\nused for non-SSL connections, I removed SSL_CONNECTION_VERSION_NONE.","disapproval":false,"date":"2010-11-01 18:25:17.826013","approval":false}],"owner_email":"wtc@chromium.org","private":false,"base_url":"svn://chrome-svn/chrome/trunk/src/","owner":"wtc","subject":"A follow-up of r64178....","created":"2010-10-29 17:40:42.055802","patchsets":[1,5001,10001],"modified":"2011-05-09 13:37:47.571275","closed":true,"commit":false,"issue":4211006}