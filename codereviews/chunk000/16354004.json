{"description":"Dump bucket ids of mmap'ed regions even if their allocated sizes are small or zero.\n\nBUG=244174\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=206720","cc":["chromium-reviews@chromium.org","dmikurube+memory@chromium.org"],"reviewers":["glider@chromium.org"],"messages":[{"sender":"dmikurube@chromium.org","recipients":["dmikurube@chromium.org","glider@chromium.org","chromium-reviews@chromium.org","dmikurube+memory@chromium.org"],"text":"Hi,\n\nCould you take a look when you have time?  It's also NOT in a hurry.","disapproval":false,"date":"2013-06-12 08:40:51.734220","approval":false},{"sender":"glider@chromium.org","recipients":["dmikurube@chromium.org","glider@chromium.org","chromium-reviews@chromium.org","dmikurube+memory@chromium.org"],"text":"https://codereview.chromium.org/16354004/diff/5001/third_party/tcmalloc/chromium/src/deep-heap-profile.cc\nFile third_party/tcmalloc/chromium/src/deep-heap-profile.cc (right):\n\nhttps://codereview.chromium.org/16354004/diff/5001/third_party/tcmalloc/chromium/src/deep-heap-profile.cc#newcode595\nthird_party/tcmalloc/chromium/src/deep-heap-profile.cc:595: if (!deep_bucket->is_mmap &&\nSorry, I don't get it. Does |is_mmap| mean that the memory chunks are allocated with mmap() and deallocated with munmap()? If so, how can alloc_size - free_size be less than a single page?","disapproval":false,"date":"2013-06-17 07:39:32.993420","approval":false},{"sender":"dmikurube@chromium.org","recipients":["dmikurube@chromium.org","glider@chromium.org","chromium-reviews@chromium.org","dmikurube+memory@chromium.org"],"text":"Thanks for looking.\n\nhttps://codereview.chromium.org/16354004/diff/5001/third_party/tcmalloc/chromium/src/deep-heap-profile.cc\nFile third_party/tcmalloc/chromium/src/deep-heap-profile.cc (right):\n\nhttps://codereview.chromium.org/16354004/diff/5001/third_party/tcmalloc/chromium/src/deep-heap-profile.cc#newcode595\nthird_party/tcmalloc/chromium/src/deep-heap-profile.cc:595: if (!deep_bucket->is_mmap &&\nOn 2013/06/17 07:39:33, Alexander Potapenko wrote:\n> Sorry, I don't get it. Does |is_mmap| mean that the memory chunks are allocated\n> with mmap() and deallocated with munmap()? If so, how can alloc_size - free_size\n> be less than a single page?\n\nIt can be just 0, and I'd like just to dump a \"bucket_id\" and its backtrace also for mmap with alloc_size - free_size == 0.","disapproval":false,"date":"2013-06-17 07:51:30.550710","approval":false},{"sender":"glider@chromium.org","recipients":["dmikurube@chromium.org","glider@chromium.org","chromium-reviews@chromium.org","dmikurube+memory@chromium.org"],"text":"I see. LGTM","disapproval":false,"date":"2013-06-17 08:09:24.958130","approval":true},{"sender":"dmikurube@chromium.org","recipients":["dmikurube@chromium.org","glider@chromium.org","chromium-reviews@chromium.org","dmikurube+memory@chromium.org"],"text":"Thanks!","disapproval":false,"date":"2013-06-17 08:24:43.834350","approval":false},{"sender":"commit-bot@chromium.org","recipients":["dmikurube@chromium.org","glider@chromium.org","chromium-reviews@chromium.org","dmikurube+memory@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/dmikurube@chromium.org/16354004/5001","disapproval":false,"date":"2013-06-17 12:36:35.084750","approval":false},{"sender":"commit-bot@chromium.org","recipients":["dmikurube@chromium.org","glider@chromium.org","chromium-reviews@chromium.org","dmikurube+memory@chromium.org"],"text":"Change committed as 206720","disapproval":false,"date":"2013-06-17 14:33:36.537680","approval":false}],"owner_email":"dmikurube@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"Dai Mikurube","subject":"Dump bucket ids of mmap'ed regions even if their allocated sizes are small or zero.","created":"2013-06-12 08:09:32.037000","patchsets":[1,3001,5001],"modified":"2013-06-17 14:33:36.636910","closed":true,"commit":false,"issue":16354004}