{"description":"Enable chromium setup.exe to use supported languages.\n\nSupport for multiple languages has been added to chromium_strings.grd. This change updates language_selector to make these languages available. As a side effect the debug version of the chromium setup.exe works again.\n\nBUG=120351\nTEST=Added unit test\n\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=131015","cc":["chromium-reviews@chromium.org"],"reviewers":["grt@chromium.org","tony@chromium.org"],"messages":[{"sender":"benwells@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","chromium-reviews@chromium.org"],"text":"Is the unit test enough?","disapproval":false,"date":"2012-03-30 06:38:47.615737","approval":false},{"sender":"grt@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","chromium-reviews@chromium.org"],"text":"http://codereview.chromium.org/9965007/diff/1/chrome/installer/util/language_selector.cc\nFile chrome/installer/util/language_selector.cc (left):\n\nhttp://codereview.chromium.org/9965007/diff/1/chrome/installer/util/language_selector.cc#oldcode246\nchrome/installer/util/language_selector.cc:246: DCHECK_LT(static_cast<size_t>(offset), arraysize(kLanguageOffsetPairs));\nthis DCHECK will be correct again once the !defined(GOOGLE_CHROME_BUILD) stuff is removed\n\nhttp://codereview.chromium.org/9965007/diff/1/chrome/installer/util/language_selector.cc\nFile chrome/installer/util/language_selector.cc (right):\n\nhttp://codereview.chromium.org/9965007/diff/1/chrome/installer/util/language_selector.cc#newcode43\nchrome/installer/util/language_selector.cc:43: { &kFallbackLanguage[0], kFallbackLanguageOffset }\nExcellent find with the r128653 change.  If Chromium now has a set of translations, the right thing to do is to remove all of these conditionals, leaving behind the contents of the defined(GOOGLE_CHROME_BUILD) sections (but not the ifdefs themselves) so that the full set of Chromium languages is used rather than just en-us.  i think the unittest has some ifdefs that should be removed now, too.","disapproval":false,"date":"2012-03-30 13:14:10.982255","approval":false},{"sender":"benwells@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","chromium-reviews@chromium.org"],"text":"http://codereview.chromium.org/9965007/diff/1/chrome/installer/util/language_selector.cc\nFile chrome/installer/util/language_selector.cc (left):\n\nhttp://codereview.chromium.org/9965007/diff/1/chrome/installer/util/language_selector.cc#oldcode246\nchrome/installer/util/language_selector.cc:246: DCHECK_LT(static_cast<size_t>(offset), arraysize(kLanguageOffsetPairs));\nOn 2012/03/30 13:14:11, grt wrote:\n> this DCHECK will be correct again once the !defined(GOOGLE_CHROME_BUILD) stuff\n> is removed\n\nDone.\n\nhttp://codereview.chromium.org/9965007/diff/1/chrome/installer/util/language_selector.cc\nFile chrome/installer/util/language_selector.cc (right):\n\nhttp://codereview.chromium.org/9965007/diff/1/chrome/installer/util/language_selector.cc#newcode43\nchrome/installer/util/language_selector.cc:43: { &kFallbackLanguage[0], kFallbackLanguageOffset }\nOn 2012/03/30 13:14:11, grt wrote:\n> Excellent find with the r128653 change.  If Chromium now has a set of\n> translations, the right thing to do is to remove all of these conditionals,\n> leaving behind the contents of the defined(GOOGLE_CHROME_BUILD) sections (but\n> not the ifdefs themselves) so that the full set of Chromium languages is used\n> rather than just en-us.  i think the unittest has some ifdefs that should be\n> removed now, too.\n\nOh yeah, of course. Much better!","disapproval":false,"date":"2012-04-02 00:48:09.805891","approval":false},{"sender":"benwells@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"+tony who added the extra languages to chromium_strings.grd\n\nAlso, updated the description of this patch to match what it's now doing.","disapproval":false,"date":"2012-04-02 00:54:17.490202","approval":false},{"sender":"tony@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"LGTM, thanks for doing this!","disapproval":false,"date":"2012-04-02 17:25:28.040679","approval":true},{"sender":"grt@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"LGTM++","disapproval":false,"date":"2012-04-02 17:25:49.242861","approval":true},{"sender":"tony@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"On 2012/04/02 17:25:28, tony wrote:\n> LGTM, thanks for doing this!\n\nYou might want to let grt review as well, I didn't even know this code existed.","disapproval":false,"date":"2012-04-02 17:26:18.183029","approval":false},{"sender":"grt@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"On 2012/04/02 17:25:49, grt wrote:\n> LGTM++\n\nActually, please change \"mini_installer\" to \"setup.exe\" in the title and description.  Thanks.","disapproval":false,"date":"2012-04-02 17:28:33.735350","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benwells@chromium.org/9965007/3002","disapproval":false,"date":"2012-04-02 23:15:05.235668","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"Try job failure for 9965007-3002 (retry) (retry) on win_rel for step \"browser_tests\".\nIt's a second try, previously, steps \"browser_tests, unit_tests\" failed.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=16960","disapproval":false,"date":"2012-04-03 03:58:40.092725","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benwells@chromium.org/9965007/3002","disapproval":false,"date":"2012-04-03 04:05:40.338945","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"Try job failure for 9965007-3002 (retry) on win_rel for steps \"ui_tests, browser_tests\".\nIt's a second try, previously, steps \"ui_tests, browser_tests, installer_util_unittests\" failed.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=17029","disapproval":false,"date":"2012-04-03 07:23:34.833499","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benwells@chromium.org/9965007/3002","disapproval":false,"date":"2012-04-03 09:38:46.239343","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"Try job failure for 9965007-3002 (retry) on win_rel for step \"browser_tests\".\nIt's a second try, previously, step \"browser_tests\" failed.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=17090","disapproval":false,"date":"2012-04-03 12:38:18.496982","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benwells@chromium.org/9965007/3002","disapproval":false,"date":"2012-04-03 23:40:15.311970","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"Try job failure for 9965007-3002 (retry) on win_rel for step \"update\".\nIt's a second try, previously, steps \"browser_tests, unit_tests, installer_util_unittests\" failed.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=17543\n\nStep \"update\" is always a major failure.\nLook at the try server FAQ for more details.","disapproval":false,"date":"2012-04-04 03:25:40.453986","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benwells@chromium.org/9965007/3002","disapproval":false,"date":"2012-04-04 04:27:34.235822","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"Try job failure for 9965007-3002 (retry) on win_rel for step \"browser_tests\".\nIt's a second try, previously, step \"browser_tests\" failed.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=17662","disapproval":false,"date":"2012-04-04 07:40:28.424087","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benwells@chromium.org/9965007/3002","disapproval":false,"date":"2012-04-04 07:42:26.243148","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"Try job failure for 9965007-3002 (retry) on win_rel for step \"browser_tests\".\nIt's a second try, previously, step \"browser_tests\" failed.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=17725","disapproval":false,"date":"2012-04-04 10:36:42.905984","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benwells@chromium.org/9965007/3002","disapproval":false,"date":"2012-04-04 10:37:40.243568","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"Try job failure for 9965007-3002 (retry) on win_rel for step \"browser_tests\".\nIt's a second try, previously, step \"browser_tests\" failed.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=17772","disapproval":false,"date":"2012-04-04 14:17:33.544167","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benwells@chromium.org/9965007/3002","disapproval":false,"date":"2012-04-04 22:14:53.262653","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"Try job failure for 9965007-3002 (retry) (retry) on win_rel for step \"browser_tests\".\nIt's a second try, previously, step \"browser_tests\" failed.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=18197","disapproval":false,"date":"2012-04-05 03:43:23.254321","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benwells@chromium.org/9965007/3002","disapproval":false,"date":"2012-04-05 05:03:39.466513","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"Try job failure for 9965007-3002 (retry) on win_rel for step \"browser_tests\".\nIt's a second try, previously, step \"browser_tests\" failed.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=18314","disapproval":false,"date":"2012-04-05 08:29:24.250678","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/benwells@chromium.org/9965007/3002","disapproval":false,"date":"2012-04-05 17:47:06.317757","approval":false},{"sender":"gab@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"FYI, lint is complaining about no new line at the end of chrome/installer/util/language_selector_unittest.cc\n\nsee: http://codereview.chromium.org/lint_patch/issue9965007_3002_4002","disapproval":false,"date":"2012-04-05 18:58:59.088578","approval":false},{"sender":"commit-bot@chromium.org","recipients":["benwells@chromium.org","grt@chromium.org","tony@chromium.org","chromium-reviews@chromium.org"],"text":"Change committed as 131015","disapproval":false,"date":"2012-04-05 21:37:07.952000","approval":false}],"owner_email":"benwells@chromium.org","private":false,"base_url":"http://git.chromium.org/chromium/src.git@master","owner":"benwells","subject":"Enable chromium setup.exe to use supported lanugages","created":"2012-03-30 06:35:03.520591","patchsets":[1,3002],"modified":"2012-04-05 21:37:08.053624","closed":true,"commit":false,"issue":9965007}