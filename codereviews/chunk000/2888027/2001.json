{"files":{"chrome/browser/gtk/tabs/tab_strip_gtk.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":7,"num_removed":0,"messages":[],"id":3002,"is_binary":false},"chrome/browser/gtk/tabs/tab_strip_gtk.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":3,"num_removed":0,"messages":[],"id":3003,"is_binary":false},"chrome/browser/gtk/browser_window_gtk.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":0,"messages":[{"author":"tony","author_email":"tony@chromium.org","text":"Nit: Should this go after the CanClose check right below it?  In which case it'll be near the tabstrip_->StopAnimation(). Maybe there should be a generic tabstrip_->WindowClosing() or something?  Having 2 separate methods is fine too (probably more readable).","draft":false,"lineno":670,"date":"2010-07-21 16:46:19.264538","left":false},{"author":"Evan Stade","author_email":"estade@chromium.org","text":"On 2010/07/21 16:46:19, tony wrote:\n> Nit: Should this go after the CanClose check right below it?  In which case\n> it'll be near the tabstrip_->StopAnimation(). Maybe there should be a generic\n> tabstrip_->WindowClosing() or something? \n\nI like this idea, but I think that StopAnimation() needs to come after CanClose() has returned true (so we know we are actually closing), whereas CancelActiveDragSession() has to come before CanClose() (or it will never get hit in the active drag case).\n","draft":false,"lineno":670,"date":"2010-07-21 19:01:03.669372","left":false},{"author":"tony","author_email":"tony@chromium.org","text":"I see, CanClose checks for IsDragSessionActive.  Maybe we should remove that check now since it will now always be false?  Then we can move CancelActiveDragSession() below the call to CanClose().\n\nOn 2010/07/21 19:01:03, Evan Stade wrote:\n> On 2010/07/21 16:46:19, tony wrote:\n> > Nit: Should this go after the CanClose check right below it?  In which case\n> > it'll be near the tabstrip_->StopAnimation(). Maybe there should be a generic\n> > tabstrip_->WindowClosing() or something? \n> \n> I like this idea, but I think that StopAnimation() needs to come after\n> CanClose() has returned true (so we know we are actually closing), whereas\n> CancelActiveDragSession() has to come before CanClose() (or it will never get\n> hit in the active drag case).\n> \n\n","draft":false,"lineno":670,"date":"2010-07-21 19:06:38.460379","left":false},{"author":"Evan Stade","author_email":"estade@chromium.org","text":"On 2010/07/21 19:06:38, tony wrote:\n> I see, CanClose checks for IsDragSessionActive.  Maybe we should remove that\n> check now since it will now always be false?  Then we can move\n> CancelActiveDragSession() below the call to CanClose().\n\nCanClose() is a part of the public API. I tried removing that check but it broke the action of dragging the last tab out of a window.\n\n","draft":false,"lineno":670,"date":"2010-07-21 21:33:05.037605","left":false}],"id":3001,"is_binary":false}},"owner_email":"estade@chromium.org","owner":"Evan Stade","message":"dont break last tab drags","try_job_results":[],"created":"2010-07-21 02:26:52.011162","url":null,"num_comments":4,"modified":"2010-07-21 21:33:05.084247","patchset":2001,"issue":2888027}