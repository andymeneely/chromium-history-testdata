{"files":{"sync/syncable/invalid_directory_backing_store.h":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":27,"num_removed":0,"messages":[],"id":11,"is_binary":false},"chrome/browser/sync/glue/sync_backend_host.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":17,"num_removed":8,"messages":[{"author":"timsteele","author_email":"tim@chromium.org","text":"The main danger with this is that SyncManager needs to make sure it tears down what it needs to if it detects failure. We actually carefully tear things down in StopSyncingForShutdown and ShutdownOnSyncThread, but this will mean we just rely on declaration orders / destructors. \n\nI'd recommend we move the call to set up connection_manager_ to *after* we return false for good measure -- if we created that and (for example) set up the NetworkChangeNotifier, we'd be in danger of hanging on shutdown since we'd return false but never call TerminateAllIO (because we'd never call StopSyncingForShutdown).\n\nI'd also recommend, if we can, that we call sync_manager_->ShutdownOnSyncThread() before reset here.","draft":false,"lineno":852,"date":"2012-07-31 19:40:26.445590","left":false},{"author":"rlarocque","author_email":"rlarocque@chromium.org","text":"On 2012/07/31 19:40:26, timsteele wrote:\n> The main danger with this is that SyncManager needs to make sure it tears down\n> what it needs to if it detects failure. We actually carefully tear things down\n> in StopSyncingForShutdown and ShutdownOnSyncThread, but this will mean we just\n> rely on declaration orders / destructors. \n> \n> I'd recommend we move the call to set up connection_manager_ to *after* we\n> return false for good measure -- if we created that and (for example) set up the\n> NetworkChangeNotifier, we'd be in danger of hanging on shutdown since we'd\n> return false but never call TerminateAllIO (because we'd never call\n> StopSyncingForShutdown).\n\nGood idea.  Done.\n\n> I'd also recommend, if we can, that we call\n> sync_manager_->ShutdownOnSyncThread() before reset here.\n\nDone.","draft":false,"lineno":852,"date":"2012-07-31 20:14:07.843910","left":false}],"id":2,"is_binary":false},"sync/internal_api/test/test_internal_components_factory.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":14,"num_removed":7,"messages":[],"id":8,"is_binary":false},"chrome/browser/sync/test_profile_sync_service.h":{"status":"M","num_chunks":5,"no_base_file":false,"property_changes":"","num_added":5,"num_removed":4,"messages":[],"id":5,"is_binary":false},"sync/sync.gyp":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":9,"is_binary":false},"chrome/browser/sync/profile_sync_service_unittest.cc":{"status":"M","num_chunks":7,"no_base_file":false,"property_changes":"","num_added":15,"num_removed":26,"messages":[],"id":3,"is_binary":false},"chrome/browser/sync/test_profile_sync_service.cc":{"status":"M","num_chunks":7,"no_base_file":false,"property_changes":"","num_added":8,"num_removed":10,"messages":[],"id":4,"is_binary":false},"sync/internal_api/syncapi_unittest.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":3,"messages":[],"id":7,"is_binary":false},"sync/internal_api/public/test/test_internal_components_factory.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":10,"num_removed":8,"messages":[],"id":6,"is_binary":false},"sync/syncable/invalid_directory_backing_store.cc":{"status":"A","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":21,"num_removed":0,"messages":[],"id":10,"is_binary":false}},"owner_email":"rlarocque@chromium.org","owner":"rlarocque","message":null,"try_job_results":[{"parent_name":null,"tests":[],"slave":"vm413-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_valgrind&number=824","timestamp":"2012-07-31 21:32:48.146911","builder":"linux_valgrind","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYlIKVBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjZNgw","requester":null,"buildnumber":"824","revision":"149198"},{"parent_name":null,"tests":[],"slave":"vm515-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=win_rel&number=48538","timestamp":"2012-07-31 20:08:07.821055","builder":"win_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYlIKVBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjRDww","requester":null,"buildnumber":"48538","revision":"149198"},{"parent_name":null,"tests":[],"slave":"slave28-b1","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_rel&number=43684","timestamp":"2012-07-31 19:52:43.875719","builder":"linux_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYlIKVBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBihHww","requester":null,"buildnumber":"43684","revision":"149198"},{"parent_name":null,"tests":[],"slave":"vm618-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=mac_rel&number=44071","timestamp":"2012-07-31 19:50:15.771089","builder":"mac_rel","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYlIKVBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBiJJww","requester":null,"buildnumber":"44071","revision":"149198"},{"parent_name":null,"tests":[],"slave":"vm435-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=android&number=25351","timestamp":"2012-07-31 18:48:46.991355","builder":"android","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYlIKVBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBjzBww","requester":null,"buildnumber":"25351","revision":"149198"},{"parent_name":null,"tests":[],"slave":"vm420-m4","url":"http://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_clang&number=38472","timestamp":"2012-07-31 18:44:04.184751","builder":"linux_clang","clobber":null,"project":"Chromium Try Server","reason":"","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnIvCxIFSXNzdWUYlIKVBQwLEghQYXRjaFNldBgBDAsSDFRyeUpvYlJlc3VsdBi5Fww","requester":null,"buildnumber":"38472","revision":"149198"}],"created":"2012-07-31 18:22:15.032250","url":null,"num_comments":2,"modified":"2012-07-31 20:14:07.879250","patchset":1,"issue":10830100}