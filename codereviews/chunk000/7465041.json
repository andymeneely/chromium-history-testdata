{"description":"GTTF: Use a fresh TestingBrowserProcess for each test, part #4\r\n\r\nFor a detailed description see part #1, http://codereview.chromium.org/6478005/\r\n\r\nBUG=61062\r\nTEST=unit_tests, possibly more\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=95350","cc":["chromium-reviews@chromium.org","cbentzel+watch@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","brettw-cc@chromium.org","jam@chromium.org","nick@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","jshin+watch@chromium.org","phajdan.jr@chromium.org","avi@chromium.org","tim@chromium.org","dhollowa@chromium.org"],"reviewers":["sky@chromium.org","jam@chromium.org"],"messages":[{"sender":"phajdan.jr@chromium.org","recipients":["phajdan.jr@chromium.org","sky@chromium.org","jam@chromium.org","chromium-reviews@chromium.org","cbentzel+watch@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","brettw-cc@chromium.org","jam@chromium.org","nick@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","jshin+watch@chromium.org","phajdan.jr@chromium.org","avi@chromium.org","tim@chromium.org","dhollowa@chromium.org"],"text":"","disapproval":false,"date":"2011-07-27 21:54:14.703627","approval":false},{"sender":"sky@chromium.org","recipients":["phajdan.jr@chromium.org","sky@chromium.org","jam@chromium.org","chromium-reviews@chromium.org","cbentzel+watch@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","brettw-cc@chromium.org","jam@chromium.org","nick@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","jshin+watch@chromium.org","phajdan.jr@chromium.org","avi@chromium.org","tim@chromium.org","dhollowa@chromium.org"],"text":"LGTM\n\nhttp://codereview.chromium.org/7465041/diff/5001/chrome/browser/tab_contents/thumbnail_generator_unittest.cc\nFile chrome/browser/tab_contents/thumbnail_generator_unittest.cc (right):\n\nhttp://codereview.chromium.org/7465041/diff/5001/chrome/browser/tab_contents/thumbnail_generator_unittest.cc#newcode211\nchrome/browser/tab_contents/thumbnail_generator_unittest.cc:211: class ThumbnailGeneratorSimpleTest : public TestingBrowserProcessTest {\nnit: typedef TestingBrowserProcessTest ThumbnailGeneratorSimpleTest;\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/browser/tab_contents/navigation_entry_unittest.cc\nFile content/browser/tab_contents/navigation_entry_unittest.cc (right):\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/browser/tab_contents/navigation_entry_unittest.cc#newcode10\ncontent/browser/tab_contents/navigation_entry_unittest.cc:10: #include \"chrome/test/testing_browser_process_test.h\"\nnit: before content\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/notification_service_unittest.cc\nFile content/common/notification_service_unittest.cc (right):\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/notification_service_unittest.cc#newcode8\ncontent/common/notification_service_unittest.cc:8: #include \"chrome/test/testing_browser_process_test.h\"\nnit: before content","disapproval":false,"date":"2011-07-28 00:28:03.629557","approval":true},{"sender":"jam@chromium.org","recipients":["phajdan.jr@chromium.org","sky@chromium.org","jam@chromium.org","chromium-reviews@chromium.org","cbentzel+watch@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","brettw-cc@chromium.org","jam@chromium.org","nick@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","jshin+watch@chromium.org","phajdan.jr@chromium.org","avi@chromium.org","tim@chromium.org","dhollowa@chromium.org"],"text":"(just looked at the content dir, which is what I assume you wanted me to look at)\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/DEPS\nFile content/common/DEPS (right):\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/DEPS#newcode3\ncontent/common/DEPS:3: \"+chrome/test\",\nthis is already in content\\DEPS\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/notification_service_unittest.cc\nFile content/common/notification_service_unittest.cc (right):\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/notification_service_unittest.cc#newcode35\ncontent/common/notification_service_unittest.cc:35: class NotificationServiceTest : public TestingBrowserProcessTest {\nwhy should a unit test derive from BrowserProcessTest? or is that something you'll do in a future cl?","disapproval":false,"date":"2011-07-28 01:41:21.686409","approval":false},{"sender":"phajdan.jr@chromium.org","recipients":["phajdan.jr@chromium.org","sky@chromium.org","jam@chromium.org","chromium-reviews@chromium.org","cbentzel+watch@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","brettw-cc@chromium.org","jam@chromium.org","nick@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","jshin+watch@chromium.org","phajdan.jr@chromium.org","avi@chromium.org","tim@chromium.org","dhollowa@chromium.org"],"text":"http://codereview.chromium.org/7465041/diff/5001/content/common/DEPS\nFile content/common/DEPS (right):\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/DEPS#newcode3\ncontent/common/DEPS:3: \"+chrome/test\",\nOn 2011/07/28 01:41:21, John Abd-El-Malek wrote:\n> this is already in content\\DEPS\n\nWithout this there is a check_deps failure. \"-chrome\" line above takes precedence over anything that's in content/DEPS.\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/notification_service_unittest.cc\nFile content/common/notification_service_unittest.cc (right):\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/notification_service_unittest.cc#newcode35\ncontent/common/notification_service_unittest.cc:35: class NotificationServiceTest : public TestingBrowserProcessTest {\nOn 2011/07/28 01:41:21, John Abd-El-Malek wrote:\n> why should a unit test derive from BrowserProcessTest? or is that something\n> you'll do in a future cl?\n\nTestingBrowserProcess has nothing to do with browser tests or InProcessBrowserTest. Sorry for the confusion; the main idea here is that we mock out the BrowserProcess object stored in g_browser_process.","disapproval":false,"date":"2011-07-28 03:49:17.899410","approval":false},{"sender":"jam@chromium.org","recipients":["phajdan.jr@chromium.org","sky@chromium.org","jam@chromium.org","chromium-reviews@chromium.org","cbentzel+watch@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","brettw-cc@chromium.org","jam@chromium.org","nick@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","jshin+watch@chromium.org","phajdan.jr@chromium.org","avi@chromium.org","tim@chromium.org","dhollowa@chromium.org"],"text":"http://codereview.chromium.org/7465041/diff/5001/content/common/DEPS\nFile content/common/DEPS (right):\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/DEPS#newcode3\ncontent/common/DEPS:3: \"+chrome/test\",\nOn 2011/07/28 03:49:18, Paweł Hajdan Jr. wrote:\n> On 2011/07/28 01:41:21, John Abd-El-Malek wrote:\n> > this is already in content\\DEPS\n> \n> Without this there is a check_deps failure. \"-chrome\" line above takes\n> precedence over anything that's in content/DEPS.\n\nit seems we can move the \"-chrome\" up to content\\DEPS now. and then we can get rid of this deps file altogether.\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/notification_service_unittest.cc\nFile content/common/notification_service_unittest.cc (right):\n\nhttp://codereview.chromium.org/7465041/diff/5001/content/common/notification_service_unittest.cc#newcode35\ncontent/common/notification_service_unittest.cc:35: class NotificationServiceTest : public TestingBrowserProcessTest {\nOn 2011/07/28 03:49:18, Paweł Hajdan Jr. wrote:\n> On 2011/07/28 01:41:21, John Abd-El-Malek wrote:\n> > why should a unit test derive from BrowserProcessTest? or is that something\n> > you'll do in a future cl?\n> \n> TestingBrowserProcess has nothing to do with browser tests or\n> InProcessBrowserTest. Sorry for the confusion; the main idea here is that we\n> mock out the BrowserProcess object stored in g_browser_process.\n\nI see, although I'm not sure I understand why unit tests need a BrowserProcess object around. But we can leave this until we start working on content_unittests","disapproval":false,"date":"2011-07-28 16:48:54.581848","approval":false},{"sender":"jam@chromium.org","recipients":["phajdan.jr@chromium.org","sky@chromium.org","jam@chromium.org","chromium-reviews@chromium.org","cbentzel+watch@chromium.org","idana@chromium.org","rsimha@chromium.org","erikkay@chromium.org","brettw-cc@chromium.org","jam@chromium.org","nick@chromium.org","joi+watch-content@chromium.org","aa@chromium.org","darin-cc@chromium.org","jshin+watch@chromium.org","phajdan.jr@chromium.org","avi@chromium.org","tim@chromium.org","dhollowa@chromium.org"],"text":"lgtm","disapproval":false,"date":"2011-07-28 17:45:15.946788","approval":true}],"owner_email":"phajdan.jr@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src","owner":"Paweł Hajdan Jr.","subject":"GTTF: Use a fresh TestingBrowserProcess for each test, part #4","created":"2011-07-26 16:52:57.056343","patchsets":[1,2001,5001,6040,13001],"modified":"2011-08-03 23:02:25.527736","closed":true,"commit":false,"issue":7465041}