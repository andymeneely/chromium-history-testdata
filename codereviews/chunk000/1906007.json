{"description":"Fix popups from onunload handlers.\n\nThese popups should be checked against the page that created them and not the\npage that we're currently navigating to.\n\nBUG=40718\nTEST=none\n\nCommitted: http://src.chromium.org/viewvc/chrome?view=rev&revision=46496","cc":["chromium-reviews@chromium.org","ben+cc@chromium.org","brettw-cc@chromium.org"],"reviewers":["pkasting@chromium.org"],"messages":[{"sender":"erg@chromium.org","recipients":["erg@chromium.org","pkasting@chromium.org","chromium-reviews@chromium.org","ben+cc@chromium.org","brettw-cc@chromium.org"],"text":"","disapproval":false,"date":"2010-05-05 19:16:36.822283","approval":false},{"sender":"pkasting@chromium.org","recipients":["erg@chromium.org","pkasting@chromium.org","chromium-reviews@chromium.org","ben+cc@chromium.org","brettw-cc@chromium.org"],"text":"LGTM, thanks!\n\nhttp://codereview.chromium.org/1906007/diff/1/2\nFile chrome/browser/tab_contents/tab_contents.cc (right):\n\nhttp://codereview.chromium.org/1906007/diff/1/2#newcode1432\nchrome/browser/tab_contents/tab_contents.cc:1432: // The page that spawns the popup is the last committed entry, not the active\nNit: This comment is slightly redundant.  How about:\n\nA page can't spawn popups (or do anything else, either) until its load commits, so when we reach here, the popup was spawned by the NavigationController's last committed entry, not the active entry.  For example, if a page opens a popup in an onunload() handler, then the active entry is the page to be loaded as we navigate away from the unloading page.  For this reason, we can't use GetURL() to get the opener URL, because it returns the active entry.","disapproval":false,"date":"2010-05-05 19:45:21.671411","approval":true}],"owner_email":"erg@chromium.org","private":false,"base_url":"http://src.chromium.org/git/chromium.git","owner":"Elliot Glaysher","subject":"Fix popups from onunload handlers.","created":"2010-05-05 19:12:07.502361","patchsets":[1],"modified":"2011-05-09 13:36:54.892196","closed":true,"commit":false,"issue":1906007}