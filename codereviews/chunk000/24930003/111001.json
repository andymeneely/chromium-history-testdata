{"files":{"chrome/test/data/extensions/profiles/content_scripts50/Default/Preferences":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":112012,"is_binary":false},"chrome/test/data/policy/policy_test_cases.json":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":112014,"is_binary":false},"chrome/browser/resources/options/browser_options.js":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":2,"messages":[],"id":112005,"is_binary":false},"chrome/test/data/extensions/profiles/content_scripts10/Default/Preferences":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":112011,"is_binary":false},"chrome/common/pref_names.h":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":2,"num_removed":0,"messages":[],"id":112009,"is_binary":false},"chrome/test/data/extensions/profiles/content_scripts1/Default/Preferences":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":112010,"is_binary":false},"chrome/browser/prefs/pref_model_associator.cc":{"status":"M","num_chunks":11,"no_base_file":false,"property_changes":"","num_added":150,"num_removed":17,"messages":[{"author":"Nicolas Zea","author_email":"zea@chromium.org","text":"I think it's invalid to call InitPrefAndAssociate with an old preference and not have the migrated_preference_list. In that case, I'd leave the first condition, and have DCHECK(migrated_preference_list) within the body.","draft":false,"lineno":156,"date":"2013-10-11 19:58:54.468490","left":false},{"author":"Nicolas Zea","author_email":"zea@chromium.org","text":"I think rather than having this here, you need to change the one at line 217 to use preference.name().\n\nFor example, if the migrated synced pref doesn't exist, pref_name will be for the migrated pref, and adding it into synced_preferences_ is invalid. If you do, at the later migrated_preferences phase you'll assume the preference exists, and do an ACTION_UPDATE, when it should be an ACTION_ADD.","draft":false,"lineno":181,"date":"2013-10-11 19:58:54.468800","left":false},{"author":"Nicolas Zea","author_email":"zea@chromium.org","text":"this should be old_pref_name right?","draft":false,"lineno":638,"date":"2013-10-11 19:58:54.469100","left":false},{"author":"robertshield","author_email":"robertshield@chromium.org","text":"On 2013/10/11 19:58:54, Nicolas Zea wrote:\n> I think it's invalid to call InitPrefAndAssociate with an old preference and not\n> have the migrated_preference_list. In that case, I'd leave the first condition,\n> and have DCHECK(migrated_preference_list) within the body.\n\nAfaict it should never happen and I'll add the DCHECK. I'm leery of leaving the pointer dereference there in release mode without checking it because I'm not extremely confident in my assessment that it will never happen. \n\nLet me know if you think I'm being overly paranoid and I'll drop the migrated_preference_list check too.","draft":false,"lineno":156,"date":"2013-10-11 21:47:23.760370","left":false},{"author":"robertshield","author_email":"robertshield@chromium.org","text":"On 2013/10/11 19:58:54, Nicolas Zea wrote:\n> I think rather than having this here, you need to change the one at line 217 to\n> use preference.name().\n> \n> For example, if the migrated synced pref doesn't exist, pref_name will be for\n> the migrated pref, and adding it into synced_preferences_ is invalid. If you do,\n> at the later migrated_preferences phase you'll assume the preference exists, and\n> do an ACTION_UPDATE, when it should be an ACTION_ADD.\n\npreference.name() is only defined if sync_pref.IsValid() is true. In cases where sync_pref is not valid (there are two such callsites) I think we should still add pref_name and rather just make sure to not add pref_name if preference.name() has already been added.\n\nDid that, let me know what you think.","draft":false,"lineno":181,"date":"2013-10-11 21:47:23.760590","left":false},{"author":"robertshield","author_email":"robertshield@chromium.org","text":"On 2013/10/11 19:58:54, Nicolas Zea wrote:\n> this should be old_pref_name right?\n\noops, yes. good catch.","draft":false,"lineno":638,"date":"2013-10-11 21:47:23.760770","left":false}],"id":112001,"is_binary":false},"chrome/test/data/profiles/profile_with_complex_theme/Default/PreferencesTemplate":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":112015,"is_binary":false},"chrome/test/data/extensions/profiles/empty/Default/Preferences":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":112013,"is_binary":false},"chrome/browser/resources/options/startup_section.html":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":112006,"is_binary":false},"chrome/browser/prefs/pref_model_associator.h":{"status":"M","num_chunks":3,"no_base_file":false,"property_changes":"","num_added":16,"num_removed":1,"messages":[],"id":112002,"is_binary":false},"chrome/common/pref_names.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":6,"num_removed":1,"messages":[],"id":112008,"is_binary":false},"chrome/browser/sync/profile_sync_service_preference_unittest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":138,"num_removed":0,"messages":[{"author":"Nicolas Zea","author_email":"zea@chromium.org","text":"Is this used for anything?","draft":false,"lineno":413,"date":"2013-10-11 19:58:54.469430","left":false},{"author":"Nicolas Zea","author_email":"zea@chromium.org","text":"If this test is for old migrated data in the cloud, shouldn't this be kURLsToRestoreOnStartupOld?","draft":false,"lineno":424,"date":"2013-10-11 19:58:54.469750","left":false},{"author":"Nicolas Zea","author_email":"zea@chromium.org","text":"finish comment?","draft":false,"lineno":437,"date":"2013-10-11 19:58:54.470060","left":false},{"author":"robertshield","author_email":"robertshield@chromium.org","text":"On 2013/10/11 19:58:54, Nicolas Zea wrote:\n> Is this used for anything?\n\nThis should have been (and now is) prefs::kURLsToRestoreOnStartup.","draft":false,"lineno":413,"date":"2013-10-11 21:47:23.761060","left":false},{"author":"robertshield","author_email":"robertshield@chromium.org","text":"On 2013/10/11 19:58:54, Nicolas Zea wrote:\n> If this test is for old migrated data in the cloud, shouldn't this be\n> kURLsToRestoreOnStartupOld?\n\nYes, sorry, this test was borked. Revised.","draft":false,"lineno":424,"date":"2013-10-11 21:47:23.761330","left":false},{"author":"robertshield","author_email":"robertshield@chromium.org","text":"On 2013/10/11 19:58:54, Nicolas Zea wrote:\n> finish comment?\n\nDone.","draft":false,"lineno":437,"date":"2013-10-11 21:47:23.761570","left":false}],"id":112007,"is_binary":false},"tools/metrics/histograms/histograms.xml":{"status":"M","num_chunks":2,"no_base_file":true,"property_changes":"","num_added":16,"num_removed":0,"messages":[],"id":112016,"is_binary":false},"chrome/browser/profile_resetter/profile_resetter_unittest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":1,"num_removed":1,"messages":[],"id":112004,"is_binary":false},"chrome/browser/prefs/session_startup_pref.cc":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":61,"num_removed":1,"messages":[],"id":112003,"is_binary":false}},"owner_email":"mad@chromium.org","owner":"MAD","message":"Nicolas' feedback. Add unit tests.","try_job_results":[{"parent_name":"win_rel","tests":["defaulttests","sync_integration_tests"],"slave":"slave511-c4#8","url":"http://build.chromium.org/p/tryserver.chromium/builders/swarm_triggered/builds/54058","timestamp":"2013-10-11 19:51:10.426235","builder":"swarm_triggered","clobber":false,"project":"Chromium Try Server","reason":"Triggerable(swarm_triggered)","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDA2qsKDA","requester":null,"buildnumber":"54058","revision":"228157"},{"parent_name":null,"tests":["defaulttests"],"slave":"slave354-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_chromeos/builds/163769","timestamp":"2013-10-11 19:39:46.384785","builder":"linux_chromeos","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAsqALDA","requester":"robertshield@chromium.org","buildnumber":"163769","revision":"228157"},{"parent_name":null,"tests":["compile"],"slave":"vm360-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win/builds/115712","timestamp":"2013-10-11 19:29:14.998750","builder":"win","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAspAIDA","requester":"robertshield@chromium.org","buildnumber":"115712","revision":"228157"},{"parent_name":null,"tests":["defaulttests","sync_integration_tests"],"slave":"vm359-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_rel/builds/207871","timestamp":"2013-10-11 19:28:14.291806","builder":"win_rel","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAstAJDA","requester":"robertshield@chromium.org","buildnumber":"207871","revision":"228157"},{"parent_name":null,"tests":["defaulttests"],"slave":"slave314-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_aura/builds/86426","timestamp":"2013-10-11 19:24:17.010246","builder":"linux_aura","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAsqAJDA","requester":"robertshield@chromium.org","buildnumber":"86426","revision":"228157"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm174-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win7_aura/builds/87927","timestamp":"2013-10-11 19:22:53.218150","builder":"win7_aura","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAsuAIDA","requester":"robertshield@chromium.org","buildnumber":"87927","revision":"228157"},{"parent_name":null,"tests":["defaulttests"],"slave":"slave296-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_asan/builds/49936","timestamp":"2013-10-11 19:11:35.941402","builder":"linux_asan","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAsuAJDA","requester":"robertshield@chromium.org","buildnumber":"49936","revision":"228157"},{"parent_name":null,"tests":["sync_integration_tests","defaulttests"],"slave":"vm703-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac_rel/builds/176703","timestamp":"2013-10-11 19:01:01.028272","builder":"mac_rel","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAstALDA","requester":"robertshield@chromium.org","buildnumber":"176703","revision":"228157"},{"parent_name":"mac_rel","tests":["sync_integration_tests","defaulttests"],"slave":"slave513-c4#14","url":"http://build.chromium.org/p/tryserver.chromium/builders/swarm_triggered/builds/54041","timestamp":"2013-10-11 18:58:08.601248","builder":"swarm_triggered","clobber":false,"project":"Chromium Try Server","reason":"Triggerable(swarm_triggered)","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDA6ocKDA","requester":null,"buildnumber":"54041","revision":"228157"},{"parent_name":null,"tests":["sync_integration_tests","defaulttests"],"slave":"vm468-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_rel/builds/177155","timestamp":"2013-10-11 18:47:13.869984","builder":"linux_rel","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAsrAIDA","requester":"robertshield@chromium.org","buildnumber":"177155","revision":"228157"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm399-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_dbg/builds/111617","timestamp":"2013-10-11 18:45:10.335983","builder":"android_dbg","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAstAIDA","requester":"robertshield@chromium.org","buildnumber":"111617","revision":"228157"},{"parent_name":null,"tests":["defaulttests"],"slave":"slave526-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_aosp/builds/19163","timestamp":"2013-10-11 18:44:20.015288","builder":"android_aosp","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAsqAKDA","requester":"robertshield@chromium.org","buildnumber":"19163","revision":"228157"},{"parent_name":null,"tests":["compile"],"slave":"vm730-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/mac/builds/92325","timestamp":"2013-10-11 18:43:09.581758","builder":"mac","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAspALDA","requester":"robertshield@chromium.org","buildnumber":"92325","revision":"228157"},{"parent_name":null,"tests":["compile"],"slave":"slave335-c4","url":"http://build.chromium.org/p/tryserver.chromium/builders/linux_clang/builds/146230","timestamp":"2013-10-11 18:41:39.158406","builder":"linux_clang","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAstAKDA","requester":"robertshield@chromium.org","buildnumber":"146230","revision":"228157"},{"parent_name":"linux_rel","tests":["sync_integration_tests","defaulttests"],"slave":"slave518-c4#14","url":"http://build.chromium.org/p/tryserver.chromium/builders/swarm_triggered/builds/54031","timestamp":"2013-10-11 18:41:12.975057","builder":"swarm_triggered","clobber":false,"project":"Chromium Try Server","reason":"","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAyrcKDA","requester":null,"buildnumber":"54031","revision":"228157"},{"parent_name":null,"tests":["defaulttests"],"slave":"mini41-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_dbg_simulator/builds/92168","timestamp":"2013-10-11 18:40:24.618140","builder":"ios_dbg_simulator","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAspAKDA","requester":"robertshield@chromium.org","buildnumber":"92168","revision":"228157"},{"parent_name":null,"tests":["compile"],"slave":"vm773-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/win_x64_rel/builds/44775","timestamp":"2013-10-11 18:39:49.498528","builder":"win_x64_rel","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAsuALDA","requester":"robertshield@chromium.org","buildnumber":"44775","revision":"228157"},{"parent_name":null,"tests":["defaulttests"],"slave":"mini33-l1","url":"http://build.chromium.org/p/tryserver.chromium/builders/ios_rel_device/builds/86661","timestamp":"2013-10-11 18:33:49.031398","builder":"ios_rel_device","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"0","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAspAJDA","requester":"robertshield@chromium.org","buildnumber":"86661","revision":"228157"},{"parent_name":null,"tests":["defaulttests"],"slave":"vm384-m4","url":"http://build.chromium.org/p/tryserver.chromium/builders/android_clang_dbg/builds/83397","timestamp":"2013-10-11 18:28:27.888170","builder":"android_clang_dbg","clobber":false,"project":"Chromium Try Server","reason":"mad2","result":"2","key":"ahdzfmNocm9taXVtY29kZXJldmlldy1ocnI3CxIFSXNzdWUY083xCwwLEghQYXRjaFNldBiZ4wYMCxIMVHJ5Sm9iUmVzdWx0GICAgIDAsuAKDA","requester":"robertshield@chromium.org","buildnumber":"83397","revision":"228157"}],"created":"2013-10-11 18:26:36.943520","url":null,"num_comments":12,"modified":"2013-10-11 21:47:23.859130","patchset":111001,"issue":24930003}