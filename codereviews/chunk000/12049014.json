{"description":"[DevTools] Added ChangeAttachedWindowHeight method to allow DevTools to change it's window height from inside.\n\nBUG=171410\nTEST=manual.\n\nCommitted: https://src.chromium.org/viewvc/chrome?view=rev&revision=180406","cc":["chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"reviewers":["palmer@chromium.org"],"messages":[{"sender":"dgozman@chromium.org","recipients":["dgozman@chromium.org","pfeldman@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"Take a look, please.","disapproval":false,"date":"2013-01-22 15:23:51.291380","approval":false},{"sender":"pfeldman@chromium.org","recipients":["dgozman@chromium.org","pfeldman@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"overall looks good. lest land upstream change first and I'll lgtm this. Also, will mac splitter width need to be taken into account or is it centered?\n\nhttps://codereview.chromium.org/12049014/diff/1/chrome/browser/ui/gtk/browser_window_gtk.cc\nFile chrome/browser/ui/gtk/browser_window_gtk.cc (right):\n\nhttps://codereview.chromium.org/12049014/diff/1/chrome/browser/ui/gtk/browser_window_gtk.cc#newcode2375\nchrome/browser/ui/gtk/browser_window_gtk.cc:2375: gtk_widget_style_get(contents_hsplit_, \"handle-size\", &split_size, NULL);\nDo you think Mac would require this adjustment as well?\n\nhttps://codereview.chromium.org/12049014/diff/1/content/renderer/devtools/devtools_client.h\nFile content/renderer/devtools/devtools_client.h (right):\n\nhttps://codereview.chromium.org/12049014/diff/1/content/renderer/devtools/devtools_client.h#newcode44\ncontent/renderer/devtools/devtools_client.h:44: virtual void changeAttachedWindowHeight(unsigned height) OVERRIDE;\nYou need to land upstream change first to introduce WebDevToolsFrontendClient::changeAttachedWindowHeight\n\nhttps://codereview.chromium.org/12049014/diff/1/ui/views/controls/single_split_view.cc\nFile ui/views/controls/single_split_view.cc (right):\n\nhttps://codereview.chromium.org/12049014/diff/1/ui/views/controls/single_split_view.cc#newcode109\nui/views/controls/single_split_view.cc:109: return both_visible ? kDividerSize : 0;\nI wonder if you actually need it - you could get away with returning kDividerSize here - you anyways query it for both_visible case only from outside.","disapproval":false,"date":"2013-01-22 15:39:21.356010","approval":true},{"sender":"dgozman@chromium.org","recipients":["dgozman@chromium.org","pfeldman@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"PTAL\n\nsky, please approve the changes in all ui directories.\n\nhttps://codereview.chromium.org/12049014/diff/1/chrome/browser/ui/gtk/browser_window_gtk.cc\nFile chrome/browser/ui/gtk/browser_window_gtk.cc (right):\n\nhttps://codereview.chromium.org/12049014/diff/1/chrome/browser/ui/gtk/browser_window_gtk.cc#newcode2375\nchrome/browser/ui/gtk/browser_window_gtk.cc:2375: gtk_widget_style_get(contents_hsplit_, \"handle-size\", &split_size, NULL);\nOn 2013/01/22 15:39:21, pfeldman wrote:\n> Do you think Mac would require this adjustment as well?\n\nIt's already done there.\n\nhttps://codereview.chromium.org/12049014/diff/1/content/renderer/devtools/devtools_client.h\nFile content/renderer/devtools/devtools_client.h (right):\n\nhttps://codereview.chromium.org/12049014/diff/1/content/renderer/devtools/devtools_client.h#newcode44\ncontent/renderer/devtools/devtools_client.h:44: virtual void changeAttachedWindowHeight(unsigned height) OVERRIDE;\nOn 2013/01/22 15:39:21, pfeldman wrote:\n> You need to land upstream change first to introduce\n> WebDevToolsFrontendClient::changeAttachedWindowHeight\nDone.\n\nhttps://codereview.chromium.org/12049014/diff/1/ui/views/controls/single_split_view.cc\nFile ui/views/controls/single_split_view.cc (right):\n\nhttps://codereview.chromium.org/12049014/diff/1/ui/views/controls/single_split_view.cc#newcode109\nui/views/controls/single_split_view.cc:109: return both_visible ? kDividerSize : 0;\nOn 2013/01/22 15:39:21, pfeldman wrote:\n> I wonder if you actually need it - you could get away with returning\n> kDividerSize here - you anyways query it for both_visible case only from\n> outside.\n\nWell, but if one will query it later, she may get the wrong result. I've just copied the logic from below here.","disapproval":false,"date":"2013-01-24 10:43:34.487720","approval":false},{"sender":"pfeldman@chromium.org","recipients":["dgozman@chromium.org","pfeldman@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"lgtm\n\nhttps://codereview.chromium.org/12049014/diff/1/ui/views/controls/single_split_view.cc\nFile ui/views/controls/single_split_view.cc (right):\n\nhttps://codereview.chromium.org/12049014/diff/1/ui/views/controls/single_split_view.cc#newcode109\nui/views/controls/single_split_view.cc:109: return both_visible ? kDividerSize : 0;\nYou copied it from the code that was making layout. GetDividerSize should return divider size which does not depend on panel's visibility. But I'll defer this one to the views/ owner.","disapproval":false,"date":"2013-01-24 13:26:40.159580","approval":true},{"sender":"pfeldman@chromium.org","recipients":["dgozman@chromium.org","pfeldman@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"lgtm","disapproval":false,"date":"2013-01-24 13:26:40.957880","approval":true},{"sender":"sky@chromium.org","recipients":["dgozman@chromium.org","pfeldman@chromium.org","sky@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"LGTM","disapproval":false,"date":"2013-01-24 17:49:29.201120","approval":true},{"sender":"dgozman@chromium.org","recipients":["dgozman@chromium.org","jln@chromium.org","joi@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"Hi,\n\njln, please take a look at content/common/devtools_messages.h\n\njoi, please approve changes to content/public/browser/devtools_frontend_host_delegate.h\n\nPlease tell me if you are not the right person to review.","disapproval":false,"date":"2013-01-25 14:42:16.766860","approval":false},{"sender":"joi@chromium.org","recipients":["dgozman@chromium.org","jln@chromium.org","joi@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"LGTM for content/public.","disapproval":false,"date":"2013-01-25 16:41:17.265070","approval":true},{"sender":"dgozman@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"Hello,\n\nPlease take a look at please take a look at content/common/devtools_messages.h\n\nThanks,\nDmitry","disapproval":false,"date":"2013-01-27 06:45:00.146130","approval":false},{"sender":"palmer@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"Looks pretty good; decide on the signedness (and, if you wish, the width) of the integer and I'll stamp it.\n\nhttps://codereview.chromium.org/12049014/diff/12001/chrome/browser/devtools/devtools_window.cc\nFile chrome/browser/devtools/devtools_window.cc (right):\n\nhttps://codereview.chromium.org/12049014/diff/12001/chrome/browser/devtools/devtools_window.cc#newcode749\nchrome/browser/devtools/devtools_window.cc:749: if (dock_side_ == DEVTOOLS_DOCK_SIDE_BOTTOM) {\nYou can save a level of indentation by doing:\n\nif (dock_side_ != DEVTOOLS_DOCK_SIDE_BOTTOM)\n    return;\n\n...\n\nhttps://codereview.chromium.org/12049014/diff/12001/content/common/devtools_messages.h\nFile content/common/devtools_messages.h (right):\n\nhttps://codereview.chromium.org/12049014/diff/12001/content/common/devtools_messages.h#newcode115\ncontent/common/devtools_messages.h:115: int /* height */)\nWhat will you do about negative or huge values? Perhaps uint16_t is better? (If so, change it throughout this CL.)\n\nhttps://codereview.chromium.org/12049014/diff/12001/content/public/browser/devtools_frontend_host_delegate.h\nFile content/public/browser/devtools_frontend_host_delegate.h (right):\n\nhttps://codereview.chromium.org/12049014/diff/12001/content/public/browser/devtools_frontend_host_delegate.h#newcode28\ncontent/public/browser/devtools_frontend_host_delegate.h:28: // Moves DevTools front-end window.\nThank you for fixing those typos. :)\n\nhttps://codereview.chromium.org/12049014/diff/12001/content/renderer/devtools/devtools_client.cc\nFile content/renderer/devtools/devtools_client.cc (right):\n\nhttps://codereview.chromium.org/12049014/diff/12001/content/renderer/devtools/devtools_client.cc#newcode59\ncontent/renderer/devtools/devtools_client.cc:59: void DevToolsClient::changeAttachedWindowHeight(unsigned height) {\nHere, you're using unsigned instead of signed int. Stick with one or the other. :)","disapproval":false,"date":"2013-01-29 21:08:47.513590","approval":false},{"sender":"dgozman@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"PTAL\n\nhttps://codereview.chromium.org/12049014/diff/12001/chrome/browser/devtools/devtools_window.cc\nFile chrome/browser/devtools/devtools_window.cc (right):\n\nhttps://codereview.chromium.org/12049014/diff/12001/chrome/browser/devtools/devtools_window.cc#newcode749\nchrome/browser/devtools/devtools_window.cc:749: if (dock_side_ == DEVTOOLS_DOCK_SIDE_BOTTOM) {\nOn 2013/01/29 21:08:47, Chris P. wrote:\n> You can save a level of indentation by doing:\n> \n> if (dock_side_ != DEVTOOLS_DOCK_SIDE_BOTTOM)\n>     return;\n> \n> ...\n\nDone.\n\nhttps://codereview.chromium.org/12049014/diff/12001/content/common/devtools_messages.h\nFile content/common/devtools_messages.h (right):\n\nhttps://codereview.chromium.org/12049014/diff/12001/content/common/devtools_messages.h#newcode115\ncontent/common/devtools_messages.h:115: int /* height */)\nOn 2013/01/29 21:08:47, Chris P. wrote:\n> What will you do about negative or huge values? Perhaps uint16_t is better? (If\n> so, change it throughout this CL.)\n\nI'd use uint32_t in messaging, since we got unsigned from WebKit. Then I'd cast it to signed to use in our public API and implementation code, which operate with ints. WDYT?\n\nThere is no difference between uint16 and uint32, since 2^16 is too big window height anyways :)","disapproval":false,"date":"2013-01-30 09:35:58.534690","approval":false},{"sender":"palmer@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"> I'd use uint32_t in messaging, since we got unsigned from WebKit. Then I'd cast\n> it to signed to use in our public API and implementation code, which operate\n> with ints. WDYT?\n\nIf possible, I'd change the APIs to take an unsigned type. For the APIs to take a signed type is semantically wrong. Casting from right to wrong feels bad to me.\n\nAlso, bounds checks on the actual value would make sense.","disapproval":false,"date":"2013-01-31 02:42:56.506600","approval":false},{"sender":"dgozman@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"On 2013/01/31 02:42:56, Chris P. wrote:\n> > I'd use uint32_t in messaging, since we got unsigned from WebKit. Then I'd\n> cast\n> > it to signed to use in our public API and implementation code, which operate\n> > with ints. WDYT?\n> \n> If possible, I'd change the APIs to take an unsigned type. For the APIs to take\n> a signed type is semantically wrong. Casting from right to wrong feels bad to\n> me.\nDone.\n\n> Also, bounds checks on the actual value would make sense.\nI have no idea about the right bounds. I'd delegate this check to gtk, views or cocoa code - they know better.","disapproval":false,"date":"2013-01-31 11:45:10.157200","approval":false},{"sender":"palmer@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"https://codereview.chromium.org/12049014/diff/16004/content/browser/devtools/devtools_frontend_host.h\nFile content/browser/devtools/devtools_frontend_host.h (right):\n\nhttps://codereview.chromium.org/12049014/diff/16004/content/browser/devtools/devtools_frontend_host.h#newcode43\ncontent/browser/devtools/devtools_frontend_host.h:43: void OnChangeAttachedWindowHeight(uint32 height);\nIn devtools_window.h you use unsigned. Even though unsigned is \"probably\" the same as uint32, be explicit: Pick one or the other. (I'd go with unsigned.)","disapproval":false,"date":"2013-02-01 01:48:36.681810","approval":false},{"sender":"dgozman@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"https://codereview.chromium.org/12049014/diff/16004/content/browser/devtools/devtools_frontend_host.h\nFile content/browser/devtools/devtools_frontend_host.h (right):\n\nhttps://codereview.chromium.org/12049014/diff/16004/content/browser/devtools/devtools_frontend_host.h#newcode43\ncontent/browser/devtools/devtools_frontend_host.h:43: void OnChangeAttachedWindowHeight(uint32 height);\nOn 2013/02/01 01:48:36, Chris P. wrote:\n> In devtools_window.h you use unsigned. Even though unsigned is \"probably\" the\n> same as uint32, be explicit: Pick one or the other. (I'd go with unsigned.)\n\nDone.","disapproval":false,"date":"2013-02-01 11:34:22.762800","approval":false},{"sender":"palmer@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"LGTM. Thanks for putting up with my type persnickitiness. :)","disapproval":false,"date":"2013-02-01 18:55:29.642780","approval":true},{"sender":"commit-bot@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/dgozman@chromium.org/12049014/19005","disapproval":false,"date":"2013-02-04 10:37:21.858140","approval":false},{"sender":"commit-bot@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"Sorry for I got bad news for ya.\nCompile failed with a clobber build on linux_rel.\nhttp://build.chromium.org/p/tryserver.chromium/buildstatus?builder=linux_rel&number=95652\nYour code is likely broken or HEAD is junk. Please ensure your\ncode is not broken then alert the build sheriffs.\nLook at the try server FAQ for more details.","disapproval":false,"date":"2013-02-04 11:04:25.771410","approval":false},{"sender":"commit-bot@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"CQ is trying da patch. Follow status at\nhttps://chromium-status.appspot.com/cq/dgozman@chromium.org/12049014/41002","disapproval":false,"date":"2013-02-04 11:58:49.403760","approval":false},{"sender":"commit-bot@chromium.org","recipients":["dgozman@chromium.org","palmer@chromium.org","chromium-reviews@chromium.org","vsevik@chromium.org","tfarina@chromium.org","jam@chromium.org","yurys@chromium.org","joi+watch-content@chromium.org","darin-cc@chromium.org","sail+watch@chromium.org","pfeldman@chromium.org"],"text":"Change committed as 180406","disapproval":false,"date":"2013-02-04 14:58:24.366600","approval":false}],"owner_email":"dgozman@chromium.org","private":false,"base_url":"svn://svn.chromium.org/chrome/trunk/src/","owner":"dgozman","subject":"[DevTools] Added ChangeAttachedWindowHeight method to allow DevTools to change it's window height fâ€¦","created":"2013-01-22 15:20:47.174050","patchsets":[1,12001,17001,16004,19005,41002],"modified":"2013-02-04 14:58:24.648580","closed":true,"commit":false,"issue":12049014}