{"files":{"chrome/browser/omnibox/omnibox_field_trial.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":24,"num_removed":0,"messages":[{"author":"Mark P","author_email":"mpearson@chromium.org","text":"Perhaps add something about demotion scores (refer to GetDemotionsByType) don't get applied to a top match if the top match is of a type on this list.\n","draft":false,"lineno":277,"date":"2013-11-04 20:30:12.534940","left":false},{"author":"H Fung","author_email":"hfung@chromium.org","text":"On 2013/11/04 20:30:12, Mark P wrote:\n> Perhaps add something about demotion scores (refer to GetDemotionsByType) don't\n> get applied to a top match if the top match is of a type on this list.\n\nDone.","draft":false,"lineno":277,"date":"2013-11-04 21:39:57.442660","left":false}],"id":310003,"is_binary":false},"chrome/browser/autocomplete/autocomplete_result_unittest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":61,"num_removed":0,"messages":[],"id":310002,"is_binary":false},"chrome/browser/omnibox/omnibox_field_trial_unittest.cc":{"status":"M","num_chunks":1,"no_base_file":false,"property_changes":"","num_added":28,"num_removed":0,"messages":[],"id":310005,"is_binary":false},"chrome/browser/autocomplete/autocomplete_result.cc":{"status":"M","num_chunks":2,"no_base_file":false,"property_changes":"","num_added":20,"num_removed":1,"messages":[{"author":"Mark P","author_email":"mpearson@chromium.org","text":"nit: parens around != please","draft":false,"lineno":164,"date":"2013-11-04 20:30:12.534180","left":false},{"author":"Mark P","author_email":"mpearson@chromium.org","text":"This comment made me realize the comment in autocomplet_result.h by the declaration of AddMatch() is wrong:\n  // Adds a single match. The match is inserted at the appropriate position\n  // based on relevancy and display order. This is ONLY for use after\n  // SortAndCull() has been invoked, and preserves default_match_.\nCan you fix it and replace the last sentence of that comment with this sentence:\n // It preserves default_match_.\n(after all, it's never used after SortAndCull, only before)\n\nAs for the comment here, how about replacing your comment with this?\n(or combining your comment with this suggestion:)\n// GetUndemotableTopTypes() is not used here because we're only worried about preserving the top result when calculating the default match, which happens in SortAndCull().  Because AddMatch() does not change the default match, there is no need think about undemotable types here.\n","draft":false,"lineno":337,"date":"2013-11-04 20:30:12.534580","left":false},{"author":"H Fung","author_email":"hfung@chromium.org","text":"On 2013/11/04 20:30:12, Mark P wrote:\n> nit: parens around != please\n\nDone.","draft":false,"lineno":164,"date":"2013-11-04 21:39:57.442030","left":false},{"author":"H Fung","author_email":"hfung@chromium.org","text":"On 2013/11/04 20:30:12, Mark P wrote:\n> This comment made me realize the comment in autocomplet_result.h by the\n> declaration of AddMatch() is wrong:\n>   // Adds a single match. The match is inserted at the appropriate position\n>   // based on relevancy and display order. This is ONLY for use after\n>   // SortAndCull() has been invoked, and preserves default_match_.\n> Can you fix it and replace the last sentence of that comment with this sentence:\n>  // It preserves default_match_.\n> (after all, it's never used after SortAndCull, only before)\n\nActually, SortAndCull() is called both before and after AddMatch().   AutocompleteController::UpdateResult() calls SortAndCull() before CopyOldMatches() (which calls MergeMatchesByProvider() which calls AddMatch).  The only other caller to CopyOldMatches() is a test.\n\n> As for the comment here, how about replacing your comment with this?\n> (or combining your comment with this suggestion:)\n> // GetUndemotableTopTypes() is not used here because we're only worried about\n> preserving the top result when calculating the default match, which happens in\n> SortAndCull().  Because AddMatch() does not change the default match, there is\n> no need think about undemotable types here.\n\nI'm not sure that's true.  What |default_match_| points to is not changed here (even if the match is added to the top position), but |default_match_| can get reset in SortAndCull().","draft":false,"lineno":337,"date":"2013-11-04 21:39:57.442320","left":false}],"id":310001,"is_binary":false},"chrome/browser/omnibox/omnibox_field_trial.h":{"status":"M","num_chunks":4,"no_base_file":false,"property_changes":"","num_added":11,"num_removed":0,"messages":[],"id":310004,"is_binary":false}},"owner_email":"hfung@chromium.org","owner":"H Fung","message":"Mark's comments","try_job_results":[],"created":"2013-11-04 19:38:40.972530","url":null,"num_comments":6,"modified":"2013-11-04 21:39:57.599230","patchset":300001,"issue":55413002}